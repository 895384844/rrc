!function(t){"function"==typeof define&&define.amd?define(["jquery","ChineseDistricts"],t):"object"==typeof exports?t(require("jquery"),require("ChineseDistricts")):t(jQuery,ChineseDistricts)}(function(t,i){"use strict";function e(i,s){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(s)&&s),this.placeholders=t.extend({},e.DEFAULTS),this.active=!1,this.init()}if(void 0===i)throw new Error('The file "distpicker.data.js" must be included first!');var s="change.distpicker";e.prototype={constructor:e,init:function(){var i=this.options,e=this.$element.find("select"),s=e.length,n={};e.each(function(){t.extend(n,t(this).data())}),t.each(["province","city","district"],t.proxy(function(t,c){n[c]?(i[c]=n[c],this["$"+c]=e.filter("[data-"+c+"]")):this["$"+c]=s>t?e.eq(t):null},this)),this.bind(),this.reset(),this.active=!0},bind:function(){this.$province&&this.$province.on(s,this._changeProvince=t.proxy(function(){this.output("city"),this.output("district")},this)),this.$city&&this.$city.on(s,this._changeCity=t.proxy(function(){this.output("district")},this))},unbind:function(){this.$province&&this.$province.off(s,this._changeProvince),this.$city&&this.$city.off(s,this._changeCity)},output:function(e){var s,n,c,o=this.options,r=this.placeholders,d=this["$"+e],h={},u=[];d&&d.length&&(c=o[e],s="province"===e?86:"city"===e?this.$province&&this.$province.find(":selected").data("code"):"district"===e?this.$city&&this.$city.find(":selected").data("code"):s,h=t.isNumeric(s)?i[s]:null,t.isPlainObject(h)&&t.each(h,function(t,i){var e=i===c;e&&(n=!0),u.push({code:t,address:i,selected:e})}),n||(u.length&&(o.autoSelect||o.autoselect)&&(u[0].selected=!0),!this.active&&c&&(r[e]=c)),o.placeholder&&u.unshift({code:"",address:r[e],selected:!1}),d.html(this.getList(u)))},getList:function(i){var e=[];return t.each(i,function(t,i){e.push('<option value="'+(i.address&&i.code?i.address:"")+'" data-code="'+(i.code||"")+'"'+(i.selected?" selected":"")+">"+(i.address||"")+"</option>")}),e.join("")},reset:function(t){t?this.$province&&this.$province.find(":first").prop("selected",!0).trigger(s):(this.output("province"),this.output("city"),this.output("district"))},destroy:function(){this.unbind(),this.$element.removeData("distpicker")}},e.DEFAULTS={autoSelect:!0,placeholder:!0,province:"请选择省",city:"请选择市",district:"请选择区"},e.setDefaults=function(i){t.extend(e.DEFAULTS,i)},e.other=t.fn.distpicker,t.fn.distpicker=function(i){var s=[].slice.call(arguments,1);return this.each(function(){var n,c,o=t(this),r=o.data("distpicker");if(!r){if(/destroy/.test(i))return;n=t.extend({},o.data(),t.isPlainObject(i)&&i),o.data("distpicker",r=new e(this,n))}"string"==typeof i&&t.isFunction(c=r[i])&&c.apply(r,s)})},t.fn.distpicker.Constructor=e,t.fn.distpicker.setDefaults=e.setDefaults,t.fn.distpicker.noConflict=function(){return t.fn.distpicker=e.other,this},t(function(){t('[data-toggle="distpicker"]').distpicker()})});