function searH(){$(".list_l").height();$(".loadings").css({"line-height":"100px"}).show()}function sortContain(){var s=new Object;s.classifyCode=$("#code").val(),s.keyWord=$("#keywords").val(),s.page=$("#page").val(),s.rows=$("#rows").val(),s.sortFlag=$("#sortFlag").val(),s.feeFlag=$("#feeFlag").val(),commonParm(s),curPage=$("#page").val(),console.log(s),jsonAjax(InterFace.search,s,getSort_fn)}function sortPage(){var s=new Object;s.classifyCode=$("#code").val(),s.keyWord=$("#keywords").val(),s.page=$("#page").val(),s.rows=$("#rows").val(),s.sortFlag=$("#sortFlag").val(),s.feeFlag=$("#feeFlag").val(),curPage=$("#page").val(),jsonAjax(InterFace.search,s,getPage_fn)}function get_mainAort(s){if("200"==s.errCode){mainAort=s.list;var a='<li class="course-nav-item all course-nav on" code=""><a>全部</a></li>',e="全部";$.each(s.list,function(s,i){if(a+='<li class="course-nav-item course-nav" code="'+i.classifyidcode+'"><a>'+i.classifyname+"</a></li>","null"!==getSearch("pcode")&&getSearch("pcode")==i.classifyidcode){if(e=i.classifyname,"null"!==getSearch("pcode"))o="<li class='course-nav-item course-sub' code='"+i.classifyidcode+"'><a>全部</a></li>";else var o="<li class='course-nav-item course-sub active'><a code='"+i.classifyidcode+"'>全部</a></li>";$.each(i.childList,function(s,a){a.classifyidcode==getSearch("code")?o+="<li class='course-nav-item course-sub active' code='"+a.classifyidcode+"'><a>"+a.classifyname+"</a></li>":o+="<li class='course-nav-item course-sub' code='"+a.classifyidcode+"'><a>"+a.classifyname+"</a></li>"}),$("#shangQuancontain").append(o),$(".list_cont").show()}}),$(document).attr("title",e+"_人人创培训监管服务平台"),$("#mainS").append(a),$(".course-nav").each(function(){$(this).attr("code")==getSearch("pcode")&&$(this).addClass("on").siblings(".course-nav").removeClass("on")})}}function getSort_fn(s){if(s){console.log(s);var a="";$.each(s.courseList,function(s,e){if(e.introduce.length>28)i=e.introduce.substring(0,28)+"...";else var i=e.introduce;if(null!==e.coursewareMinUrl&&"null"!==e.coursewareMinUrl&&void 0!==e.coursewareMinUrl&&"undefined"!==e.coursewareMinUrl&&""!==e.coursewareMinUrl)o=e.coursewareMinUrl;else var o=e.coursewareurl;s>0&&(s+1)%4==0?(e.money>0?a+='<ul style="margin-right:0px;" id="'+e.coursewareId+'" sftype="1" buyFlag="'+e.buyFlag+'"><li><img src="'+o+version+'" alt=""><div class="con"><h3 class="study-hd"><a href="javascript:;" target="_blank">'+e.coursewarename+'</a></h3><p class="study_sort">'+e.enClassifyName+'<span class="fr"><i class="iconfont icon-yanjing"></i><i>'+e.coursewarepv+'</i></span></p><div class="study_lesson">课程简介：'+i+'</div><p class="study_show"><span class="fee">￥<i>'+e.money+"</i></span>":a+='<ul style="margin-right:0px;" id="'+e.coursewareId+'" sftype="2" buyFlag="'+e.buyFlag+'"><li><img src="'+o+version+'" alt=""><div class="con"><h3 class="study-hd"><a href="javascript:;" target="_blank">'+e.coursewarename+'</a></h3><p class="study_sort">'+e.enClassifyName+'<span class="fr"><i class="iconfont icon-yanjing"></i><i>'+e.coursewarepv+'</i></span></p><div class="study_lesson">课程简介：'+i+'</div><p class="study_show"><span class="nfee">免费</span>',a+='<span class="fr"><i class="iconfont icon-xing"></i><i>评分</i><em>'+e.coursewarescore+"</em></span></p></div></li></ul>"):(e.money>0?a+='<ul id="'+e.coursewareId+'" sftype="1" buyFlag="'+e.buyFlag+'"><li><img src="'+o+version+'" alt=""><div class="con"><h3 class="study-hd"><a href="javascript:;" target="_blank">'+e.coursewarename+'</a></h3><p class="study_sort">'+e.enClassifyName+'<span class="fr"><i class="iconfont icon-yanjing"></i><i>'+e.coursewarepv+'</i></span></p><div class="study_lesson">课程简介：'+i+'</div><p class="study_show"><span class="fee">￥<i>'+e.money+"</i></span>":a+='<ul id="'+e.coursewareId+'" sftype="2" buyFlag="'+e.buyFlag+'"><li><img src="'+o+version+'" alt=""><div class="con"><h3 class="study-hd"><a href="javascript:;" target="_blank">'+e.coursewarename+'</a></h3><p class="study_sort">'+e.enClassifyName+'<span class="fr"><i class="iconfont icon-yanjing"></i><i>'+e.coursewarepv+'</i></span></p><div class="study_lesson">课程简介：'+i+'</div><p class="study_show"><span class="nfee">免费</span>',a+='<span class="fr"><i class="iconfont icon-xing"></i><i>评分</i><em>'+e.coursewarescore+"</em></span></p></div></li></ul>")}),$("#sortList").html(a),$("#sortList ul").on("click",function(){var s=$(this).prop("id"),a=$(this).attr("sftype"),e=$(this).attr("buyFlag");"1"==a?"1"==e?window.open("lessoninfo.html?id="+s,"_blank"):window.open("lessonInfo_fee.html?id="+s,"_blank"):"2"==a&&window.open("lessoninfo.html?id="+s,"_blank")}),$("#countRows").text(s.countRows),(pageSum=s.countRows)>0?($("#page_s").jqPaginator({totalCounts:pageSum,pageSize:16,visiblePages:1,prev:'<li class="prev"><a href="javascript:void(0);" class="iconfont icon-xiangzuoxiangyou-copy"></a></li>',next:'<li class="next"><a href="javascript:void(0);" class="iconfont icon-gt"></a></li>',page:'<li class="page"><a href="javascript:void(0);"> {{page}} / {{totalPages}} </a></li>',onPageChange:function(s,a){"next"==a?($("#page_m").find(".next").click(),$("#page").val(s),$(".list_lt .divShadows").show(),sortPage()):"prev"==a&&($("#page_m").find(".prev").click(),$("#page").val(s),$(".list_lt .divShadows").show(),sortPage())}}),$("#page_m").jqPaginator({totalCounts:pageSum,pageSize:16,visiblePages:5,first:'<li class="first"><a href="javascript:void(0);">首页</a></li>',prev:'<li class="prev"><a href="javascript:void(0);">上一页</a></li>',next:'<li class="next"><a href="javascript:void(0);">下一页</a></li>',last:'<li class="last"><a href="javascript:void(0);">尾页</a></li>',page:'<li class="page"><a href="javascript:void(0);">{{page}}</a></li>',onPageChange:function(s,a){$("#page_s").jqPaginator("option",{currentPage:s}),$("#page").val(s),"init"==a||($(".list_lb .divShadows").show(),sortPage())}})):($("#page_s").jqPaginator({totalPages:1,pageSize:1}),$("#page_m").jqPaginator({totalPages:1,pageSize:1}),$("#page_s").jqPaginator("destroy"),$("#page_m").jqPaginator("destroy")),$(".loadings").hide()}}function getPage_fn(s){var a="";$.each(s.courseList,function(s,e){if(e.introduce.length>32)i=e.introduce.substring(0,32)+"...";else var i=e.introduce;if(null!==e.coursewareMinUrl&&"null"!==e.coursewareMinUrl&&void 0!==e.coursewareMinUrl&&"undefined"!==e.coursewareMinUrl)o=e.coursewareMinUrl;else var o=e.coursewareurl;s>0&&(s+1)%4==0?(e.money>0?a+='<ul style="margin-right:0px;" id="'+e.coursewareId+'" sftype="1" buyFlag="'+e.buyFlag+'"><li><img src="'+o+version+'" alt=""><div class="con"><h3 class="study-hd"><a href="javascript:;" target="_blank">'+e.coursewarename+'</a></h3><p class="study_sort">'+e.enClassifyName+'<span class="fr"><i class="iconfont icon-yanjing"></i><i>'+e.coursewarepv+'</i></span></p><div class="study_lesson">课程简介：'+i+'</div><p class="study_show"><span class="fee">￥<i>'+e.money+"</i></span>":a+='<ul style="margin-right:0px;" id="'+e.coursewareId+'" sftype="2" buyFlag="'+e.buyFlag+'"><li><img src="'+o+version+'" alt=""><div class="con"><h3 class="study-hd"><a href="javascript:;" target="_blank">'+e.coursewarename+'</a></h3><p class="study_sort">'+e.enClassifyName+'<span class="fr"><i class="iconfont icon-yanjing"></i><i>'+e.coursewarepv+'</i></span></p><div class="study_lesson">课程简介：'+i+'</div><p class="study_show"><span class="nfee">免费</span>',a+='<span class="fr"><i class="iconfont icon-xing"></i><i>评分</i><em>'+e.coursewarescore+"</em></span></p></div></li></ul>"):(e.money>0?a+='<ul id="'+e.coursewareId+'" sftype="1" buyFlag="'+e.buyFlag+'"><li><img src="'+o+version+'" alt=""><div class="con"><h3 class="study-hd"><a href="javascript:;" target="_blank">'+e.coursewarename+'</a></h3><p class="study_sort">'+e.enClassifyName+'<span class="fr"><i class="iconfont icon-yanjing"></i><i>'+e.coursewarepv+'</i></span></p><div class="study_lesson">课程简介：'+i+'</div><p class="study_show"><span class="fee">￥<i>'+e.money+"</i></span>":a+='<ul id="'+e.coursewareId+'" sftype="2" buyFlag="'+e.buyFlag+'"><li><img src="'+o+version+'" alt=""><div class="con"><h3 class="study-hd"><a href="javascript:;" target="_blank">'+e.coursewarename+'</a></h3><p class="study_sort">'+e.enClassifyName+'<span class="fr"><i class="iconfont icon-yanjing"></i><i>'+e.coursewarepv+'</i></span></p><div class="study_lesson">课程简介：'+i+'</div><p class="study_show"><span class="nfee">免费</span>',a+='<span class="fr"><i class="iconfont icon-xing"></i><i>评分</i><em>'+e.coursewarescore+"</em></span></p></div></li></ul>")}),$("#sortList").html(a),$("#sortList ul").on("click",function(){var s=$(this).prop("id"),a=$(this).attr("sftype"),e=$(this).attr("buyFlag");"1"==a?"1"==e?window.open("lessoninfo.html?id="+s,"_blank"):window.open("lessonInfo_fee.html?id="+s,"_blank"):"2"==a&&window.open("lessoninfo.html?id="+s,"_blank")}),$("#countRows").text(s.countRows),$(".list_lt .divShadows").hide(),$(".list_lb .divShadows").hide()}$(document).attr("title","平台课程_人人创培训监管服务平台"),searH();var version=getVersion();$("#tabB li").eq(1).addClass("active"),$("#tabB li").eq(1).siblings("li").removeClass("active"),$(".serchBox").hide(),pdLogin(),$("input").placeholder();var com_obj=new Object;commonParm(com_obj),null!==getSearch("type")?($(".course_line .course-nav-item").eq(getSearch("type")).addClass("on").siblings(".course_line .course-nav-item").removeClass("on"),$("#code").val(""),$("#keywords").val(""),$("#sortFlag").val(getSearch("type")),$("#feeFlag").val("")):null!==getSearch("keywords")?$("#keywords").val(decodeURI(getSearch("keywords"))):null!==getSearch("pcode")&&null==getSearch("code")?$("#code").val(getSearch("pcode")):null!==getSearch("pcode")&&null!==getSearch("code")?$("#code").val(getSearch("code")):null!==getSearch("ftype")?($(".course_year .course-nav-item").eq(getSearch("ftype")).addClass("on").siblings(".course_year .course-nav-item").removeClass("on"),$("#code").val(""),$("#keywords").val(""),$("#sortFlag").val(),$("#feeFlag").val(getSearch("ftype"))):null==getSearch("type")&&null==getSearch("pcode")&&null==getSearch("code")&&null==getSearch("keywords")&&($("#code").val(""),$("#keywords").val(""),$("#sortFlag").val(""),$("#feeFlag").val(""));var mainAort;jsonAjax(InterFace.getSort,com_obj,get_mainAort),$(document).on("click",".course-nav",function(){$("#page").val("1");var s=$(this),a=$(this).attr("code");$("#code").val(a),0==$(this).hasClass("all")?($(".list_cont").show(),$("#shangQuancontain").empty(),$.each(mainAort,function(s,e){if(a==e.classifyidcode){var i="<li class='course-nav-item course-sub active' code='"+e.classifyidcode+"'><a>全部</a></li>";$.each(e.childList,function(s,a){i+="<li class='course-nav-item course-sub' code='"+a.classifyidcode+"'><a>"+a.classifyname+"</a></li>"}),$("#shangQuancontain").append(i)}})):($(".list_cont").hide(),$("#shangQuancontain").empty()),searH(),sortContain(),setTimeout(function(){s.addClass("on").siblings(".course-nav-item").removeClass("on")},200)}),$(document).on("click",".course-sub",function(){$("#page").val("1");var s=$(this),a=$(this).attr("code");$("#code").val(a),searH(),sortContain(),setTimeout(function(){s.addClass("active").siblings(".course-sub").removeClass("active")},500)}),$(".course_line li").on("click",function(){var s=$(this),a=$(this).attr("type");$("#sortFlag").val(a),$("#page").val("1"),searH(),sortContain(),setTimeout(function(){s.addClass("on").siblings(".course_line .course-nav-item").removeClass("on")},500)}),$("#serch").on("click",function(){$("#page").val("1"),searH(),sortContain()});var pageSum,curPage;sortContain(),$(".course_year li").on("click",function(){var s=$(this),a=$(this).attr("feeType");$("#feeFlag").val(a),$("#page").val("1"),searH(),sortContain(),setTimeout(function(){s.addClass("on").siblings(".course_year .course-nav-item").removeClass("on")},500)});