!function e(t,r,i){function o(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(n)return n(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,r,i)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,r){!function(e,i){"object"==typeof r?t.exports=r=i():"function"==typeof define&&define.amd?define([],i):e.CryptoJS=i()}(this,function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),i={},o=i.lib={},n=o.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(a=0;a<o;a++){var n=r[a>>>2]>>>24-a%4*8&255;t[i+a>>>2]|=n<<24-(i+a)%4*8}else for(var a=0;a<o;a+=4)t[i+a>>>2]=r[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,i=[],o=0;o<t;o+=4){var n=function(t){var t=t,r=987654321,i=4294967295;return function(){var o=((r=36969*(65535&r)+(r>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}}(4294967296*(r||e.random()));r=987654071*n(),i.push(4294967296*n()|0)}return new a.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],o=0;o<r;o++){var n=t[o>>>2]>>>24-o%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new a.init(r,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],o=0;o<r;o++){var n=t[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(n))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new a.init(r,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,i=r.words,o=r.sigBytes,n=this.blockSize,s=o/(4*n),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*n,u=e.min(4*l,o);if(l){for(var c=0;c<l;c+=n)this._doProcessBlock(i,c);var p=i.splice(0,l);r.sigBytes-=u}return new a.init(p,u)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(o.Hasher=p.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new d.HMAC.init(e,r).finalize(t)}}}),i.algo={});return i}(Math);return e})},{}],2:[function(e,t,r){!function(i,o){"object"==typeof r?t.exports=r=o(e("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(){function t(e,t,r){for(var o=[],n=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2,l=r[e.charCodeAt(a)]>>>6-a%4*2;o[n>>>2]|=(s|l)<<24-n%4*8,n++}return i.create(o,n)}var r=e,i=r.lib.WordArray;r.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp();for(var o=[],n=0;n<r;n+=3)for(var a=t[n>>>2]>>>24-n%4*8&255,s=t[n+1>>>2]>>>24-(n+1)%4*8&255,l=t[n+2>>>2]>>>24-(n+2)%4*8&255,u=a<<16|s<<8|l,c=0;c<4&&n+.75*c<r;c++)o.push(i.charAt(u>>>6*(3-c)&63));var p=i.charAt(64);if(p)for(;o.length%4;)o.push(p);return o.join("")},parse:function(e){var r=e.length,i=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var n=0;n<i.length;n++)o[i.charCodeAt(n)]=n}var a=i.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(r=s)}return t(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},{"./core":1}],3:[function(e,t,r){!function(i,o){"object"==typeof r?t.exports=r=o(e("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(i.CryptoJS)}(this,function(e){return e.enc.Utf8})},{"./core":1}],4:[function(e,t,r){!function(i,o,n){"object"==typeof r?t.exports=r=o(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],o):o(i.CryptoJS)}(this,function(e){return e.HmacSHA1})},{"./core":1,"./hmac":5,"./sha1":6}],5:[function(e,t,r){!function(i,o){"object"==typeof r?t.exports=r=o(e("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(i.CryptoJS)}(this,function(e){!function(){var t=e,r=t.lib.Base,i=t.enc.Utf8;t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,o=4*r;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),a=this._iKey=t.clone(),s=n.words,l=a.words,u=0;u<r;u++)s[u]^=1549556828,l[u]^=909522486;n.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}()})},{"./core":1}],6:[function(e,t,r){!function(i,o){"object"==typeof r?t.exports=r=o(e("./core")):"function"==typeof define&&define.amd?define(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,i=r.WordArray,o=r.Hasher,n=[],a=t.algo.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],u=0;u<80;u++){if(u<16)n[u]=0|e[t+u];else{var c=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=c<<1|c>>>31}var p=(i<<5|i>>>27)+l+n[u];p+=u<20?1518500249+(o&a|~o&s):u<40?1859775393+(o^a^s):u<60?(o&a|o&s|a&s)-1894007588:(o^a^s)-899497514,l=s,s=a,a=o<<30|o>>>2,o=i,i=p}r[0]=r[0]+i|0,r[1]=r[1]+o|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=o._createHelper(a),t.HmacSHA1=o._createHmacHelper(a)}(),e.SHA1})},{"./core":1}],7:[function(e,t,r){var i=e("../ui/component"),o=(e("../lib/util"),e("../lib/dom")),n=e("../lib/event"),a=(e("../lib/ua"),e("../lang/index")),s=e("../player/base/event/eventtype"),l=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className?t.className:"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+a.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+a.get("Cancel_Text")+"</a></div>",e},bindEvent:function(){var e=this;e._player.on(s.Private.AutoStreamShow,function(t){var r=document.querySelector("#"+e.getId()+" .tip-text");if(e._player._getLowerQualityLevel){var i=e._player._getLowerQualityLevel();i&&(e._switchUrl=i,r.innerText=a.get("Auto_Stream_Tip_Text").replace("$$",i.item.desc),o.css(e.el(),"display","block"))}}),e._player.on(s.Private.AutoStreamHide,function(t){document.querySelector("#"+e.getId()+" .tip-text"),o.css(e.el(),"display","none")});var t=document.querySelector("#"+e.getId()+" .prism-button-ok");n.on(t,"click",function(){e._player._changeStream&&e._switchUrl&&e._player._changeStream(e._switchUrl.index),o.css(e.el(),"display","none")});var r=document.querySelector("#"+e.getId()+" .prism-button-cancel");n.on(r,"click",function(){o.css(e.el(),"display","none")})}});t.exports=l},{"../lang/index":14,"../lib/dom":20,"../lib/event":21,"../lib/ua":29,"../lib/util":31,"../player/base/event/eventtype":36,"../ui/component":76}],8:[function(e,t,r){t.exports={domain:"g.alicdn.com",flashVersion:"2.4.0",h5Version:"2.4.0",logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track"}},{}],9:[function(e,t,r){e("./lang/index").load();var i=e("./player/adaptivePlayer"),o=function(e,t){return i.create(e,t)};e("./lib/componentutil").register(o);var n=window.Aliplayer=o;o.players={},"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&"object"==typeof t&&(t.exports=n)},{"./lang/index":14,"./lib/componentutil":16,"./player/adaptivePlayer":33}],10:[function(e,t,r){var i=e("../lib/oo"),o=e("../lang/index"),n=i.extend({init:function(e,t){this._player=e,this._options=e.options()}});n.prototype.handle=function(e){if(this._options.autoPlayDelay){var t=this._options.autoPlayDelayDisplayText;t||(t=o.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay)),this._player.trigger("info_show",t),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide");var r=this;this._timeHandler=setTimeout(function(){r._player.trigger("info_hide"),r._options.autoPlayDelay=0,e&&e()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){a(r)}),this._player.on("pause",function(){a(r)})}};var a=function(e){e._timeHandler&&(clearTimeout(e._timeHandler),e._timeHandler=null)};t.exports=n},{"../lang/index":14,"../lib/oo":26}],11:[function(e,t,r){t.exports=t.exports={Quality_OD_Text:"OD",Quality_FD_Text:"360p",Quality_LD_Text:"540p",Quality_SD_Text:"720p",Quality_HD_Text:"1080p",Quality_2K_Text:"2K",Quality_4K_Text:"4K",FHD:"FHD",XLD:"XLD",Speed_1X_Text:"1X",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Snapshot:"Snapshot",Detection_Text:"Diagnosis",Play_DateTime:"Time",Quality_Change_Fail_Switch_Text:"Cannot play, switch to",Quality_Change_Text:"Switch to",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_Server_Network_NotSupport_Text:"Network error or  the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:"Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format of video is not supported by h5 player，please use flash player",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4 is not supported by this explorer",Error_Not_Support_encrypt_Text:"The encrypted video is not supported by h5 player",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls，please close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed",Error_Load_M3U8_Timeout_Text:"Timeout error occored when the m3u8 file loaded",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Waiting_Timeout_Text:"Buffering timeout, please close or refresh",Error_Invalidate_Source:"Invalid source",Error_Fetch_NotStream:"The vid has no stream to play",Error_Not_Found:"Url is not found",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$"}},{}],12:[function(e,t,r){t.exports=t.exports={OD:"OD",LD:"360p",FD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",Forbidden_Text:"Internal information is strictly forbidden to outsider",Refresh:"Refresh",Diagnosis:"Diagnosis",Live_Finished:"Live has finished, thanks for watching",Play:"Play",Pause:"Pause",Snapshot:"Snapshot",Replay:"Replay",Live:"Live",Encrypt:"Encrypt",Sound:"Sound",Fullscreen:"Full Screen",Exist_Fullscreen:"Exit Full-screen",Resolution:"Resolution",Next:"Next Video",Brightness:"Brightness",Default:"Default",Contrast:"Contrast",Titles_Credits:"Titles and Credits",Skip_Titles:"Skip Titles",Skip_Credits:"Skip Credits",Not_Support_Out_Site:"The video is not supported for outside website, please watch it by TaoTV",Watch_Now:"Watch now",Network_Error:"Network is unreachable, please try to refresh",Video_Error:"Playing a video error, please try to refresh",Decode_Error:"Data decoding error",Live_Not_Start:"Live has not started, to be expected",Live_Loading:"Live information is loading, please try to refresh",Live_End:"Live has finished",Live_Abrot:"Signal aborted, please try to refresh",Corss_Domain_Error:"Please ensure your domain has obtained IPC license and combined CNAME, \r\n or to set  cross-domain accessing available",Url_Timeout_Error:"The video url is timeout, please try to refresh",Connetction_Error:"Sorry，the video cannot play because of connection error, please try to watch other videos",Fetch_MTS_Error:"Fetching video list failed, please ensure",Token_Expired_Error:"Requesting open api failed, please ensure token expired or not",Video_Lists_Empty_Error:"The video list is empty, please check the format of video",Encrypted_Failed_Error:"Fetching encrypted file failed, please check the permission of player",Fetch_Failed_Permission_Error:"Fetching video list failed, please check the permission of player",Invalidate_Param_Error:"No video url, please check the parameters",AutoPlayDelayDisplayText:"Play in $$ seconds",Fetch_MTS_NOT_NotStream_Error:"The vid has no stream to play",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$"}},{}],13:[function(e,t,r){t.exports=t.exports={OD:"原画",FD:"流畅",LD:"标清",SD:"高清",HD:"超清","2K":"2K","4K":"4K",FHD:"全高清",XLD:"极速",Forbidden_Text:"内部信息，严禁外传",Refresh:"刷新",Diagnosis:"诊断",Live_Finished:"直播已结束,谢谢观看",Play:"播放",Pause:"暂停",Snapshot:"截图",Replay:"重播",Live:"直播",Encrypt:"加密",Sound:"声音",Fullscreen:"全屏",Exist_Fullscreen:"退出全屏",Resolution:"清晰度",Next:"下一集",Brightness:"亮度",Default:"默认",Contrast:"对比度",Titles_Credits:"片头片尾",Skip_Titles:"跳过片头",Skip_Credits:"跳过片尾",Not_Support_Out_Site:"该视频暂不支持站外播放，请到淘TV观看",Watch_Now:"立即观看",Network_Error:"网络无法连接，请尝试检查网络后刷新试试",Video_Error:"视频播放异常，请刷新试试",Decode_Error:"播放数据解码错误",Live_Not_Start:"亲，直播还未开始哦，敬请期待",Live_Loading:"直播信息加载中，请刷新试试",Live_End:"亲，直播已结束",Live_Abrot:"当前直播信号中断，请刷新后重试",Corss_Domain_Error:"请确认您的域名已完成备案和CNAME绑定，\r\n并处于启用状态，或资源允许跨越访问",Url_Timeout_Error:"您所观看的视频地址连接超时，请刷新后重试",Connetction_Error:"抱歉,该视频由于连接错误暂时不能播放,请观看其它视频",Fetch_MTS_Error:"获取视频列表失败，请确认",Token_Expired_Error:"请求接口失败，请确认Token是否过期",Video_Lists_Empty_Error:"获取视频列表为空，请确认播放数据与格式",Encrypted_Failed_Error:"获取视频加密秘钥错误，请确认播放权限",Fetch_Failed_Permission_Error:"获取视频列表失败，请确认播放权限",Invalidate_Param_Error:"无输入视频，请确认输入参数",AutoPlayDelayDisplayText:"$$秒以后开始播放",Fetch_MTS_NOT_NotStream_Error:"此vid没有可播放视频",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$"}},{}],14:[function(e,t,r){var i=e("../config"),o=e("../lib/storage"),n=(e("../lib/io"),"aliplayer_lang_data"),a="aliplayer_lang",s=function(){return void 0!==window[a]&&window[a]||(window[a]=(navigator.language||navigator.browserLanguage).toLowerCase()),window[a]},l=function(t){var r=p(t),i=o.get(r);if(i)u(t,JSON.parse(i));else{var n="",a=c();n=e("flash"==t?"en-us"==a?"./flash/en-us":"./flash/zh-cn":"en-us"==a?"./en-us":"./zh-cn"),o.set(r,JSON.stringify(n)),u(t,n)}},u=function(e,t){var r=p(e);window[r]=t},c=function(){var e=s();return"en-us"!=e&&"zh-cn"!=e&&(e="en-us"),e},p=function(e){var t=c();return e||(e="h5"),n+"_"+e+"_"+i.h5Version.replace(/\./g,"_")+"_"+t};t.exports.setCurrentLanguage=function(t,r){var i=window[a];if(void 0!==t&&t||(t=s()),"en-us"!=t&&"zh-cn"!=t)throw new Error('please set language property to be "en-us" or "zh-cn"');window[a]=t,l(r),t!=i&&e("../lib/constants").updateByLanguage()},t.exports.getCurrentLanguage=s,t.exports.getLanguageData=function(e,t){var r=p(e);return window[r]},t.exports.load=l,t.exports.get=function(e,t){t||(t="h5");var r=p(t),i=window[r];if(i)return i[e]}},{"../config":8,"../lib/constants":17,"../lib/io":23,"../lib/storage":28,"./en-us":11,"./flash/en-us":12,"./flash/zh-cn":13,"./zh-cn":15}],15:[function(e,t,r){t.exports=t.exports={Quality_OD_Text:"原画",Quality_FD_Text:"流畅",Quality_LD_Text:"标清",Quality_SD_Text:"高清",Quality_HD_Text:"超清",Quality_2K_Text:"2K",Quality_4K_Text:"4K",FHD:"全高清",XLD:"极速",Speed_1X_Text:"1倍速",Speed_125X_Text:"1.25倍速",Speed_15X_Text:"1.5倍速",Speed_2X_Text:"2倍速",Quality_Change_Fail_Switch_Text:"不能播放，切换为",Quality_Change_Text:"切换为",Quality_The_Url:"此地址",Refresh_Text:"刷新",Detection_Text:"诊断",Cancel:"取消",Mute:"静音",Snapshot:"截图",Play_DateTime:"播放时间",AutoPlayDelayDisplayText:"$$秒以后开始播放",Error_Load_Abort_Text:"获取数据过程被中止",Error_Network_Text:"网络错误加载数据失败",Error_Decode_Text:"解码错误",Error_Server_Network_NotSupport_Text:"服务器、网络错误或格式不支持",Error_Offline_Text:"网络不可用，请确定",Error_Play_Text:"播放出错啦",Error_Retry_Text:"请尝试退出重试或刷新",Error_AuthKey_Text:"可能鉴权过期、域名不在白名单或请求被拦截",Error_H5_Not_Support_Text:"h5不支持此格式，请使用flash播放器",Error_Not_Support_M3U8_Text:"浏览器不支持m3u8视频播放",Error_Not_Support_MP4_Text:"浏览器不支持mp4视频播放",Error_Not_Support_encrypt_Text:"h5不支持加密视频的播放",Error_Vod_URL_Is_Empty_Text:"获取播放地址为空",Error_Vod_Fetch_Urls_Text:"获取地址出错啦，请尝试退出重试或刷新",Error_Playauth_Decode_Text:"playauth解析错误",Error_Vid_Not_Same_Text:"不能更新地址，vid和播放中的不一致",Error_Playauth_Expired_Text:"playauth已过期，请尝试退出重试或刷新",Error_MTS_Fetch_Urls_Text:"MST获取取数失败",Error_Load_M3U8_Failed_Text:"获取m3u8文件失败",Error_Load_M3U8_Timeout_Text:"获取m3u8文件超时",Error_M3U8_Decode_Text:"获取m3u8文件解析失败",Error_TX_Decode_Text:"解析数据出错",Error_Waiting_Timeout_Text:"缓冲数据超时，请尝试退出重试或刷新",Error_Invalidate_Source:"无效地址",Error_Fetch_NotStream:"此vid没有可播放视频",Error_Not_Found:"播放地址不存在",Live_End:"亲，直播已结束",Play_Before_Fullscreen:"播放后再全屏",Can_Not_Seekable:"不能seek到这里",Cancel_Text:"取消",OK_Text:"确认",Auto_Stream_Tip_Text:"网络不给力，是否切换到$$"}},{}],16:[function(e,t,r){var i=e("./oo"),o=e("../player/base/event/eventtype");t.exports.stopPropagation=function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation()},t.exports.register=function(e){e.util={stopPropagation:t.exports.stopPropagation},e.Component=i.extend,e.EventType=o.Player}},{"../player/base/event/eventtype":36,"./oo":26}],17:[function(e,t,r){var i=e("../lang/index");t.exports.LOAD_START="loadstart",t.exports.LOADED_METADATA="loadedmetadata",t.exports.LOADED_DATA="loadeddata",t.exports.PROGRESS="progress",t.exports.CAN_PLAY="canplay",t.exports.CAN_PLYA_THROUGH="canplaythrough",t.exports.PLAY="play",t.exports.PAUSE="pause",t.exports.ENDED="ended",t.exports.PLAYING="playing",t.exports.WAITING="waiting",t.exports.ERROR="error",t.exports.SUSPEND="suspend",t.exports.STALLED="stalled",t.exports.AuthKeyExpiredEvent="authkeyexpired",t.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,CrossDomain:4027,OtherError:4400,ServerAPIError:4500},t.exports.AuthKeyExpired=7200,t.exports.AuthKeyRefreshExpired=7e3,t.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},t.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},t.exports.SelectedStreamLevel="selectedStreamLevel",t.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"};var o=function(){t.exports.VideoErrorCodeText={1:i.get("Error_Load_Abort_Text"),2:i.get("Error_Network_Text"),3:i.get("Error_Decode_Text"),4:i.get("Error_Server_Network_NotSupport_Text")},t.exports.VideoLevels={0:i.get("Quality_OD_Text"),640:i.get("Quality_FD_Text"),960:i.get("Quality_LD_Text"),1280:i.get("Quality_SD_Text"),1920:i.get("Quality_HD_Text"),2580:i.get("Quality_2K_Text"),3840:i.get("Quality_4K_Text")},t.exports.QualityLevels={OD:i.get("Quality_OD_Text"),LD:i.get("Quality_LD_Text"),FD:i.get("Quality_FD_Text"),SD:i.get("Quality_SD_Text"),HD:i.get("Quality_HD_Text"),"2K":i.get("Quality_2K_Text"),"4K":i.get("Quality_4K_Text"),XLD:i.get("XLD"),FHD:i.get("FHD")},t.exports.SpeedLevels=[{key:1,text:i.get("Speed_1X_Text")},{key:1.25,text:i.get("Speed_125X_Text")},{key:1.5,text:i.get("Speed_15X_Text")},{key:2,text:i.get("Speed_2X_Text")}]};o(),t.exports.updateByLanguage=o},{"../lang/index":14}],18:[function(e,t,r){t.exports.get=function(e){for(var t=e+"",r=document.cookie.split(";"),i=0;i<r.length;i++){var o=r[i].trim();if(0==o.indexOf(t))return unescape(o.substring(t.length+1,o.length))}return""},t.exports.set=function(e,t,r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3);var o="expires="+i.toGMTString();document.cookie=e+"="+escape(t)+"; "+o}},{}],19:[function(e,t,r){var i=e("./object");t.exports.cache={},t.exports.guid=function(e,t){var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||i.length,e)for(r=0;r<e;r++)o[r]=i[0|Math.random()*t];else{var n;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(n=0|16*Math.random(),o[r]=i[19==r?3&n|8:n])}return o.join("")},t.exports.expando="vdata"+(new Date).getTime(),t.exports.getData=function(e){var r=e[t.exports.expando];return r||(r=e[t.exports.expando]=t.exports.guid(),t.exports.cache[r]={}),t.exports.cache[r]},t.exports.hasData=function(e){var r=e[t.exports.expando];return!(!r||i.isEmpty(t.exports.cache[r]))},t.exports.removeData=function(e){var r=e[t.exports.expando];if(r){delete t.exports.cache[r];try{delete e[t.exports.expando]}catch(r){e.removeAttribute?e.removeAttribute(t.exports.expando):e[t.exports.expando]=null}}}},{"./object":25}],20:[function(e,t,r){var i=e("./object");t.exports.el=function(e){return document.getElementById(e)},t.exports.createEl=function(e,t){var r;return e=e||"div",t=t||{},r=document.createElement(e),i.each(t,function(e,t){-1!==e.indexOf("aria-")||"role"==e?r.setAttribute(e,t):r[e]=t}),r},t.exports.addClass=function(e,t){-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)},t.exports.removeClass=function(e,t){var r,i;if(-1!=e.className.indexOf(t)){for(i=(r=e.className.split(" ")).length-1;i>=0;i--)r[i]===t&&r.splice(i,1);e.className=r.join(" ")}},t.exports.getElementAttributes=function(e){var t,r,i,o,n;if(t={},r=",autoplay,controls,loop,muted,default,",e&&e.attributes&&e.attributes.length>0)for(var a=(i=e.attributes).length-1;a>=0;a--)o=i[a].name,n=i[a].value,"boolean"!=typeof e[o]&&-1===r.indexOf(","+o+",")||(n=null!==n),t[o]=n;return t},t.exports.insertFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},t.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},t.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},t.exports.css=function(e,t,r){return!(!e||!e.style)&&(t&&r?(e.style[t]=r,!0):r||"string"!=typeof t?!r&&"object"==typeof t&&(i.each(t,function(t,r){e.style[t]=r}),!0):e.style[t])}},{"./object":25}],21:[function(e,t,r){function i(e,t,r,i){o.each(r,function(r){e(t,r,i)})}var o=e("./object"),n=e("./data");t.exports.on=function(e,r,a){if(o.isArray(r))return i(t.exports.on,e,r,a);var s=n.getData(e);s.handlers||(s.handlers={}),s.handlers[r]||(s.handlers[r]=[]),a.guid||(a.guid=n.guid()),s.handlers[r].push(a),s.dispatcher||(s.disabled=!1,s.dispatcher=function(r){if(!s.disabled){r=t.exports.fixEvent(r);var i=s.handlers[r.type];if(i)for(var o=i.slice(0),n=0,a=o.length;n<a&&!r.isImmediatePropagationStopped();n++)o[n].call(e,r)}}),1==s.handlers[r].length&&(e.addEventListener?e.addEventListener(r,s.dispatcher,!1):e.attachEvent&&e.attachEvent("on"+r,s.dispatcher))},t.exports.off=function(e,r,a){if(n.hasData(e)){var s=n.getData(e);if(s.handlers){if(o.isArray(r))return i(t.exports.off,e,r,a);var l=function(r){s.handlers[r]=[],t.exports.cleanUpEvents(e,r)};if(r){var u=s.handlers[r];if(u){if(!a)return void l(r);if(a.guid)for(var c=0;c<u.length;c++)u[c].guid===a.guid&&u.splice(c--,1);t.exports.cleanUpEvents(e,r)}}else for(var p in s.handlers)l(p)}}},t.exports.cleanUpEvents=function(e,t){var r=n.getData(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),o.isEmpty(r.handlers)&&(delete r.handlers,delete r.dispatcher,delete r.disabled),o.isEmpty(r)&&n.removeData(e)},t.exports.fixEvent=function(e){function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped){var i=e||window.event;e={};for(var o in i)"layerX"!==o&&"layerY"!==o&&"keyboardEvent.keyLocation"!==o&&("returnValue"==o&&i.preventDefault||(e[o]=i[o]));if(e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,e.isDefaultPrevented=t,e.defaultPrevented=!0},e.isDefaultPrevented=r,e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=r,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=r,null!=e.clientX){var n=document.documentElement,a=document.body;e.pageX=e.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},t.exports.trigger=function(e,r){var i=n.hasData(e)?n.getData(e):{},o=e.parentNode||e.ownerDocument;if("string"==typeof r){var a=null;e.paramData&&(a=e.paramData,e.paramData=null,e.removeAttribute(a)),r={type:r,target:e,paramData:a}}if(r=t.exports.fixEvent(r),i.dispatcher&&i.dispatcher.call(e,r),o&&!r.isPropagationStopped()&&!1!==r.bubbles)t.exports.trigger(o,r);else if(!o&&!r.defaultPrevented){var s=n.getData(r.target);r.target[r.type]&&(s.disabled=!0,"function"==typeof r.target[r.type]&&r.target[r.type](),s.disabled=!1)}return!r.defaultPrevented},t.exports.one=function(e,r,a){if(o.isArray(r))return i(t.exports.one,e,r,a);var s=function(){t.exports.off(e,r,s),a.apply(this,arguments)};s.guid=a.guid=a.guid||n.guid(),t.exports.on(e,r,s)}},{"./data":19,"./object":25}],22:[function(e,t,r){var i=e("./data");t.exports.bind=function(e,t,r){t.guid||(t.guid=i.guid());var o=function(){return t.apply(e,arguments)};return o.guid=r?r+"_"+t.guid:t.guid,o}},{"./data":19}],23:[function(e,t,r){var i=e("./url");t.exports.get=function(e,t,r,o,n){var a,s,l,u;r=r||function(){},"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),s=new XMLHttpRequest,l=i.parseUrl(e),u=window.location,l.protocol+l.host===u.protocol+u.host||!window.XDomainRequest||"withCredentials"in s?(a="file:"==l.protocol||"file:"==u.protocol,s.onreadystatechange=function(){4===s.readyState&&(200===s.status||a&&0===s.status?t(s.responseText):r(s.responseText))}):(s=new window.XDomainRequest,s.onload=function(){t(s.responseText)},s.onerror=r,s.onprogress=function(){},s.ontimeout=r);try{void 0===o&&(o=!0),s.open("GET",e,o),n&&(s.withCredentials=!0)}catch(e){return void r(e)}try{s.send()}catch(e){r(e)}},t.exports.jsonp=function(e,t,r){var i="jsonp_callback_"+Math.round(1e5*Math.random()),o=document.createElement("script");e&&(o.src=e+(e.indexOf("?")>=0?"&":"?")+"callback="+i+"&cb="+i,o.onerror=function(){delete window[i],document.body.removeChild(o),r()},o.onload=function(){setTimeout(function(){window[i]&&(delete window[i],document.body.removeChild(o))},0)},window[i]=function(e){delete window[i],document.body.removeChild(o),t(e)},document.body.appendChild(o))},t.exports.loadJS=function(e,t){var r=document.getElementsByTagName("HEAD").item(0),i=document.createElement("script");i.type="text/javascript",i.src=e,i.onload=function(){t&&t()},r.appendChild(i)}},{"./url":30}],24:[function(e,t,r){var i=e("./dom");t.exports.render=function(e,t){var r=t.align?t.align:"tl",o=t.x?t.x:0,n=t.y?t.y:0;"tl"===r?i.css(e,{float:"left","margin-left":o+"px","margin-top":n+"px"}):"tr"===r?i.css(e,{float:"right","margin-right":o+"px","margin-top":n+"px"}):"tlabs"===r?i.css(e,{position:"absolute",left:o+"px",top:n+"px"}):"trabs"===r?i.css(e,{position:"absolute",right:o+"px",top:n+"px"}):"blabs"===r?i.css(e,{position:"absolute",left:o+"px",bottom:n+"px"}):"brabs"===r?i.css(e,{position:"absolute",right:o+"px",bottom:n+"px"}):"cc"===r&&i.css(e,{position:"absolute",left:"50%",top:"50%","margin-top":e.offsetHeight/-2+"px","margin-left":e.offsetWidth/-2+"px"})}},{"./dom":20}],25:[function(e,t,r){var i=Object.prototype.hasOwnProperty;t.exports.create=Object.create||function(e){function t(){}return t.prototype=e,new t},t.exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(arg)},t.exports.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0},t.exports.each=function(e,r,o){if(t.exports.isArray(e))for(var n=0,a=e.length;n<a&&!1!==r.call(o||this,e[n],n);++n);else for(var s in e)if(i.call(e,s)&&!1===r.call(o||this,s,e[s]))break;return e},t.exports.merge=function(e,t){if(!t)return e;for(var r in t)i.call(t,r)&&(e[r]=t[r]);return e},t.exports.deepMerge=function(e,r){var o,n,a;e=t.exports.copy(e);for(o in r)i.call(r,o)&&(n=e[o],a=r[o],t.exports.isPlain(n)&&t.exports.isPlain(a)?e[o]=t.exports.deepMerge(n,a):e[o]=r[o]);return e},t.exports.copy=function(e){return t.exports.merge({},e)},t.exports.isPlain=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},t.exports.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.exports.unescape=function(e){return e.replace(/&([^;]+);/g,function(e,t){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[t.toLowerCase()]||e})}},{}],26:[function(e,t,r){var i=e("./object"),o=function(){};(o=function(){}).extend=function(e){var t,r;t=(e=e||{}).init||e.init||this.prototype.init||this.prototype.init||function(){},((r=function(){t.apply(this,arguments)}).prototype=i.create(this.prototype)).constructor=r,r.extend=o.extend,r.create=o.create;for(var n in e)e.hasOwnProperty(n)&&(r.prototype[n]=e[n]);return r},o.create=function(){var e=i.create(this.prototype);return this.apply(e,arguments),e},t.exports=o},{"./object":25}],27:[function(e,t,r){var i=e("./object"),o=e("../config"),n=e("./dom"),a=e("./ua"),s=e("../player/base/plugin/defaultemptycomponent"),l={preload:!1,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,isLive:!1,playsinline:!1,showBarTime:5e3,rePlay:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,format:"mp4",loadDataTimeout:20,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"h5",x5_fullscreen:!1,x5_orientation:"portraint",autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,language:"zh-cn",mediaType:"video",components:[],snapshotWatermark:{left:"500",top:"100",text:"",font:"16px 宋体",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},enableStashBufferForFlv:!0,stashInitialSizeForFlv:32,skinRes:"//"+o.domain+"/de/prismplayer-flash/"+o.flashVersion+"/atlas/defaultSkin"};t.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:20,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"speedButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:20,y:25}]}],t.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"volume",align:"tr",x:20,y:25}]}],t.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}],t.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""},t.exports.canPlayHls=function(){return""!=t.exports.canPlayType("application/x-mpegURL")},t.exports.isSafariUsedHlsPlugin=function(e){return!!(a.os.pc&&a.browser.safari&&e&&"11.0"!=a.browser.version)},t.exports.hasUIComponent=function(e,r){if(void 0===e||!e||0==e.length)return!1;var i=0,o=e.length;for(i;i<o;i++){var n=e[i].name;if(n==r)return!0;if("controlBar"==n)return t.exports.hasUIComponent(e[i].children,r)}return!1},t.exports.validateSource=function(e){return!e||!!new RegExp(".m3u8|.mp4|.mp3|.flv|rtmp","i").test(e)},t.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType},t.exports.createWrapper=function(e){var r,i=e.id;if("string"==typeof i?(0===i.indexOf("#")&&(i=i.slice(1)),r=n.el(i)):r=i,!r||!r.nodeName)throw new TypeError("没有为播放器指定容器");return t.exports.adjustContainerLayout(r,e),r},t.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)},t.exports.isSupportHls=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return r&&i},t.exports.isSupportFlv=function(){return t.exports.isSupportHls()},t.exports.isAudio=function(e){return e&&e.toLowerCase().indexOf(".mp3")>0},t.exports.isHls=function(e){return e&&e.toLowerCase().indexOf(".m3u8")>0},t.exports.isFlv=function(e){return e&&e.toLowerCase().indexOf(".flv")>0},t.exports.isRTMP=function(e){return e&&e.toLowerCase().indexOf("rtmp")>-1},t.exports.handleOption=function(e,t){var r=i.merge(i.copy(l),e);if(e.isLive)if(void 0===e.skinLayout)r.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay",align:"cc"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:20,y:25},{name:"volume",align:"tr",x:20,y:25}]}];else if(0!=e.skinLayout){for(var o=e.skinLayout.length,n=[],a=-1,u=0;u<o;u++)if("controlBar"==r.skinLayout[u].name){a=u;for(var c=r.skinLayout[u].children.length,p=0;p<c;p++){var d=r.skinLayout[u].children[p].name;"liveDisplay"!=d&&"fullScreenButton"!=d&&"volume"!=d&&"snapshot"!=d||n.push(r.skinLayout[u].children[p])}break}-1!=a&&(r.skinLayout[a].children=n)}return(void 0===e.components||!e.components||i.isArray(e.components)&&0==e.components.length)&&(r.components=[s]),r}},{"../config":8,"../player/base/plugin/defaultemptycomponent":56,"./dom":20,"./object":25,"./ua":29}],28:[function(e,t,r){t.exports.set=function(e,t){try{window.localStorage&&localStorage.setItem(e,t)}catch(r){window[e+"_localStorage"]=t}},t.exports.get=function(e){try{if(window.localStorage)return localStorage.getItem(e)}catch(t){return window[e+"_localStorage"]}return""}},{}],29:[function(e,t,r){function i(){var e=navigator.userAgent,r="other",i=t.exports.os;if(i.ios)return"iOS";if(i.android)return"android";if(e.indexOf("Baiduspider")>-1)return"Baiduspider";if(e.indexOf("PlayStation")>-1)return"PS4";var o="Win32"==navigator.platform||"Windows"==navigator.platform||e.indexOf("Windows")>-1,n="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;return n&&(r="macOS"),"X11"==navigator.platform&&!o&&!n&&(r="Unix"),String(navigator.platform).indexOf("Linux")>-1&&(r="Linux"),o?"windows":r}function o(){var e=navigator.userAgent,t="";return(e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1)&&(t="2000"),(e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1)&&(t="XP"),(e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1)&&(t="2003"),(e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1)&&(t="Vista"),(e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1)&&(t="7"),(e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1)&&(t="8"),(e.indexOf("Windows NT 6.3")>-1||e.indexOf("Windows 8.1")>-1)&&(t="8.1"),(e.indexOf("Windows NT 10")>-1||e.indexOf("Windows 10")>-1)&&(t="10"),t}function n(){var e=navigator.userAgent.toLowerCase(),r=t.exports.browser;return r.chrome?"Chrome":r.firefox?"Firefox":r.safari?"Safari":r.webview?"webview":r.ie?/edge/.test(e)?"Edge":"IE":/baiduspider/.test(e)?"Baiduspider":/ucweb/.test(e)||/UCBrowser/.test(e)?"UC":/opera/.test(e)?"Opera":/ucweb/.test(e)?"UC":/360se/.test(e)?"360浏览器":/bidubrowser/.test(e)?"百度浏览器":/metasr/.test(e)?"搜狗浏览器":/lbbrowser/.test(e)?"猎豹浏览器":/micromessenger/.test(e)?"微信内置浏览器":/qqbrowser/.test(e)?"QQ浏览器":/playstation/.test(e)?"PS4浏览器":void 0}if(t.exports.USER_AGENT=navigator.userAgent,t.exports.IS_IPHONE=/iPhone/i.test(t.exports.USER_AGENT),t.exports.IS_IPAD=/iPad/i.test(t.exports.USER_AGENT),t.exports.IS_IPOD=/iPod/i.test(t.exports.USER_AGENT),t.exports.IS_MAC=/mac/i.test(t.exports.USER_AGENT),t.exports.IS_SAFARI=/Safari/i.test(t.exports.USER_AGENT),t.exports.IS_CHROME=/Chrome/i.test(t.exports.USER_AGENT),t.exports.IS_FIREFOX=/Firefox/i.test(t.exports.USER_AGENT),document.all)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t.exports.HAS_FLASH=!!a}catch(e){t.exports.HAS_FLASH=!1}else if(navigator.plugins&&navigator.plugins.length>0){var a=navigator.plugins["Shockwave Flash"];t.exports.HAS_FLASH=!!a}else t.exports.HAS_FLASH=!1;t.exports.IS_MAC_SAFARI=t.exports.IS_MAC&&t.exports.IS_SAFARI&&!t.exports.IS_CHROME&&!t.exports.HAS_FLASH,t.exports.IS_IOS=t.exports.IS_IPHONE||t.exports.IS_IPAD||t.exports.IS_IPOD||t.exports.IS_MAC_SAFARI,t.exports.IOS_VERSION=function(){var e=t.exports.USER_AGENT.match(/OS (\d+)_/i);if(e&&e[1])return e[1]}(),t.exports.IS_ANDROID=/Android/i.test(t.exports.USER_AGENT),t.exports.ANDROID_VERSION=function(){var e,r,i=t.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return i?(e=i[1]&&parseFloat(i[1]),r=i[2]&&parseFloat(i[2]),e&&r?parseFloat(i[1]+"."+i[2]):e||null):null}(),t.exports.IS_OLD_ANDROID=t.exports.IS_ANDROID&&/webkit/i.test(t.exports.USER_AGENT)&&t.exports.ANDROID_VERSION<2.3,t.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),t.exports.IS_MOBILE=t.exports.IS_IOS||t.exports.IS_ANDROID,t.exports.IS_H5=t.exports.IS_MOBILE||!t.exports.HAS_FLASH,t.exports.IS_PC=!t.exports.IS_H5,t.exports.is_X5=/micromessenger/i.test(t.exports.USER_AGENT)||/qqbrowser/i.test(t.exports.USER_AGENT),t.exports.getHost=function(e){i="";if(void 0===e||null==e||""==e)return"";var t=e.indexOf("//"),r=e;t>-1&&(r=e.substring(t+2));var i=r,o=r.split("/");return o&&o.length>0&&(i=o[0]),(o=i.split(":"))&&o.length>0&&(i=o[0]),i},t.exports.dingTalk=function(){return/dingtalk/i.test(t.exports.USER_AGENT.toLowerCase())},t.exports.wechat=function(){return/micromessenger/i.test(t.exports.USER_AGENT.toLowerCase())},t.exports.inIFrame=function(){return self!=top},t.exports.getReferer=function(){return t.exports.inIFrame()?top.document.referrer:document.referrer},t.exports.getHref=function(){return t.exports.inIFrame()?top.location.href:location.href},function(e){(function(e,t){var r=this.os={},a=this.browser={},s=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),l=e.match(/(Android);?[\s\/]+([\d.]+)?/),u=!!e.match(/\(Macintosh\; Intel /),c=e.match(/(iPad).*OS\s([\d_]+)/),p=e.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&e.match(/(iPhone\sOS)\s([\d_]+)/),h=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),f=/Win\d{2}|Windows/.test(t),y=e.match(/Windows Phone ([\d.]+)/),_=h&&e.match(/TouchPad/),g=e.match(/Kindle\/([\d.]+)/),v=e.match(/Silk\/([\d._]+)/),m=e.match(/(BlackBerry).*Version\/([\d.]+)/),x=e.match(/(BB10).*Version\/([\d.]+)/),S=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),b=e.match(/PlayBook/),E=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),T=e.match(/Firefox\/([\d.]+)/),P=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),w=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),C=!E&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),I=C||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if((a.webkit=!!s)&&(a.version=s[1]),l&&(r.android=!0,r.version=l[2]),d&&!p&&(r.ios=r.iphone=!0,r.version=d[2].replace(/_/g,".")),c&&(r.ios=r.ipad=!0,r.version=c[2].replace(/_/g,".")),p&&(r.ios=r.ipod=!0,r.version=p[3]?p[3].replace(/_/g,"."):null),y&&(r.wp=!0,r.version=y[1]),h&&(r.webos=!0,r.version=h[2]),_&&(r.touchpad=!0),m&&(r.blackberry=!0,r.version=m[2]),x&&(r.bb10=!0,r.version=x[2]),S&&(r.rimtabletos=!0,r.version=S[2]),b&&(a.playbook=!0),g&&(r.kindle=!0,r.version=g[1]),v&&(a.silk=!0,a.version=v[1]),!v&&r.android&&e.match(/Kindle Fire/)&&(a.silk=!0),E&&(a.chrome=!0,a.version=E[1]),T&&(a.firefox=!0,a.version=T[1]),P&&(r.firefoxos=!0,r.version=P[1]),w&&(a.ie=!0,a.version=w[1]),I&&(u||r.ios||f||l)&&(a.safari=!0,r.ios||(a.version=I[1])),C&&(a.webview=!0),u){var D=e.match(/[\d]*_[\d]*_[\d]*/);D&&D.length>0&&D[0]&&(r.version=D[0].replace(/_/g,"."))}r.tablet=!!(c||b||l&&!e.match(/Mobile/)||T&&e.match(/Tablet/)||w&&!e.match(/Phone/)&&e.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(l||d||h||m||x||E&&e.match(/Android/)||E&&e.match(/CriOS\/([\d.]+)/)||T&&e.match(/Mobile/)||w&&e.match(/Touch/))),r.pc=!r.tablet&&!r.phone,u?r.name="macOS":f?(r.name="windows",r.version=o()):r.name=i(),a.name=n()}).call(e,navigator.userAgent,navigator.platform)}(t.exports)},{}],30:[function(e,t,r){var i=e("./dom");t.exports.getAbsoluteURL=function(e){return e.match(/^https?:\/\//)||(e=i.createEl("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href),e},t.exports.parseUrl=function(e){var t,r,o,n,a;n=["protocol","hostname","port","pathname","search","hash","host"],(o=""===(r=i.createEl("a",{href:e})).host&&"file:"!==r.protocol)&&(t=i.createEl("div"),t.innerHTML='<a href="'+e+'"></a>',r=t.firstChild,t.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(t)),a={};for(var s=0;s<n.length;s++)a[n[s]]=r[n[s]];return o&&document.body.removeChild(t),a}},{"./dom":20}],31:[function(e,t,r){var i=e("./dom");t.exports.formatTime=function(e){var t,r,i,o=Math.round(e);return t=Math.floor(o/3600),o%=3600,r=Math.floor(o/60),i=o%60,!(t===1/0||isNaN(t)||r===1/0||isNaN(r)||i===1/0||isNaN(i))&&(t=t>=10?t:"0"+t,r=r>=10?r:"0"+r,i=i>=10?i:"0"+i,("00"===t?"":t+":")+r+":"+i)},t.exports.parseTime=function(e){var t=e.split(":"),r=0,i=0,o=0;return 3===t.length?(r=t[0],i=t[1],o=t[2]):2===t.length?(i=t[0],o=t[1]):1===t.length&&(o=t[0]),r=parseInt(r,10),i=parseInt(i,10),o=Math.ceil(parseFloat(o)),3600*r+60*i+o},t.exports.formatDate=function(e,t){var r={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in r)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return t},t.exports.sleep=function(e){for(var t=Date.now();Date.now()-t<=e;);},t.exports.htmlEncodeAll=function(e){return null==e?"":e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t.exports.toBinary=function(e){if(!window.atob)return"";for(var t=atob(e),r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i},t.exports.delayHide=function(e,t){e&&(void 0===t&&(t=1e3),e.delayHanlder&&clearTimeout(e.delayHanlder),e.delayHanlder=setTimeout(function(){i.css(e,"display","none")},t))}},{"./dom":20}],32:[function(e,t,r){var i,o,n=e("../lib/oo"),a=e("../lib/object"),s=e("../lib/cookie"),l=e("../lib/data"),u=e("../lib/io"),c=e("../lib/ua"),p=e("../config"),d=e("../player/base/event/eventtype"),h=0,f={INIT:1001,CLOSE:1002,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,STARTPLAY:1005,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2009,RECOVER:2010,SEEK_END:2011,LOADSTART:2015,LOADEDMETADATA:2016,LOADEDDATA:2017,CANPLAY:2018,CANPLAYTHROUGH:2019,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,UNDERLOAD:3002,LOADED:3001,HEARTBEAT:9001,ERROR:4001},y=n.extend({init:function(e,t,r){void 0===r&&(r=!0),this.trackLog=r,this.player=e,this.requestId="",this.sessionId=l.guid(),this.playId=0,this.osName=c.os.name,this.osVersion=c.os.version||"",this.exName=c.browser.name,this.exVersion=c.browser.version||"";var i=this.player.getOptions(),o=t.from?t.from:"",n=(i.isLive,"player"),a=i.isLive?"live":"vod",s="pc";c.IS_IPAD?s="pad":c.os.phone&&(s="phone");var d=encodeURIComponent(c.getReferer()),h=c.getHref(),f=encodeURIComponent(h),y="";h&&(y=c.getHost(h));var _=p.h5Version,g=this._getUuid(),v=i.source?encodeURIComponent(i.source):"",m=c.getHost(i.source),x=this.sessionId,S="0.0.0.0",b="0.0.0.0",E=(new Date).getTime();this._userNetInfo={cdnIp:"",localIp:""};var T=this;try{var P=function(e){T._log("FETCHEDIP",{error:e||"获取IP出错"})};!function(e){u.jsonp("https://cdn.dns-detect.alicdn.com/api/cdnDetectHttps?method=createDetectHttps",function(t){return u.jsonp(t.content,e,P)},P)}(function(e){S=T._userNetInfo.cdnIp=e.content.ldns,b=T._userNetInfo.localIp=e.content.localIp,T._log("FETCHEDIP",{cdn_ip:S,local_ip:b})})}catch(e){console.log(e)}this.opt={APIVersion:"0.6.0",t:E,ll:"info",lv:"1.0",pd:n,md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:c.USER_AGENT,hn:"0.0.0.0",bi:o,ri:x,e:"0",args:"0",vt:a,tt:s,dm:"h5",av:_,uuid:g,vu:v,vd:m,ua:"0",dn:"custom",cdn_ip:S,app_n:y,r:d,pu:f},this.bindEvent()},updateVideoInfo:function(e){var t=e.from?e.from:"";this.opt.bi=t,this.updateSourceInfo()},updateSourceInfo:function(){var e=this.player.getOptions(),t=e.source?encodeURIComponent(e.source):"",r=c.getHost(e.source);this.opt.vu=t,this.opt.vd=r},bindEvent:function(){var e=this;this.player.on(d.Player.Init,function(){e._onPlayerInit()}),window.addEventListener("beforeunload",function(){e._onPlayerClose()}),this.player.on(d.Player.LoadStart,function(){e.loadstartTime=(new Date).getTime(),e._onPlayerloadstart()}),this.player.on(d.Player.LoadedMetadata,function(){e._onPlayerLoadMetadata()}),this.player.on(d.Player.LoadedData,function(){e._onPlayerLoaddata()}),this.player.on(d.Player.Play,function(){e._onPlayerPlay()}),this.player.on(d.Player.Ready,function(){e._onPlayerReady()}),this.player.on(d.Player.Ended,function(){e._onPlayerFinish()}),this.player.on(d.Player.Pause,function(){e._onPlayerPause()}),this.player.on(d.Private.SeekStart,function(t){e._onPlayerSeekStart(t)}),this.player.on(d.Private.SeekEnd,function(t){e._onPlayerSeekEnd(t)}),this.player.on(d.Player.Waiting,function(){e._onPlayerLoaded()}),this.player.on(d.Video.CanPlayThrough,function(){e._onPlayerUnderload()}),this.player.on(d.Video.CanPlay,function(){e._onPlayerCanplay()}),this.player.on(d.Player.Error,function(){e._onPlayerError()}),this.player.on(d.Player.RequestFullScreen,function(){e._onFullscreenChange(1)}),this.player.on(d.Player.CancelFullScreen,function(){e._onFullscreenChange(0)}),i=setInterval(function(){2===e.player.readyState()||3===e.player.readyState()?e._onPlayerLoaded():4===e.player.readyState()&&e._onPlayerUnderload()},100),o=setInterval(function(){if(e.player.getCurrentTime()){var t=Math.floor(1e3*e.player.getCurrentTime());e.player.paused()||++h>=30&&(e._log("HEARTBEAT",{vt:t,interval:1e3*h}),h=0)}},1e3)},removeEvent:function(){this.player.off("init"),this.player.off("ready"),this.player.off("ended"),this.player.off("play"),this.player.off("pause"),this.player.off("seekStart"),this.player.off("seekEnd"),this.player.off("canplaythrough"),this.player.off("error"),this.player.off("fullscreenchange"),clearInterval(i)},_onFullscreenChange:function(e){e?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onPlayerloadstart:function(){this.playId=l.guid(),this._log("LOADSTART",{pt:(new Date).getTime()}),this._log("STARTPLAY",{})},_onPlayerLoadMetadata:function(){this._log("LOADEDMETADATA",{cost:(new Date).getTime()-this.loadstartTime})},_onPlayerLoaddata:function(){this._log("LOADEDDATA",{cost:(new Date).getTime()-this.loadstartTime})},_onPlayerCanplay:function(){this._log("CANPLAY",{pt:(new Date).getTime()-this.loadstartTime})},_onPlayerInit:function(){this._log("INIT",{}),this.buffer_flag=0,this.pause_flag=0},_onPlayerClose:function(){this._log("CLOSE",{vt:Math.floor(1e3*this.player.getCurrentTime())})},_onPlayerReady:function(){this.startTimePlay=(new Date).getTime()},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.sessionId=l.guid(),this.playId=0},_onPlayerPlay:function(){if(0==this.playId&&(this.playId=l.guid()),0!=this.pause_flag||this.seeking||(this.sessionId=l.guid()),!this.buffer_flag&&this.player._options.autoplay)return this.first_play_time=(new Date).getTime(),this._log("PLAY",{dsm:"fix",vt:0,start_cost:this.first_play_time-this.player.getReadyTime()}),void(this.buffer_flag=1);this.buffer_flag&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=(new Date).getTime(),this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.pauseEndTime-this.pauseTime}))},_onPlayerPause:function(){this.buffer_flag&&this.startTimePlay&&(this.seeking||(this.pause_flag=1,this.pauseTime=(new Date).getTime(),this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())})))},_onPlayerSeekStart:function(e){this.seekStartTime=e.paramData.fromTime,this.seeking=!0,this.seekStartStamp=(new Date).getTime()},_onPlayerSeekEnd:function(e){this.seekEndStamp=(new Date).getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*e.paramData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this.seeking=!1},_onPlayerLoaded:function(){this.buffer_flag&&this.startTimePlay&&(this.stucking||this.seeking||(this.stuckStartTime=(new Date).getTime(),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.stuckStartTime=(new Date).getTime())))},_onPlayerUnderload:function(){if(!this.buffer_flag&&!this.player._options.autoplay)return this.first_play_time=(new Date).getTime(),this._log("PLAY",{play_mode:"fix",vt:0,start_cost:this.first_play_time-this.player.getReadyTime()}),void(this.buffer_flag=1);if((this.buffer_flag||!this.player._options.autoplay)&&this.stucking&&!this.seeking){var e=Math.floor(1e3*this.player.getCurrentTime()),t=this.stuckStartTime||(new Date).getTime(),r=Math.floor((new Date).getTime()-t);r<0&&(r=0),this._log("LOADED",{vt:e,cost:r}),this.stucking=!1}},_onPlayerHeartBeat:function(){if(!this.seeking){var e=Math.floor(1e3*this.player.getCurrentTime()),t=this;this.timer||(this.timer=setTimeout(function(){!t.seeking&&t._log("HEARTBEAT",{progress:e}),clearTimeout(t.timer),t.timer=null},6e4)),console.log("timeupdate")}},_onPlayerError:function(){this.playId=0},_log:function(e,t){this.updateSourceInfo();var r=a.copy(this.opt);if(this.requestId=l.guid(),"ERROR"==e&&"FETCHEDIP"!=e&&"CDNDETECT"!=e){var i=this;u.jsonp("https://cdn.dns-detect.alicdn.com/api/cdnDetectHttps?method=createDetectHttps",function(e){i._log("CDNDETECT",{flag:0,error:"",eri:i.requestId})},function(e){i._log("CDNDETECT",{flag:1,error:e||"访问CDN错误",eri:i.requestId})})}var o=p.logReportTo;r.e=f[e],r.ri=this.sessionId,r.t=(new Date).getTime(),r.cdn_ip=this._userNetInfo.cdnIp,r.hn=this._userNetInfo.localIp;var n=this.player.getCurrentQuality();""!=n&&(r.definition=n.definition);var s=[];a.each(t,function(e,t){s.push(e+"="+t)});var c="",d=this.player.getOptions();d&&d.vid&&(c=d.vid),s.push("vid="+c),""==(s=s.join("&"))&&(s="0"),r.args=encodeURIComponent(s);var h=[];return a.each(r,function(e,t){h.push(e+"="+t)}),h=h.join("&"),this.trackLog&&u.jsonp(o+"?"+h,function(){},function(){}),this.sessionId},_getUuid:function(){var e=s.get("p_h5_u");return e||(e=l.guid(),s.set("p_h5_u",e,730)),e}});t.exports=y},{"../config":8,"../lib/cookie":18,"../lib/data":19,"../lib/io":23,"../lib/object":25,"../lib/oo":26,"../lib/ua":29,"../player/base/event/eventtype":36}],33:[function(e,t,r){var i=e("./base/player"),o=e("./flash/flashplayer"),n=e("./saas/mtsplayer"),a=e("./saas/vodplayer"),s=e("./taotv/taotvplayer"),l=e("./audio/audioplayer"),u=e("./hls/hlsplayer"),c=e("./flv/flvplayer"),p=e("../lib/ua"),d=e("../lib/playerutil"),h=(e("../lib/dom"),e("../lang/index"));t.exports.create=function(e,t){"function"!=typeof t&&(t=function(){}),e.readyCallback=t,h.setCurrentLanguage(e.language);var r=d.handleOption(e),f=r.source,y=d.isAudio(f);y&&(r.height="auto");var _=d.createWrapper(r);if(_.player)return _.player;var g;return y?g=new l(_,r):!r.useFlashPrism&&d.isFlv(f)&&d.isSupportFlv()?g=new c(_,r):r.useFlashPrism||d.isFlv(f)||d.isRTMP(f)?g=new o(_,r):r.vid&&!r.source?g=r.authInfo?new n(_,r):r.playauth?new a(_,r):new s(_,r):p.os.pc&&d.isHls(f)?d.canPlayHls()?(d.isSafariUsedHlsPlugin(r.useHlsPluginForSafari)&&(g=new u(_,r)),g=new i(_,r)):d.isSupportHls()?g=new u(_,r):r.userH5Prism||r.useH5Prism||(g=new o(_,r)):g=new i(_,r),g}},{"../lang/index":14,"../lib/dom":20,"../lib/playerutil":27,"../lib/ua":29,"./audio/audioplayer":34,"./base/player":55,"./flash/flashplayer":61,"./flv/flvplayer":63,"./hls/hlsplayer":65,"./saas/mtsplayer":68,"./saas/vodplayer":73,"./taotv/taotvplayer":75}],34:[function(e,t,r){var i=e("../base/player"),o=e("../../ui/component"),n=e("../../lib/dom"),a=e("../../lib/object"),s=i.extend({init:function(e,t){this._isAudio=!0,void 0===t.skinLayout&&(t.skinLayout=playerUtil.defaultAudioLayout),i.call(this,e,t)}});s.prototype.createEl=function(){"AUDIO"!==this.tag.tagName&&(this._el=this.tag,this.tag=o.prototype.createEl.call(this,"audio"));var e=this._el,t=this.tag;t.player=this;var r=n.getElementAttributes(t);return a.each(r,function(t){e.setAttribute(t,r[t])}),this.setVideoAttrs(),t.parentNode&&t.parentNode.insertBefore(e,t),n.insertFirst(t,e),e},t.exports=s},{"../../lib/dom":20,"../../lib/object":25,"../../ui/component":76,"../base/player":55}],35:[function(e,t,r){var i=e("../../../lib/event"),o=e("./eventtype"),n=e("../eventHandler/video/index"),a=e("../eventHandler/player/index");t.exports.offAll=function(e){var t=e.tag,r=e._el;for(var n in o.Video)i.off(t,o.Video[n]);for(var a in o.Player)i.off(r,o.Player[a]);for(var s in o.Private)i.off(r,o.Private[s])},t.exports.onAll=function(e){n.bind(e),a.bind(e)}},{"../../../lib/event":21,"../eventHandler/player/index":40,"../eventHandler/video/index":49,"./eventtype":36}],36:[function(e,t,r){t.exports={Video:{TimeUpdate:"timeupdate",Play:"play",playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",StartSeek:"startSeek",CompleteSeek:"completeSeek"},Private:{Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide"}}},{}],37:[function(e,t,r){var i=(e("../../event/eventtype"),e("../../../../lib/dom"));t.exports.handle=function(){var e=this;i.removeClass(e.el(),"prism-fullscreen")}},{"../../../../lib/dom":20,"../../event/eventtype":36}],38:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.play(),t._seeking=!1,t.trigger(i.Player.CompleteSeek,e.paramData.toTime)}},{"../../event/eventtype":36}],39:[function(e,t,r){var i=e("../../event/eventtype");e("../../../../lib/constants"),e("../../../../lang/index"),t.exports.handle=function(e){var t=this,r=e.paramData;t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Play_Btn_Hide),r=r||{},t._monitor&&(r.uuid=t._monitor._getUuid(),r.requestId=t._serverRequestId,r.cdnIp=t._monitor._userNetInfo.cdnIp,r.localIp=t._monitor._userNetInfo.localIp),t._isError=!0,t.trigger(i.Private.Error_Show,r),t.trigger(i.Private.LifeCycleChanged,{type:i.Player.Error,data:r})}},{"../../../../lang/index":14,"../../../../lib/constants":17,"../../event/eventtype":36}],40:[function(e,t,r){var i=e("../../event/eventtype"),o=e("../../../../lib/event"),n=e("./lifecyclecommon"),a={endStart:e("./endstart"),seekStart:e("./seekstart"),requestFullScreen:e("./requestfullscreen"),cancelFullScreen:e("./cancelfullscreen"),error:e("./error")},s=[i.Private.EndStart,i.Private.SeekStart,i.Player.RequestFullScreen,i.Player.CancelFullScreen,i.Player.Error,i.Player.Ready,i.Private.Dispose,i.Private.Created],l=function(e,t,r){var i=e.el();o.on(i,t,function(i){(r&&r.handle?r.handle:n.handle).call(e,i,t)})};t.exports.bind=function(e){for(var t=(e.el(),0);t<s.length;t++){var r=s[t];"undefined"!=a[r]&&l(e,r,a[r])}}},{"../../../../lib/event":21,"../../event/eventtype":36,"./cancelfullscreen":37,"./endstart":38,"./error":39,"./lifecyclecommon":41,"./requestfullscreen":42,"./seekstart":43}],41:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e,t){this.trigger(i.Private.LifeCycleChanged,{type:t,data:e})}},{"../../event/eventtype":36}],42:[function(e,t,r){var i=(e("../../event/eventtype"),e("../../../../lib/dom"));t.exports.handle=function(){var e=this;i.addClass(e.el(),"prism-fullscreen")}},{"../../../../lib/dom":20,"../../event/eventtype":36}],43:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t._seeking=!0,t.trigger(i.Player.StartSeek,e.paramData.fromTime)}},{"../../event/eventtype":36}],44:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t._retrySwitchUrlCount=0,t._liveRetryCount=0,t._clearLiveErrorHandle();var r=(new Date).getTime()-t.readyTime;t.trigger(i.Player.CanPlay,{loadtime:r})}},{"../../event/eventtype":36}],45:[function(e,t,r){var i=e("../../event/eventtype"),o=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(e){var t=this;t.trigger(i.Private.Cover_Hide);var r=t.tag;"none"===r.style.display&&n.IS_IOS&&setTimeout(function(){o.css(r,"display","block")},100),t.trigger(i.Video.CanPlayThrough)}},{"../../../../lib/dom":20,"../../../../lib/ua":29,"../../event/eventtype":36}],46:[function(e,t,r){t.exports.handle=function(e,t){var r=this,i="";e&&e.paramData&&(i=e.paramData),r.trigger(t,i)}},{}],47:[function(e,t,r){var i=e("../../event/eventtype"),o=e("../../../../lang/index");t.exports.handle=function(e){var t=this;t.waiting=!1,t._options.rePlay?(t.seek(0),t.tag.play()):t._options.isLive&&(t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Info_Show,o.get("Live_End"))),t.trigger(i.Player.Ended)}},{"../../../../lang/index":14,"../../event/eventtype":36}],48:[function(e,t,r){var i=e("../../event/eventtype"),o=e("../../../../lib/ua"),n=e("../../../../lib/playerutil"),a=e("../../../../lib/constants"),s=e("../../../../lang/index");t.exports.handle=function(e){var t=this;if(t.waiting=!1,t._checkTimeoutHandle&&clearTimeout(t._checkTimeoutHandle),t.checkOnline()){var r,l="",u=e.srcElement.error.message,l="";if(e.srcElement.error.code&&(r=e.srcElement.error.code,l=a.VideoErrorCode[e.srcElement.error.code],u=r+" || "+u),t._options.isLive)t._options.liveRetry>t._liveRetryCount?t._reloadAndPlayForM3u8():(t._liveRetryCount=0,t.trigger(i.Player.LiveStreamStop),t._liveErrorHandle=setTimeout(function(){var e={mediaId:"ISLIVE",error_code:l,error_msg:s.get("Error_Play_Text")+"，"+s.get("Error_Retry_Text")};t.logError(e),t.trigger("error",e)},500));else{var c=s.get("Error_Play_Text"),p=!1;r<4?c=a.VideoErrorCodeText[r]:t._eventState==a.SUSPEND?(c=s.get("Error_Load_Abort_Text"),l=a.ErrorCode.RequestDataError):t._eventState==a.LOAD_START?(c=s.get("Error_Network_Text"),t._options.source.indexOf("auth_key")>0&&(c=c+"，"+s.get("Error_AuthKey_Text")),l=a.ErrorCode.StartLoadData):t._eventState==a.LOADED_METADATA&&(c=s.get("Error_Play_Text"),l=a.ErrorCode.PlayingError),c=c+"，"+s.get("Error_Retry_Text"),t._options.source&&(t._options.source.indexOf("flv")>0||t._options.source.indexOf("m3u8")>0&&!n.isSupportHls())&&!o.IS_MOBILE?(c=s.get("Error_H5_Not_Support_Text"),l=a.ErrorCode.FormatNotSupport):t._urls.length>1&&t._retrySwitchUrlCount<3&&(t.switchUrl(),p=!0);var d={mediaId:t._options.vid?t._options.vid:"",error_code:l,error_msg:u};t.logError(d),d.display_msg=c,p||t.trigger(i.Player.Error,d)}}}},{"../../../../lang/index":14,"../../../../lib/constants":17,"../../../../lib/playerutil":27,"../../../../lib/ua":29,"../../event/eventtype":36}],49:[function(e,t,r){var i=e("../../../../lib/event"),o=e("../../event/eventtype"),n={canplay:e("./canplay"),canplaythrough:e("./canplaythrough"),common:e("./common"),ended:e("./ended"),error:e("./error"),pause:e("./pause"),play:e("./play"),playing:e("./playing"),waiting:e("./waiting"),timeupdate:e("./timeupdate")},a=function(e,t,r){var n=e.tag;i.on(n,t,function(i){r.handle.call(e,i,t),t!=o.Video.Error&&e.trigger(o.Private.LifeCycleChanged,{type:t,data:i})})};t.exports.bind=function(e){e.tag;for(var t in o.Video){var r=o.Video[t];a(e,r,void 0!==n[r]?n[r]:n.common)}}},{"../../../../lib/event":21,"../../event/eventtype":36,"./canplay":44,"./canplaythrough":45,"./common":46,"./ended":47,"./error":48,"./pause":50,"./play":51,"./playing":52,"./timeupdate":53,"./waiting":54}],50:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t._checkTimeoutHandle&&clearTimeout(t._checkTimeoutHandle),t.trigger(i.Private.AutoStreamHide),t.trigger(i.Player.Pause),t.waiting=!1}},{"../../event/eventtype":36}],51:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.trigger(i.Private.Error_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.AutoStreamHide),t.waiting=!1,t.trigger(i.Player.Play)}},{"../../event/eventtype":36}],52:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Info_Hide),t.waiting=!1,t._checkTimeoutHandle&&clearTimeout(t._checkTimeoutHandle),t.trigger(i.Private.AutoStreamHide),t.trigger(i.Player.Playing)}},{"../../event/eventtype":36}],53:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this.trigger(i.Player.TimeUpdate,e.timeStamp)}},{"../../event/eventtype":36}],54:[function(e,t,r){var i=e("../../event/eventtype");e("../../../../lib/constants"),e("../../../../lang/index"),t.exports.handle=function(e){var t=this;t.trigger(i.Private.H5_Loading_Show),t.waiting=!0,t._checkTimeoutHandle&&clearTimeout(t._checkTimeoutHandle),t._checkTimeoutHandle=setTimeout(function(){t.trigger(i.Private.AutoStreamShow)},1e3*t._options.loadDataTimeout),t.trigger(i.Player.Waiting)}},{"../../../../lang/index":14,"../../../../lib/constants":17,"../../event/eventtype":36}],55:[function(e,t,r){var i=e("../../ui/component"),o=e("../../lib/object"),n=e("../../lib/dom"),a=e("../../lib/event"),s=(e("../../lib/io"),e("../../ui/exports")),l=(e("../../ui/component/error-display"),e("../../ui/component/info-display"),e("../../monitor/monitor")),u=e("../../lib/ua"),c=e("../../lib/constants"),p=e("../../lib/util"),d=(e("../../config"),e("../../lib/playerutil")),h=e("./x5play"),f=e("../../lib/cookie"),y=e("../../lang/index"),_=e("../../feature/autoPlayDelay"),g=e("./event/eventmanager"),v=e("../../ui/component/cover"),m=e("../../commonui/autostreamselector"),x=e("./event/eventtype"),S=e("./plugin/lifecyclemanager"),b=e("../service/fullscreenservice"),E=i.extend({init:function(e,t){if(this.tag=e,this.loaded=!1,this.played=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._seeking=!1,this._serverRequestId=0,this._created=!1,void 0===t.skinLayout&&(t.skinLayout=d.defaultH5Layout),i.call(this,this,t),this.addClass("prism-player"),t.plugins&&o.each(t.plugins,function(e,t){this[e](t)},this),this.UI={},t.useNativeControls?this.tag.setAttribute("controls","controls"):this.UI=s,this.initChildren(),g.onAll(this),this._lifeCycleManager=new S(this),this._monitor=new l(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source},this._options.trackLog),this.checkOnline()){if(this._options.source)if(this._options.autoPlayDelay){var r=this;new _(this).handle(function(){r.initPlay()})}else this.initPlay();if(this._options.extraInfo){var n=this._options.extraInfo;n.liveRetry&&(this._options.liveRetry=n.liveRetry)}this.on(x.Private.ReadyState,function(){this.trigger(x.Player.Ready)}),this._overrideNativePlay(),this._options.readyCallback(this),this.fullscreenService=new b(this)}}});E.prototype.initPlay=function(e){this._checkSupportVideoType()||this._initPlayBehavior(e,this._options.source)},E.prototype.initChildren=function(){var e=this.options(),t=e.skinLayout;if(!1!==t&&!o.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");!1!==t&&0!==t.length&&(this.options({children:t}),i.prototype.initChildren.call(this)),e.preload||e.autoplay||(this.UI.cover=v,this.addChild("cover",e)),this.UI.autoStreamSelector=m,this.addChild("autoStreamSelector",e),this.trigger(x.Private.UiH5Ready)},E.prototype.createEl=function(){"VIDEO"!==this.tag.tagName&&(this._el=this.tag,this.tag=i.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay","")));var e=this._el,t=this.tag;this._options.enableSystemMenu||(t.addEventListener?t.addEventListener("contextmenu",function(e){e.preventDefault()},!1):t.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),t.player=this;var r=n.getElementAttributes(t);return o.each(r,function(t){e.setAttribute(t,r[t])}),this.setVideoAttrs(),t.parentNode&&t.parentNode.insertBefore(e,t),n.insertFirst(t,e),u.IS_IOS&&n.css(t,"display","none"),e},E.prototype.setVideoAttrs=function(){var e=this._options.preload,t=this._options.autoplay;if(this.tag.style.width="100%",this.tag.style.height="100%",e&&this.tag.setAttribute("preload","preload"),t&&this.tag.setAttribute("autoplay","autoplay"),d.hasUIComponent(this._options.skinLayout,"snapshot")&&this.tag.setAttribute("crossOrigin","anonymous"),this._options.extraInfo)for(var r in this._options.extraInfo)this.tag.setAttribute(r,this._options.extraInfo[r]);h.adaptX5Play(this)},E.prototype.checkOnline=function(){if(0==navigator.onLine){var e={mediaId:this._options.vid?this._options.vid:"",error_code:c.ErrorCode.NetworkUnavaiable,error_msg:y.get("Error_Offline_Text")};return this.logError(e),e.display_msg=y.get("Error_Offline_Text"),this.trigger(x.Player.Error,e),!1}return!0},E.prototype.id=function(){return this.el().id},E.prototype.renderUI=function(){},E.prototype.switchUrl=function(){if(0!=this._urls.length){this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++);var e=this._urls[this._currentPlayIndex];f.set(c.SelectedStreamLevel,e.definition,365),this.trigger(x.Private.QualityChange,y.get("Quality_Change_Fail_Switch_Text")),this.getCurrentTime(),this._options.source=e.Url,this.tag.setAttribute("src",this._options.source),this.tag.play()}},E.prototype.setControls=function(){var e=this.options();if(e.useNativeControls)this.tag.setAttribute("controls","controls");else if("object"==typeof e.controls){var t=this._initControlBar(e.controls);this.addChild(t)}},E.prototype._initControlBar=function(e){return new ControlBar(this,e)},E.prototype.getMetaData=function(){var e=this,t=null,r=this.tag;t=window.setInterval(function(i){if(e.tag){if(r.readyState>0){var o=Math.round(r.duration);e.tag.duration=o,e.trigger(x.Private.ReadyState),clearInterval(t)}}else clearInterval(t)},100)},E.prototype.getReadyTime=function(){return this.readyTime},E.prototype.readyState=function(){return this.tag.readyState},E.prototype.getError=function(){return this.tag.error},E.prototype.getRecentOccuredEvent=function(){return this._eventState},E.prototype.getSourceUrl=function(){return this._options?this._options.source:""},E.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},E.prototype.getCurrentQuality=function(){if(this._urls>0){var e=this._urls[this._currentPlayIndex];return{width:e.width,url:e.Url,definition:e.definition}}return""},E.prototype.setSpeed=function(e){this.tag&&(this.tag.playbackRate=e)},E.prototype.play=function(){var e=this;return(this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),e.trigger(x.Private.Cover_Hide),this.tag.play(),this},E.prototype.replay=function(){return this.seek(0),this.tag.play(),this},E.prototype.pause=function(){return this.tag.pause(),this},E.prototype.stop=function(){return this.tag.setAttribute("src",null),this},E.prototype.paused=function(){return!1!==this.tag.paused},E.prototype.getDuration=function(){var e=0;return this.tag&&(e=this.tag.duration),e},E.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime:0},E.prototype.seek=function(e){e===this.tag.duration&&e--;try{this.tag.currentTime=e}catch(e){console.log(e)}return this},E.prototype.firstNewUrlloadByUrl=function(e,t){this._clearLiveErrorHandle(),this._options.vid=0,this._options.source=e,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:e,from:this._options.from}),this.initPlay(),(this._options.preload||this._options.autoplay)&&this.trigger(x.Private.Cover_Hide),this._options.autoplay?this.trigger(x.Player.Play):this.trigger(x.Player.Pause),t||(t=0),!t&&0!=t||isNaN(t)||this.seek(t)},E.prototype.loadByUrl=function(e,t,r){this._clearLiveErrorHandle(),this.trigger(x.Private.Error_Hide),this._options.vid=0,this._options.source=e,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:e,from:this._options.from}),this._options._autoplay=r,this.initPlay(r),(this._options.preload||this._options.autoplay)&&this.trigger(x.Private.Cover_Hide),this._options.autoplay||r?this.trigger(x.Player.Play):this.trigger(x.Player.Pause);var i=this;a.one(this.tag,x.Video.CanPlay,function(e){!t&&0!=t||isNaN(t)||i.seek(t)})},E.prototype.dispose=function(){this.trigger(x.Private.Dispose),this.tag.pause(),g.offAll(this),this.tag=null,this._options=null,this._monitor&&(this._monitor.removeEvent(),this._monitor=null)},E.prototype.mute=function(){return this.tag.muted=!0,this},E.prototype.unMute=function(){return this.tag.muted=!1,this},E.prototype.muted=function(){return this.tag.muted},E.prototype.getVolume=function(){return this.tag.volume},E.prototype.getOptions=function(){return this._options},E.prototype.setVolume=function(e){this.tag.volume=e},E.prototype.hideProgress=function(){this.trigger(x.Private.HideProgress)},E.prototype.cancelHideProgress=function(){this.trigger(x.Private.CancelHideProgress)},E.prototype.setPlayerSize=function(e,t){this._el.style.width=e,this._el.style.height=t},E.prototype.getBuffered=function(){return this.tag.buffered},E.prototype._initPlayBehavior=function(e,t){if(!d.validateSource(t)){var r={mediaId:this._options.vid?this._options.vid:"",error_code:c.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"};return this.logError(r),r.display_msg=y.get("Error_Invalidate_Source"),void this.trigger(x.Player.Error,r)}this.trigger(x.Private.H5_Loading_Hide),void 0===e&&(e=!1),this._created||(this._created=!0,this.trigger(x.Private.Created)),this.loaded||this.trigger(x.Player.Init),(this._options.autoplay||this._options.preload||e)&&(this._initLoad(t),this._options.autoplay||this._options._autoplay?this.tag.play():this.trigger(x.Private.Play_Btn_Show))},E.prototype._initLoad=function(e){this._options.autoplay&&this.trigger(x.Private.H5_Loading_Show),this.getMetaData(),e&&this.tag.setAttribute("src",e),this.readyTime=(new Date).getTime(),this.loaded=!0},E.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&clearTimeout(this._liveErrorHandle)},E.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(x.Player.OnM3u8Retry);var e=this._options,t=e.liveRetryInterval+e.liveRetryStep*player._liveRetryCount;p.sleep(1e3*t),this._liveRetryCount++,this.tag.load(this._options.source),this.tag.play()},E.prototype._checkSupportVideoType=function(){if(!this.tag.canPlayType||!this._options.source||!u.IS_MOBILE)return"";var e=this._options.source,t="";if(e.indexOf("m3u8")>0?""!=this.tag.canPlayType("application/x-mpegURL")||d.isSupportHls()||(t=y.get("Error_Not_Support_M3U8_Text")):e.indexOf("mp4")>0&&""==this.tag.canPlayType("video/mp4")&&(t=y.get("Error_Not_Support_MP4_Text")),t){var r={mediaId:this._options.vid?this._options.vid:"",error_code:c.ErrorCode.FormatNotSupport,error_msg:t};this.logError(r),r.display_msg=t,this.trigger(x.Player.Error,r)}return t},E.prototype.getComponent=function(e){return this._lifeCycleManager.getComponent(e)},E.prototype.logError=function(e){e||(e={}),e.vt=this.getCurrentTime(),this._serverRequestId=this.log("ERROR",e)},E.prototype.log=function(e,t){var r=0,i=0;if(this._monitor)return this._options&&(r=this._options.vid||"0",i=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:r,album_id:0,source:this._options.source,from:i}),this._monitor._log(e,t)},E.prototype.setSanpshotProperties=function(e,t,r){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=e,this._snapshotMatric.height=t,r>1)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=r},E.prototype.getStatus=function(){return this._status?this._status:"init"},E.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},E.prototype._overrideNativePlay=function(){var e=this.tag.play,t=this;this.tag.play=function(){var r=e.apply(t.tag);void 0!==r&&r.catch(function(e){t.trigger(x.Private.Play_Btn_Show),t.trigger(x.Player.AutoPlayPrevented)}).then(function(){})}},t.exports=E},{"../../commonui/autostreamselector":7,"../../config":8,"../../feature/autoPlayDelay":10,"../../lang/index":14,"../../lib/constants":17,"../../lib/cookie":18,"../../lib/dom":20,"../../lib/event":21,"../../lib/io":23,"../../lib/object":25,"../../lib/playerutil":27,"../../lib/ua":29,"../../lib/util":31,"../../monitor/monitor":32,"../../ui/component":76,"../../ui/component/cover":79,"../../ui/component/error-display":80,"../../ui/component/info-display":83,"../../ui/exports":92,"../service/fullscreenservice":74,"./event/eventmanager":35,"./event/eventtype":36,"./plugin/lifecyclemanager":58,"./x5play":60}],56:[function(e,t,r){var i=e("../../../lib/oo").extend({});t.exports=i},{"../../../lib/oo":26}],57:[function(e,t,r){t.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose"}},{}],58:[function(e,t,r){var i=e("../../../lib/object"),o=e("../event/eventtype"),n=e("./lifecycle"),a=e("./status"),s=function(e){this._player=e,e._status="init",this.components=[];var t=e.getOptions().components;if(t&&i.isArray(t)&&t.length>0)for(var r=0;r<t.length;r++){var a=t[r],s=void 0===a.type?a:a.type,l=void 0===a.args?[]:a.args,c=void 0===a.name?"":a.name;l=l&&l.length>0?[].concat.call([s],l):[];var p=new(Function.prototype.bind.apply(s,l));createEl=p[n.createEl],createEl&&"function"==typeof createEl&&createEl.call(p,e.el()),this.components.push({name:c,obj:p})}var d=this;e.on(o.Private.LifeCycleChanged,function(t){0!=d.components.length&&u.call(d,e,t)})};s.prototype.getComponent=function(e){var t=null,r=this.components.length;if(e)for(var i=0;i<r;i++)if(this.components[i].name==e){t=this.components[i].obj;break}return t};var l=function(e){return e==o.Video.LoadStart||e==o.Video.LoadedData||e==o.Video.LoadedMetadata},u=function(e,t){if(t){var r=t.paramData,i=r.type,a=r.data;l(i)&&(i=n.loading),c(e,i);for(var s=this.components.length,u=0;u<s;u++){var p=this.components[u].obj,d=p[i];d&&"function"==typeof d&&d.call(p,e,a)}i==o.Private.Dispose&&(this.components=[])}},c=function(e,t){void 0!==a[t]&&(t!=a.pause||e._status!=a.error&&e._status!=a.ended)&&(e._status=t)};t.exports=s},{"../../../lib/object":25,"../event/eventtype":36,"./lifecycle":57,"./status":59}],59:[function(e,t,r){t.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],60:[function(e,t,r){var i=e("../../lib/ua"),o=e("../../lib/dom"),n=function(e,t){var r=e.el().style.height,i=e.el().style.width;e.originalLayout={container:{height:r,width:i},video:{width:e.tag.style.width,height:e.tag.style.height}};var o=document.body.clientHeight+"px",n=document.body.clientWidth+"px";t?(height=o,width=n):(height=r.indexOf("%")?r:r+"px",width=i.indexOf("%")?i:i+"px"),e.tag.style.width=n,e.tag.style.height=o,e.el().style.height=t?o:height},a=function(e,t){if(e.originalLayout){var r=e.originalLayout;e.el().style.height=r.container.height,e.el().style.width=r.container.width,e.tag.style.width=r.video.width,e.tag.style.height=r.video.height}};t.exports.isAndroidX5=function(){return i.os.android&&i.is_X5||i.dingTalk()},t.exports.adaptX5Play=function(e){i.os.android&&i.is_X5&&("h5"==e._options.x5_type&&(e.tag.setAttribute("x5-video-player-type",e._options.x5_type),window.onresize=function(){n(e,e._options.x5_fullscreen||"center"==e._options.x5_video_position)},e.tag.addEventListener("x5videoenterfullscreen",function(){n(e,e._options.x5_fullscreen||"center"==e._options.x5_video_position),e.trigger("x5requestFullScreen")}),e.tag.addEventListener("x5videoexitfullscreen",function(){a(e),e.trigger("x5cancelFullScreen")}),e.on("requestFullScreen",function(){"center"!=e._options.x5_video_position&&o.removeClass(e.tag,"x5-top-left")}),e.on("cancelFullScreen",function(){"center"!=e._options.x5_video_position&&o.addClass(e.tag,"x5-top-left")})),void 0!==e._options.x5_fullscreen&&e._options.x5_fullscreen&&(e.tag.setAttribute("x5-video-player-fullscreen",e._options.x5_fullscreen),o.addClass(e.tag,"x5-full-screen")),"center"!=e._options.x5_video_position&&o.addClass(e.tag,"x5-top-left"),void 0!==e._options.x5_orientation&&e.tag.setAttribute("x5-video-orientation",e._options.x5_orientation))}},{"../../lib/dom":20,"../../lib/ua":29}],61:[function(e,t,r){var i=e("../../ui/component"),o=e("../../lib/data"),n=e("../../lib/ua"),a=e("../../lib/object"),s=e("../../config"),l=e("../../lang/index"),u=e("../../lib/playerutil"),c=e("../../lib/util"),p=e("../../ui/component/info-display"),d=e("../../feature/autoPlayDelay"),h=e("../../commonui/autostreamselector"),f=e("../base/event/eventtype"),y=i.extend({init:function(e,t){if(void 0===t.skinLayout&&(t.skinLayout=u.defaultFlashLayout),i.call(this,this,t),this._id="prism-player-"+o.guid(),this.tag=e,this._el=this.tag,this._childrenUI=[p],this.initChildren(),this.id=this._id,window[this.id]=this,this._options.autoPlayDelay){var r=this;new d(this).handle(function(){r._options.autoplay=!0,r._initPlayer(),r._childrenUI.push(h),r.initChildren()})}else this._initPlayer(),this._childrenUI.push(h),this.initChildren();this._status="init"},_initPlayer:function(){var e="100%",t="100%",r="//"+s.domain+"/de/prismplayer-flash/"+s.flashVersion+"/PrismPlayer.swf",i=this._comboFlashVars(),o=this._options.wmode?this._options.wmode:"opaque";this.tag.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+r+'"><param name=quality value=High><param name="FlashVars" value="'+i+'"><param name="WMode" value="'+o+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+r+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="'+e+'" height="'+t+'" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+o+'" FlashVars="'+i+'"></embed></object>'},_getPlayer:function(e){return-1!=navigator.appName.indexOf("Microsoft")?document.getElementById(e):document[e]},_getLowerQualityLevel:function(){var e=this._getVideoUrls();if(!e)return"";var t=e.Urls,r=e.index;return t&&0==t.length||-1==r?"":r>0?{item:t[r-1],index:r-1}:""},_comboFlashVars:function(){var e=encodeURIComponent(n.getReferer()),t=n.getHref(),r=encodeURIComponent(t),i="";t&&(i=n.getHost(t));var o=this._options,u={autoPlay:o.autoplay?1:0,isInner:0,actRequest:1,vid:o.vid,domain:o.domain?o.domain:"//tv.taobao.com",statisticService:o.statisticService?o.statisticService:s.logReportTo,videoInfoService:o.videoInfoService?o.videoInfoService:"/player/json/getBaseVideoInfo.do",disablePing:o.trackLog?0:1,namespace:this.id,barMode:0!=o.barMode?1:0,isLive:o.isLive?1:0,waterMark:o.waterMark,environment:o.environment,vurl:o.source?encodeURIComponent(o.source):"",plugins:o.plugins?o.plugins:"",snapShotShow:o.snapshot?1:0,accessId:o.accId?o.accId:"",accessKey:o.accSecret?o.accSecret:"",apiKey:o.apiKey?o.apiKey:"",flashApiKey:o.flashApiKey?o.flashApiKey:"",disableSeek:o.disableSeek?1:0,disableFullScreen:o.disableFullScreen?1:0,stsToken:o.stsToken?o.stsToken:"",domainRegion:o.domainRegion?o.domainRegion:"",authInfo:o.authInfo?encodeURIComponent(o.authInfo):"",playDomain:o.playDomain?o.playDomain:"",stretcherZoomType:o.stretcherZoomType?o.stretcherZoomType:"",playauth:o.playauth?o.playauth.replace(/\+/g,"%2B"):"",prismType:o.prismType?o.prismType:0,formats:o.formats?o.formats:"",notShowTips:o.notShowTips?1:0,showBarTime:o.showBarTime?o.showBarTime:0,showBuffer:0==o.showBuffer?0:1,rePlay:o.rePlay?1:0,encryp:o.encryp?o.encryp:"",secret:o.secret?o.secret:"",mediaType:"video",logInfo:{ud:n.getHost(o.source),os:n.os.name,ov:n.os.version||"",et:n.browser.name,ev:n.browser.version||"",uat:n.USER_AGENT,r:e,pu:r,app_n:i}},c=[];return o.cover&&(u.cover=o.cover),o.extraInfo&&(u.extraInfo=encodeURIComponent(JSON.stringify(o.extraInfo))),u.logInfo&&(u.logInfo=encodeURIComponent(JSON.stringify(u.logInfo))),l.setCurrentLanguage(o.language,"flash"),u.languageData=encodeURIComponent(JSON.stringify(l.getLanguageData("flash"))),u.language=l.getCurrentLanguage(),a.each(u,function(e,t){c.push(e+"="+t)}),c.join("&")},initChildren:function(){for(var e=this._childrenUI.length,t=0;t<e;t++){var r=new this._childrenUI[t](this,this._options),i=r.el();i.id=r.id(),this.contentEl().appendChild(i),r.bindEvent()}},flashReady:function(){this.flashPlayer=this._getPlayer(this.id),this._isReady=!0;var e,t=this._options.skinRes,r=this._options.skinLayout;if(!1!==r&&!a.isArray(r))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if("string"!=typeof t)throw new Error("PrismPlayer Error: skinRes should be string!");e=0!=r&&0!==r.length&&{skinRes:t,skinLayout:r},this.flashPlayer.setPlayerSkin(e),this.trigger("ready");var i=this;window.addEventListener("beforeunload",function(){try{i.flashPlayer.setPlayerCloseStatus()}catch(e){}})},jsReady:function(){return!0},snapshoted:function(e){var t=c.toBinary(e),r="data:image/jpeg;base64,"+e;this.trigger("snapshoted",{time:this.getCurrentTime(),base64:r,binary:t})},uiReady:function(){this._status="ready",this.trigger("uiReady")},loadedmetadata:function(){"ended"!=this._status&&(this._status="loading",this.trigger("loadedmetadata"))},onPlay:function(){this._status="play",this.trigger("play"),this._clearTimeoutHandle(),this.trigger(f.Private.AutoStreamHide)},onEnded:function(){this._clearTimeoutHandle(),this._status="ended",this.trigger("ended")},onPause:function(){this._status="pause",this._clearTimeoutHandle(),this.trigger(f.Private.AutoStreamHide),this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(e){this.trigger("bSSendMsg",e)},onVideoRender:function(e){this._clearTimeoutHandle(),this.trigger("videoRender"),this.trigger("canplay",{loadtime:e})},onVideoError:function(e){this._clearTimeoutHandle(),this._status="error",this.trigger("error",{errortype:e})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){this._status="error",this.trigger("stsTokenExpired")},onVideoBuffer:function(){if("pause"!=this._status){this._status="waiting",this.trigger("waiting"),this._clearTimeoutHandle();var e=this;this._checkTimeoutHandle=setTimeout(function(){e.trigger(f.Private.AutoStreamShow)},1e3*this._options.loadDataTimeout),this._checkVideoStatus()}},startSeek:function(e){this.trigger("startSeek",e)},completeSeek:function(e){this.trigger("completeSeek",e)},_invoke:function(){var e=arguments[0],t=arguments;if(Array.prototype.shift.call(t),!this.flashPlayer)throw new Error("PrismPlayer Error: flash player is not ready，please use api after ready event occured!");if("function"!=typeof this.flashPlayer[e])throw new Error("PrismPlayer Error: function "+e+" is not found!");return this.flashPlayer[e].apply(this.flashPlayer,t)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(e){this._invoke("seekVideo",e)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},getStatus:function(){return this._status},_getVideoUrls:function(){var e=this._invoke("getVideoUrls"),t=[];if(e&&e.Urls)for(var r=0;r<e.Urls.length;r++){var i=e.Urls[r].value,o=i.desc.indexOf("_"),n=l.get(i.definition,"flash");i.desc=o>0?n+"_"+i.height:n,t.push(i)}return{Urls:t,index:e.index}},_getVideoStatus:function(){return this._invoke("getVideoStatus")},_checkVideoStatus:function(){if(this.flashPlayer&&!this._checkVideoStatusHandler){var e=this,t=function(){e._checkVideoStatusHandler=setTimeout(function(){var r=e._getVideoStatus();"playing"==r.videoStatus&&"bufferFull"==r.bufferStatus?(e._status="playing",e._clearTimeoutHandle()):"videoPlayOver"==r.videoStatus&&(e._status="ended",e._clearTimeoutHandle()),t()},500)};t()}},_clearTimeoutHandle:function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null)},_changeStream:function(e){return this._invoke("changeStream",e)},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(e){this._invoke("setVolume",e)},loadByVid:function(e){this._invoke("loadByVid",e,!1)},loadByUrl:function(e,t){this._invoke("loadByUrl",e,t)},dispose:function(){this._invoke("pauseVideo")},showBSMsg:function(e){this._invoke("showBSMsg",e)},setToastEnabled:function(e){this._invoke("setToastEnabled",e)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(e,t){this._el.style.width=e,this._el.style.height=t}});t.exports=y},{"../../commonui/autostreamselector":7,"../../config":8,"../../feature/autoPlayDelay":10,"../../lang/index":14,"../../lib/data":19,"../../lib/object":25,"../../lib/playerutil":27,"../../lib/ua":29,"../../lib/util":31,"../../ui/component":76,"../../ui/component/info-display":83,"../base/event/eventtype":36}],62:[function(e,t,r){var i=e("../../lib/io"),o=e("../../config"),n=e("../../lib/constants"),a=e("../../lib/util"),s=e("../../lib/playerutil"),l=(e("../../lib/dom"),e("../../lib/ua")),u=e("../../lang/index"),c=e("../base/event/eventtype"),p=function(e,t){return!(e._flv||!s.isFlv(t))},d=function(e){var t="//"+o.domain+"/de/prismplayer/"+o.h5Version+"/flv/aliplayer-flv-min.js";i.loadJS(t,function(){e()})};t.exports.inject=function(e,t,r,i,o,s){var h=i.source;if(s||p(e,h)){t.prototype._checkFlvReady=function(){if(null==e._flv)throw new Error("please invoke this method after ready event")},e._isFlv=!0,e._flv=null,e._isLoadedFlv=!1,e._originalUrl="",t.prototype.play=function(){if(this._checkFlvReady(),this._options.isLive&&this.tag.load(),this.trigger(c.Private.Cover_Hide),0==this._seeking){var e=0;this.tag.ended||(e=this.getCurrentTime()),this.seek(e)}return this.tag.paused&&this._flv.play(),this},t.prototype.replay=function(){return this._checkFlvReady(),this.seek(0),this.tag.paused&&this._flv.play(),this},t.prototype.seek=function(e){this._checkFlvReady(),e===that.tag.duration&&e--;try{that._flv.currentTime=e}catch(e){console.log(e)}return this},t.prototype.pause=function(){return this._checkFlvReady(),this._flv.pause(),this},t.prototype.initPlay=function(e){function t(e,t){e.destroy();var r=e._options.isLive,i={isLive:r,enableWorker:!0,stashInitialSize:2048};r?(i.enableStashBuffer=e._options.enableStashBufferForFlv,stashInitialSize=e._options.stashInitialSizeForFlv,i.autoCleanupSourceBuffer=!0):i.lazyLoadMaxDuration=600,e._originalUrl=e._options.source,e._flv=flvjs.createPlayer({type:"flv",isLive:r,url:e._options.source},i),f(e,e._flv),e._flv.attachMediaElement(e.tag),e._flv.load(),e._flv.play(),e._initPlayBehavior(t),o&&o(e._flv)}l.browser.safari&&this.trigger(c.Private.Snapshot_Hide),that=this,this._isLoadedHls?buildHls(this,e):(this.trigger(c.Private.H5_Loading_Show),d(function(){that.trigger(c.Private.H5_Loading_Hide),that._isLoadedFlv=!0,t(that,e)}))},t.prototype.destroy=function(){this._flv&&(this._flv.pause(),this._flv.unload(),this._flv.detachMediaElement(),this._flv.destroy()),this._flv=null},t.prototype.dispose=function(){r.dispose.call(this),this.destroy()},t.prototype.canSeekable=function(e){var t=this._flv.mediaInfo;return!(!this._flv._isTimepointBuffered(e)&&t&&!t.hasKeyframesIndex)};var f=function(e,t){var r=!1;t.on(flvjs.Events.ERROR,function(t,i,o){var s=n.ErrorCode.OtherError,l=u.get("Error_Play_Text");if(i==flvjs.ErrorDetails.NETWORK_EXCEPTION){var p=e.getOptions().source;!p||0!=p.toLowerCase().indexOf("http://")&&0!=p.toLowerCase().indexOf("https://")?(s=n.ErrorCode.InvalidSourceURL,l=u.get("Error_Invalidate_Source"),r=!0):(s=n.ErrorCode.NetworkError,l=u.get("Error_Network_Text"))}else i==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?"404"==o.code?(s=n.ErrorCode.NotFoundSourceURL,l=u.get("Error_Not_Found")):"403"==o.code?(s=n.ErrorCode.AuthKeyExpired,l=u.get("Error_AuthKey_Text"),r=!0):(s=n.ErrorCode.NetworkError,l=u.get("Error_Network_Text")):i==flvjs.ErrorDetails.NETWORK_TIMEOUT?(s=n.ErrorCode.LoadingTimeout,l=u.get("Error_Waiting_Timeout_Text")):i!=flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED&&i!=flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED||(s=n.ErrorCode.FormatNotSupport,l=u.get("Error_H5_Not_Support_Text"),r=!0);var d=function(){if(setTimeout(function(){e.trigger(c.Private.Play_Btn_Hide)}),e.checkOnline()){var t={mediaId:e._options.vid?e._options.vid:"",error_code:s,error_msg:o.msg};e.logError(t),t.display_msg=l,e.trigger(c.Player.Error,t)}};if(e._options.isLive&&!r){var h=e._options;if(h.liveRetry>e._liveRetryCount){0==e._liveRetryCount&&e.trigger(c.Player.OnM3u8Retry);var f=h.liveRetryInterval+h.liveRetryStep*e._liveRetryCount;a.sleep(1e3*f),e.loadByUrl(h.source),e._liveRetryCount++}else e._liveRetryCount=0,e.trigger(c.Player.LiveStreamStop),e._liveErrorHandle=setTimeout(d,500)}else d()})}}}},{"../../config":8,"../../lang/index":14,"../../lib/constants":17,"../../lib/dom":20,"../../lib/io":23,"../../lib/playerutil":27,"../../lib/ua":29,"../../lib/util":31,"../base/event/eventtype":36}],63:[function(e,t,r){var i=e("../base/player"),o=e("./flvinjector"),n=i.extend({init:function(e,t){o.inject(this,n,i.prototype,t,function(e){}),i.call(this,e,t)}});t.exports=n},{"../base/player":55,"./flvinjector":62}],64:[function(e,t,r){var i=e("../../lib/io"),o=e("../../config"),n=e("../../lib/constants"),a=e("../../lib/util"),s=e("../../lib/playerutil"),l=(e("../../lib/dom"),e("../../lang/index")),u=e("../base/event/eventtype"),c=function(e,t,r){return!(e._hls||!s.isHls(t)||s.canPlayHls()&&!s.isSafariUsedHlsPlugin(r))},p=function(e){var t="//"+o.domain+"/de/prismplayer/"+o.h5Version+"/hls/aliplayer-hls-min.js";i.loadJS(t,function(){e()})};t.exports.inject=function(e,t,r,i,o,s){var d=i.source,h=i.useHlsPluginForSafari;if(s||c(e,d,h)){t.prototype._checkHlsReady=function(){if(null==e._hls)throw new Error("please invoke this method after ready event")},e._isHls=!0,e._hls=null,e._isLoadedHls=!1,t.prototype.play=function(){if(this._checkHlsReady(),this.trigger(u.Private.Cover_Hide),this.tag.ended)this.replay();else{var e=this.getCurrentTime();this._hls.startLoad(e),this.tag.paused&&this.tag.play()}return this},t.prototype.replay=function(){return this.initPlay(!0),this.tag.paused&&this.tag.play(),this},t.prototype.pause=function(){return this._checkHlsReady(),this.tag.pause(),this._hls.stopLoad(),this},t.prototype.stop=function(){return this._checkHlsReady(),this.tag.setAttribute("src",null),this._hls.stopLoad(),this},t.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(u.Player.OnM3u8Retry),this._liveRetryCount++},t.prototype.initPlay=function(e){function t(e,t){e.destroy(),e._hls=new Hls({xhrSetup:function(t,r){t.withCredentials=e._options.withCredentials||!1}}),o&&(o(e._hls),f(e,e._hls)),e._hls.loadSource(e._options.source),e._hls.attachMedia(e.tag),e._hls.on(Hls.Events.MANIFEST_PARSED,function(){e._initPlayBehavior(t)})}that=this,this._isLoadedHls?t(this,e):(this.trigger(u.Private.H5_Loading_Show),p(function(){that.trigger(u.Private.H5_Loading_Hide),that._isLoadedHls=!0,t(that,e)}))},t.prototype.destroy=function(){this._hls&&this._hls.destroy(),this._hls=null},t.prototype.dispose=function(){r.dispose.call(this),this.destroy()};var f=function(e,t){t.on(Hls.Events.ERROR,function(t,r){if(r.details!=Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&1!=e._seeking&&(0!=r.fatal||r.type==Hls.ErrorTypes.NETWORK_ERROR)){var i=n.ErrorCode.LoadedMetadata,o=l.get("Error_Play_Text"),s=!1;r.details==Hls.ErrorDetails.MANIFEST_LOAD_ERROR?(s=!0,o=l.get("Error_Load_M3U8_Failed_Text")):r.details==Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT?(s=!0,o=l.get("Error_Load_M3U8_Timeout_Text")):r.details==Hls.ErrorDetails.MANIFEST_PARSING_ERROR||r.details==Hls.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(s=!0,o=l.get("Error_M3U8_Decode_Text")):r.type==Hls.ErrorTypes.NETWORK_ERROR?(i=n.ErrorCode.NetworkError,o=l.get("Error_Network_Text")):r.type!=Hls.ErrorTypes.MUX_ERROR&&r.type!=Hls.ErrorTypes.MEDIA_ERROR||(i=n.ErrorCode.PlayDataDecode,o=l.get("Error_TX_Decode_Text")),o=o+"("+r.details+")";var c=function(){if(e.pause(),setTimeout(function(){e.trigger(u.Private.Play_Btn_Hide)}),e.checkOnline()){var t={mediaId:e._options.vid?e._options.vid:"",error_code:i,error_msg:r.details};e.logError(t),t.display_msg=o,e.trigger(u.Player.Error,t)}};if(e._options.isLive){var p=e._options;if(p.liveRetry>e._liveRetryCount){0==e._liveRetryCount&&e.trigger(u.Player.OnM3u8Retry);var d=p.liveRetryInterval+p.liveRetryStep*e._liveRetryCount;a.sleep(1e3*d),s&&e.loadByUrl(p.source),e._liveRetryCount++}else e._liveRetryCount=0,e.trigger(u.Player.LiveStreamStop),e._liveErrorHandle=setTimeout(c,500)}else c()}})}}}},{"../../config":8,"../../lang/index":14,"../../lib/constants":17,"../../lib/dom":20,"../../lib/io":23,"../../lib/playerutil":27,"../../lib/util":31,"../base/event/eventtype":36}],65:[function(e,t,r){var i=e("../base/player"),o=e("./hlsinjector"),n=i.extend({init:function(e,t){o.inject(this,n,i.prototype,t,function(e){}),i.call(this,e,t)}});t.exports=n},{"../base/player":55,"./hlsinjector":64}],66:[function(e,t,r){var i=e("../../lib/constants"),o=e("../../lib/oo").extend({init:function(e){this.player=e,this.tickhandle=null}});o.prototype.tick=function(e,t){var r=this;this.tickhandle=setTimeout(function(){r.player&&r.player.trigger(i.AuthKeyExpiredEvent),t&&t()},1e3*e)},o.prototype.clearTick=function(e){this.tickhandle&&clearTimeout(this.tickhandle)},t.exports=o},{"../../lib/constants":17,"../../lib/oo":26}],67:[function(e,t,r){function i(e,t){for(var r=[],i=[],o=e.length-1;o>=0;o--){var n=e[o];"mp4"==n.format?i.push(n):r.push(n)}return l(i,t),l(r,t),i.length>0?i:r}var o=e("../../lib/io"),n=e("../../lib/constants"),a=e("./signature"),s=e("./util"),l=function(e,t){var r="";e.sort(function(e,r){var i=parseInt(e.width),o=parseInt(r.width);if("desc"==t){if(i>o)return-1;if(i<o)return 1}else{if(i<o)return-1;if(i>o)return 1}});for(var i=e.length,o=0;o<i;o++){var a=e[o],s=n.QualityLevels[a.definition],l="";l=void 0===s?"未知":r==s?s+a.height:s,a.desc=l,r=s}};t.exports.getDataByAuthInfo=function(e,t,r,l){var u=(a.returnUTCDate(),a.randomUUID()),c=a.randomUUID(),p={AccessKeyId:e.accessId,Action:"PlayInfo",MediaId:e.vid,Formats:e.format,AuthInfo:e.authInfo,AuthTimeout:n.AuthKeyExpired,Rand:u,SecurityToken:e.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:c},d=a.makeUTF8sort(p,"=","&")+"&Signature="+a.AliyunEncodeURI(a.makeChangeSiga(p,e.accessSecret)),h="https://mts."+e.domainRegion+".aliyuncs.com/?"+d;o.get(h,function(e){if(e){var o=JSON.parse(e),n=o.PlayInfoList.PlayInfo;urls=i(n,t),r&&r({requestId:o.RequestId,urls:urls})}else l&&l(s.createError("MST获取取数失败"))},function(e){if(l){var t=JSON.parse(e);l({Code:n.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.requestId})}})}},{"../../lib/constants":17,"../../lib/io":23,"./signature":70,"./util":71}],68:[function(e,t,r){var i=e("./saasplayer"),o=(e("../../lib/constants"),e("./mts")),n=i.extend({init:function(e,t){i.call(this,e,t),this.service=o,this.loadByMts()}});n.prototype.loadByMts=function(){var e={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format};this.loadData(e)},n.prototype.replayByVidAndAuthInfo=function(e,t,r,i,o,n){this.reloadNewVideoInfo(e,t,r,i,o,n)},n.prototype.reloadNewVideoInfo=function(e,t,r,i,o,n){if(this.trigger("error_hide"),this._options.source="",e&&(this._options.vid=e,this._options.accId=t,this._options.accessSecret=r,this._options.stsToken=i,this._options.domainRegion=n,this._options.authInfo=o),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("需要提供vid、accId、accessSecret、stsToken、domainRegion和authInfo参数");this.loadByMts()},t.exports=n},{"../../lib/constants":17,"./mts":67,"./saasplayer":69}],69:[function(e,t,r){function i(e){var t=u.get(n.SelectedStreamLevel);if(!t)return u.set(n.SelectedStreamLevel,e[0].definition,365),0;for(var r=0;r<e.length;r++)if(e[r].definition==t)return r;return 0}var o=e("../base/player"),n=(e("../../lib/event"),e("../../lib/io"),e("../../lib/constants")),a=(e("./signature"),e("./authkeyexpiredhandle")),s=e("../hls/hlsinjector"),l=e("../flv/flvinjector"),u=e("../../lib/cookie"),c=e("../../lang/index"),p=e("../../lib/playerutil"),d=e("../base/event/eventtype"),h=o.extend({init:function(e,t){this._authKeyExpiredHandle=new a(this),o.call(this,e,t)}});h.prototype.loadData=function(e){var t=(new Date).getTime();this.log("STARTFETCHDATA",{});var r=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),this.service.getDataByAuthInfo(e,this._options.qualitySort,function(e){if(e.urls&&0==e.urls.length)r._mtsError_message(r,{Code:n.ErrorCode.URLsIsEmpty,Message:c.get("Error_Vod_URL_Is_Empty_Text")},"");else{r._urls=e.urls,r._currentPlayIndex=i(r._urls);var a=e.urls[r._currentPlayIndex],u=a.Url;r._options.source=u,p.isHls(u)?s.inject(r,h,o.prototype,r._options):p.isFlv(u)&&l.inject(r,h,o.prototype,r._options),r.log("COMPLETEFETCHDATA",{cost:(new Date).getTime()-t}),r._authKeyExpiredHandle.tick(n.AuthKeyRefreshExpired),r.trigger(d.Private.SourceLoaded,a),r.initPlay()}},function(e){r._mtsError_message(r,e,"")})},h.prototype._changeStream=function(e){this._urls.length>e&&(this.loadByUrl(this._urls[e].Url,this.getCurrentTime()),this._currentPlayIndex=e,this.trigger(d.Private.QualityChange,c.get("Quality_Change_Fail_Switch_Text")))},h.prototype._getLowerQualityLevel=function(){if(0==this._urls.length||-1==this._currentPlayIndex)return"";if("desc"==this.options().qualitySort){if(this._currentPlayIndex>0)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1};return""},h.prototype._mtsError_message=function(e,t,r){var i=e;i.trigger("h5_loading_hide");var o=t.Code?t.Code:"OTHER_ERR_CODE",a=t.Message?t.Message:"OTHER_ERR_MSG",s=(n.ErrorCode.ServerAPIError,"");a.indexOf("InvalidParameter.Rand")>-1?(n.ErrorCode.EncrptyVideoNotSupport,s=c.get("Error_Not_Support_encrypt_Text")):a.indexOf("SecurityToken.Expired")>-1?(n.ErrorCode.AuthKeyExpired,s=c.get("Error_Playauth_Expired_Text")):a.indexOf("InvalidVideo.NoneStream")>-1&&(n.ErrorCode.URLsIsEmpty,s=c.get("Error_Fetch_NotStream"));var l=i._options.vid?i._options.vid:"0",u=(i._options.from&&i._options.from,{mediaId:l,error_code:o,error_msg:a});i.logError(u),u.display_msg=s||"获取地址出错啦，请尝试退出重试或刷新",i.trigger("error",u),console.log("PrismPlayer Error: "+r+"! error_msg :"+a+";")},t.exports=h},{"../../lang/index":14,"../../lib/constants":17,"../../lib/cookie":18,"../../lib/event":21,"../../lib/io":23,"../../lib/playerutil":27,"../base/event/eventtype":36,"../base/player":55,"../flv/flvinjector":62,"../hls/hlsinjector":64,"./authkeyexpiredhandle":66,"./signature":70}],70:[function(e,t,r){var i=e("crypto-js/hmac-sha1"),o=e("crypto-js/enc-base64"),n=e("crypto-js/enc-utf8");t.exports.randomUUID=function(){for(var e=[],t="0123456789abcdef",r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},t.exports.returnUTCDate=function(){var e=new Date,t=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),o=e.getUTCHours(),n=e.getUTCMinutes(),a=e.getUTCSeconds(),s=e.getUTCMilliseconds();return Date.UTC(t,r,i,o,n,a,s)},t.exports.AliyunEncodeURI=function(e){var t=encodeURIComponent(e);return t=t.replace("+","%2B"),t=t.replace("*","%2A"),t=t.replace("%7E","~")},t.exports.makesort=function(e,t,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");for(var i=Object.keys(e).sort(),o="",n=i.length,a=0;a<n;a++)""==o?o=i[a]+t+e[i[a]]:o+=r+i[a]+t+e[i[a]];return o},t.exports.makeUTF8sort=function(e,r,i){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");for(var o=Object.keys(e).sort(),n="",a=o.length,s=0;s<a;s++){var l=t.exports.AliyunEncodeURI(o[s]),u=t.exports.AliyunEncodeURI(e[o[s]]);""==n?n=l+r+u:n+=i+l+r+u}return n},t.exports.makeChangeSiga=function(e,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");return o.stringify(i("GET&"+t.exports.AliyunEncodeURI("/")+"&"+t.exports.AliyunEncodeURI(t.exports.makeUTF8sort(e,"=","&")),r+"&"))},t.exports.ISODateString=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"},t.exports.encPlayAuth=function(e){if(!(e=n.stringify(o.parse(e))))throw new Error("playuth参数解析为空");return JSON.parse(e)},t.exports.encRsa=function(){}},{"crypto-js/enc-base64":2,"crypto-js/enc-utf8":3,"crypto-js/hmac-sha1":4}],71:[function(e,t,r){t.exports.createError=function(e,t){return{requestId:"",code:t||"",message:e}}},{}],72:[function(e,t,r){function i(e,t){var r=[];"desc"==t&&e.reverse();for(var i=e.length-1;i>=0;i--){var o={};o.width=e[i].Width,o.height=e[i].Height,o.definition=e[i].Definition,o.Url=e[i].PlayURL,o.desc=n.QualityLevels[o.definition],r.push(o)}return r}var o=e("../../lib/io"),n=e("../../lib/constants"),a=e("./signature"),s=e("./util"),l=e("../../config");t.exports.getDataByAuthInfo=function(e,t,r,u){var c=(a.returnUTCDate(),a.randomUUID()),p=a.randomUUID(),d={AccessKeyId:e.accessId,Action:"GetPlayInfo",VideoId:e.vid,Formats:e.format,AuthInfo:e.authInfo,AuthTimeout:n.AuthKeyExpired,Rand:c,SecurityToken:e.stsToken,StreamType:e.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:p,PlayerVersion:l.h5Version,Channel:"HTML5"},h="https://vod.cn-shanghai.aliyuncs.com/?Action=GetPlayInfo&"+a.makeUTF8sort(d,"=","&")+"&Signature="+a.AliyunEncodeURI(a.makeChangeSiga(d,e.accessSecret));o.get(h,function(e){if(e){var o=JSON.parse(e),n=o.PlayInfoList.PlayInfo;urls=i(n,t),r&&r({requestId:o.RequestId,urls:urls})}else u&&u(s.createError("点播服务获取取数失败"))},function(e){if(u){var t=JSON.parse(e);u({Code:n.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.requestId})}})}},{"../../config":8,"../../lib/constants":17,"../../lib/io":23,"./signature":70,"./util":71}],73:[function(e,t,r){var i=e("./saasplayer"),o=e("../../lib/constants"),n=e("./vod"),a=e("./signature"),s=(e("./authkeyexpiredhandle"),i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByVod()}}));s.prototype.loadByVod=function(){try{var e=a.encPlayAuth(this._options.playauth)}catch(e){var t={Code:o.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth解析错误"};return void this._mtsError_message(this,t,this._options.playauth)}this._options.from=e.CustomerId?e.CustomerId:"";var r=e.VideoMeta.CoverURL;this.UI.cover&&r&&!this._options.cover&&(document.querySelector("#"+this.id()+" .prism-cover").style.backgroundImage="url("+r+")");var i={vid:this._options.vid,accessId:e.AccessKeyId,accessSecret:e.AccessKeySecret,stsToken:e.SecurityToken,domainRegion:e.Region,authInfo:e.AuthInfo,playDomain:e.PlayDomain,format:this._options.format,mediaType:this._options.mediaType};this.loadData(i)},s.prototype.replayByVidAndPlayAuth=function(e,t){this.trigger("error_hide"),this._options.source="",this._options.vid=e,this._options.playauth=t,this.loadByVod()},s.prototype.updateSourcesByVidAndPlayAuth=function(e,t){if(e==this._options.vid){this._options.vid=e,this._options.playauth=t;try{var r=a.encPlayAuth(this._options.playauth)}catch(e){return void console.log("playauth解析错误")}var i={vid:e,accessId:r.AccessKeyId,accessSecret:r.AccessKeySecret,stsToken:r.SecurityToken,domainRegion:r.Region,authInfo:r.AuthInfo,playDomain:r.PlayDomain,format:this._options.format,mediaType:this._options.mediaTyp};this._authKeyExpiredHandle.clearTick();var n=this;this.service.loadData(i,this._options.qualitySort,function(e){n._serverRequestId=e.requestId,0!=e.urls.length&&(n._urls=e.urls),n._authKeyExpiredHandle.tick(o.AuthKeyRefreshExpired)},function(e){console.log(e)})}else console.log("不能更新地址，vid和播放中的不一致")},s.prototype.reloaduserPlayInfoAndVidRequestMts=function(e,t){this.replayByVidAndPlayAuth(e,t)},t.exports=s},{"../../lib/constants":17,"./authkeyexpiredhandle":66,"./saasplayer":69,"./signature":70,"./vod":72}],74:[function(e,t,r){var i=e("../../lib/ua"),o=e("../../lib/dom"),n=e("../../lib/event"),a=e("../base/event/eventtype"),s=e("../base/x5play"),l=e("../../lang/index"),u=function(){var e;o.createEl("div"),e={};var t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozfullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]];if(i.IS_IOS)e.requestFn="webkitEnterFullscreen",e.cancelFn="webkitExitFullscreen",e.eventName="webkitfullscreenchange",e.isFullScreen="webkitDisplayingFullscreen";else{for(var r=0;r<5;r++)if(t[r][1]in document){e.requestFn=t[r][0],e.cancelFn=t[r][1],e.eventName=t[r][4],e.isFullScreen=t[r][6];break}"requestFullscreen"in document?e.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?e.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?e.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?e.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?e.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(e.requestFn="msRequestFullscreen"),"fullscreenchange"in document?e.eventName="fullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?e.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(e.eventName="MSFullscreenChange"),"fullScreen"in document?e.isFullScreen="fullScreen":"webkitfullScreen"in document?e.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?e.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?e.isFullScreen="webkitDisplayingFullscreen":"mozfullScreen"in document?e.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(e.isFullScreen="MSFullScreen")}return e.requestFn?e:null}(),c=function(e){this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=e;var t=this,r=u;r&&n.on(document,r.eventName,function(e){t.isFullScreen=document[r.isFullScreen],t.isFullScreenChanged=!0,!0===t.isFullScreen?t._player.trigger(a.Player.RequestFullScreen):t._player.trigger(a.Player.CancelFullScreen)})};c.prototype.requestFullScreen=function(){if(!s.isAndroidX5()||!this._player.paused()){var e=u,t=this._player.el(),r=this;if(i.IS_IOS)return(t=this._player.tag)[e.requestFn](),this;this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer);r=this;return e?(t[e.requestFn](),this._requestFullScreenTimer=setTimeout(function(){r.isFullScreenChanged||(p.apply(r),r._player.trigger(a.Player.RequestFullScreen)),r._requestFullScreenTimer=null},500)):(p.apply(r),this._player.trigger(a.Player.RequestFullScreen)),this._player}this._player.trigger(a.Private.Info_Show,l.get("Play_Before_Fullscreen"))},c.prototype.cancelFullScreen=function(){var e=u,t=this;this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer);t=this;return e?(document[e.cancelFn](),t._cancelFullScreenTimer=setTimeout(function(){t.isFullScreenChanged||(d.apply(t),t._player.trigger(a.Player.CancelFullScreen)),t._cancelFullScreenTimer=null},500),this._player.tag.paused||this._player.trigger(a.Player.Play)):(d.apply(t),this._player.trigger(a.Player.CancelFullScreen),this._player.tag.paused||this._player.trigger(a.Player.Play)),this._player},c.prototype.getIsFullScreen=function(){return this.isFullScreen};var p=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",o.addClass(document.getElementsByTagName("body")[0],"prism-full-window")},d=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,o.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};t.exports=c},{"../../lang/index":14,"../../lib/dom":20,"../../lib/event":21,"../../lib/ua":29,"../base/event/eventtype":36,"../base/x5play":60}],75:[function(e,t,r){var i=e("../base/player"),o=e("../hls/hlsinjector"),n=e("../../lib/io"),a=i.extend({init:function(e,t){i.call(this,e,t),this.loadVideoInfo()}});a.prototype.loadVideoInfo=function(e){this.trigger("error_hide");var t=this._options.vid,r=this;if(!t)throw new Error("PrismPlayer Error: vid should not be null!");n.jsonp("//tv.taobao.com/player/json/getBaseVideoInfo.do?vid="+t+"&playerType=3",function(n){if(1!==n.status||!n.data.source)throw new Error("PrismPlayer Error: #vid:"+t+" cannot find video resource!");var a,s=-1;_.each(n.data.source,function(e,t){var r=+e.substring(1);r>s&&(s=r)}),a=n.data.source["v"+s],a=_.unescape(a),r._options.source=a,o.inject(r,TaobaoTVPlayer,i.prototype,r._options),r.initPlay(),e&&e()},function(){throw new Error("PrismPlayer Error: network error!")})},a.prototype.loadByVid=function(e){this._options.vid=e;var t=this;if(!e)throw new Error("PrismPlayer Error: vid should not be null!");this._monitor&&this._monitor.updateVideoInfo({video_id:e,album_id:data.data.baseInfo.aid,source:src,from:t._options.from}),this._options.autoplay=!0,this.loadVideoInfo(function(){t.cover&&t._options.autoplay&&(Dom.css(t.cover,"display","none"),delete t.cover),t.tag.play()})},t.exports=a},{"../../lib/io":23,"../base/player":55,"../hls/hlsinjector":64}],76:[function(e,t,r){var i=e("../lib/oo"),o=e("../lib/data"),n=e("../lib/object"),a=e("../lib/dom"),s=e("../lib/event"),l=e("../lib/function"),u=e("../lib/layout"),c=(e("../lib/constants"),e("../lib/util"),e("../player/base/event/eventtype")),p=i.extend({init:function(e,t){var r=this;this._player=e,this._eventState="",this._options=n.copy(t),this._el=this.createEl();var i=e.id;"function"==typeof e.id&&(i=e.id()),this._id=i+"_component_"+o.guid(),this._children=[],this._childIndex={},this._player.on(c.Private.UiH5Ready,function(){r.renderUI(),r.syncUI(),r.bindEvent()})}});p.prototype.renderUI=function(){u.render(this.el(),this.options()),this.el().id=this.id()},p.prototype.syncUI=function(){},p.prototype.bindEvent=function(){},p.prototype.createEl=function(e,t){return a.createEl(e,t)},p.prototype.options=function(e){return void 0===e?this._options:this._options=n.merge(this._options,e)},p.prototype.el=function(){return this._el},p.prototype._contentEl,p.prototype.player=function(){return this._player},p.prototype.contentEl=function(){return this._contentEl||this._el},p.prototype._id,p.prototype.id=function(){return this._id},p.prototype.getId=function(){return this._id},p.prototype.addChild=function(e,t){var r;if("string"==typeof e){if(!this._player.UI[e])return;r=new this._player.UI[e](this._player,t)}else r=e;if(this._children.push(r),"function"==typeof r.id&&(this._childIndex[r.id()]=r),"function"==typeof r.el&&r.el()){var i=r.el();i.id=r.id(),this.contentEl().appendChild(i)}return r},p.prototype.removeChild=function(e){if(e&&this._children){for(var t=!1,r=this._children.length-1;r>=0;r--)if(this._children[r]===e){t=!0,this._children.splice(r,1);break}if(t){this._childIndex[e.id]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},p.prototype.initChildren=function(){var e,t,r,i,o;if(e=this,t=this.options().children)if(n.isArray(t))for(var a=0;a<t.length;a++)"string"==typeof(r=t[a])?(i=r,o={}):(i=r.name,o=r),e.addChild(i,o);else n.each(t,function(t,r){!1!==r&&e.addChild(t,r)})},p.prototype.on=function(e,t){return s.on(this._el,e,l.bind(this,t)),this},p.prototype.off=function(e,t){return s.off(this._el,e,t),this},p.prototype.one=function(e,t){return s.one(this._el,e,l.bind(this,t)),this},p.prototype.trigger=function(e,t){return t&&(this._el.paramData=t),this._eventState=e,s.trigger(this._el,e),this},p.prototype.off=function(e){return s.off(this._el,e),this},p.prototype.addClass=function(e){return a.addClass(this._el,e),this},p.prototype.removeClass=function(e){return a.removeClass(this._el,e),this},p.prototype.show=function(){return this._el.style.display="block",this},p.prototype.hide=function(){return this._el.style.display="none",this},p.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var e=this._children.length-1;e>=0;e--)this._children[e].destroy&&this._children[e].destroy();this.children_=null,this.childIndex_=null,this.off(),this._el.parentNode&&this._el.parentNode.removeChild(this._el),o.removeData(this._el),this._el=null},t.exports=p},{"../lib/constants":17,"../lib/data":19,"../lib/dom":20,"../lib/event":21,"../lib/function":22,"../lib/layout":24,"../lib/object":25,"../lib/oo":26,"../lib/util":31,"../player/base/event/eventtype":36}],77:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),n=e("../../player/base/event/eventtype"),a=e("../../player/base/plugin/status"),s=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-big-play-btn")},bindEvent:function(){var e=this;this._player.on(n.Player.Play,function(){e.addClass("playing"),o.css(e.el(),"display","none")}),this._player.on(n.Player.Pause,function(){e.removeClass("playing");var t=this._player._status;t!=a.ended&&t!=a.error&&o.css(e.el(),"display","block")}),this.on(n.Private.Click,function(){e._player.paused()&&(e._player.play(),o.css(e.el(),"display","none"))}),this._player.on(n.Private.Play_Btn_Show,function(){e.removeClass("playing"),o.css(e.el(),"display","block")}),this._player.on(n.Private.Play_Btn_Hide,function(){e.removeClass("playing"),o.css(e.el(),"display","none")})}});t.exports=s},{"../../lib/dom":20,"../../player/base/event/eventtype":36,"../../player/base/plugin/status":59,"../component":76}],78:[function(e,t,r){var i=e("../component"),o=e("../../player/base/event/eventtype"),n=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-controlbar-bg"></div>',e},onEvent:function(){var e=this.player(),t=e.options(),r=this;this.timer=null;var i=t.controlBarVisibility;1==t.controlBarForOver&&(i="hover"),"hover"==i?(r.hide(),e.on(o.Private.MouseOver,function(){r._show()}),e.on(o.Private.MouseOut,function(){r.hide(),e.trigger(o.Private.HideBar)})):"click"==i?(e.on(o.Private.Click,function(t){e._isError||(t.preventDefault(),t.stopPropagation(),r._show(),r._hide())}),e.on(o.Player.Ready,function(){r._hide()}),e.on(o.Private.TouchStart,function(){r._show()}),e.on(o.Private.TouchMove,function(){r._show()}),e.on(o.Private.TouchEnd,function(){r._hide()})):r._show()},_show:function(){this.show(),this._player.trigger(o.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var e=this,t=this.player().options().showBarTime;this.timer=setTimeout(function(){e.hide(),e._player.trigger(o.Private.HideBar)},t)}});t.exports=n},{"../../player/base/event/eventtype":36,"../component":76}],79:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),n=e("../../player/base/event/eventtype"),a=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-cover")},createEl:function(){var e=i.prototype.createEl.call(this,"div"),t=this.options().cover;return t&&(e.style.backgroundImage="url("+t+")"),e},_hide:function(e){var t=this,r=document.querySelector("#"+t.id()+" .prism-cover");r&&o.css(r,"display","none")},_show:function(e){var t=this,r=document.querySelector("#"+t.id()+" .prism-cover");r&&o.css(r,"display","block")},bindEvent:function(){var e=this;e._player.on(n.Private.Cover_Show,e._show),e._player.on(n.Private.Cover_Hide,e._hide)}});t.exports=a},{"../../lib/dom":20,"../../player/base/event/eventtype":36,"../component":76}],80:[function(e,t,r){var i=e("../component"),o=e("../../lib/util"),n=e("../../lib/dom"),a=e("../../lib/event"),s=e("../../lib/ua"),l=e("../../lang/index"),u=e("../../player/base/event/eventtype"),c=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className?t.className:"prism-ErrorMessage",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh' type='button'>"+l.get("Refresh_Text")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+l.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code：</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid：</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid：</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId：</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+l.get("Play_DateTime")+"：</span><span class='info-content'></span></p></div>",e},bindEvent:function(){var e=this;e._player.on(u.Private.Error_Show,function(t){var r=e._player.getMonitorInfo();e._show(t,r)}),e._player.on(u.Private.Error_Hide,e._hide);t=document.querySelector("#"+e.id()+" .prism-button-refresh");if(a.on(t,"click",function(){location.reload(!0)}),s.IS_MOBILE){var t=document.querySelector("#"+e.id()+" .prism-detect-info");n.addClass(t,"prism-width90")}},_show:function(e,t){var r=e.paramData,i="",a="";r.mediaId&&(i=r.mediaId),t.vu&&(a=decodeURIComponent(t.vu));var s=document.querySelector("#"+this.id()+" .prism-button-orange"),u="http://player.alicdn.com/detection.html?from=h5&vid="+i+"&source="+a+"&pd="+t.pd+"&vt="+t.vt+"&tt="+t.tt+"&uuid="+t.uuid+"&av="+t.av+"&bi="+t.bi+"&md="+t.md+"&vu="+a+"&lang="+l.getCurrentLanguage();s.href=u;var c=r.display_msg||r.error_msg;document.querySelector("#"+this.id()+" .prism-error-content p").innerText=c,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=r.error_code;var p=document.querySelector("#"+this.id()+" .vid");r.mediaId?(n.css(p,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=r.mediaId):n.css(p,"display","none"),document.querySelector("#"+this.id()+" .uuid .info-content").innerText=r.uuid,document.querySelector("#"+this.id()+" .requestId .info-content").innerText=r.requestId,document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=o.formatDate(new Date,"yyyy-MM-dd HH:mm:ss");var d=document.querySelector(".prism-ErrorMessage");n.css(d,"display","block"),this._player.trigger("play_btn_hide")},_hide:function(){var e=document.querySelector(".prism-ErrorMessage");n.css(e,"display","none")}});t.exports=c},{"../../lang/index":14,"../../lib/dom":20,"../../lib/event":21,"../../lib/ua":29,"../../lib/util":31,"../../player/base/event/eventtype":36,"../component":76}],81:[function(e,t,r){var i=e("../component"),o=e("../../player/base/event/eventtype"),n=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on(o.Player.RequestFullScreen,function(){e.addClass("fullscreen")}),this._player.on(o.Player.CancelFullScreen,function(){e.removeClass("fullscreen")}),this.on("click",function(){e._player.fullscreenService.getIsFullScreen()?e._player.fullscreenService.cancelFullScreen():e._player.fullscreenService.requestFullScreen()})}});t.exports=n},{"../../player/base/event/eventtype":36,"../component":76}],82:[function(e,t,r){"use strict";var i=e("../component"),o=(e("../../lib/dom"),e("../../player/base/event/eventtype")),n=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-hide")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="circle"></div> <div class="circle1"></div>',e},_loading_hide:function(e){var t=this,r=document.querySelector("#"+t.id()+" .prism-loading");r&&(r.className="prism-hide")},_loading_show:function(e){var t=this,r=document.querySelector("#"+t.id()+" .prism-hide");r&&(r.className="prism-loading")},bindEvent:function(){var e=this;e._player.on(o.Private.H5_Loading_Show,e._loading_show),e._player.on(o.Private.H5_Loading_Hide,e._loading_hide)}});t.exports=n},{"../../lib/dom":20,"../../player/base/event/eventtype":36,"../component":76}],83:[function(e,t,r){var i=e("../component"),o=(e("../../lib/util"),e("../../lib/dom")),n=(e("../../lib/event"),e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),a=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className?t.className:"prism-info-display",this.addClass(this.className)},bindEvent:function(){var e=this;e._player.on(n.Private.Info_Show,function(t){var r=document.querySelector("#"+e.getId()),i=t.paramData;i&&(void 0!==i.text&&i.text?(r.innerText=i.text,void 0!==i.duration&&i.duration&&setTimeout(function(){o.css(r,"display","none")},i.duration)):r.innerText=i,o.css(r,"display","block"))}),e._player.on(n.Private.Info_Hide,function(t){var r=document.querySelector("#"+e.getId());o.css(r,"display","none")})}});t.exports=a},{"../../lang/index":14,"../../lib/dom":20,"../../lib/event":21,"../../lib/ua":29,"../../lib/util":31,"../../player/base/event/eventtype":36,"../component":76}],84:[function(e,t,r){var i=e("../component"),o=(e("../../lib/util"),i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className?t.className:"prism-live-display",this.addClass(this.className)}}));t.exports=o},{"../../lib/util":31,"../component":76}],85:[function(e,t,r){var i=e("../component"),o=e("../../player/base/event/eventtype"),n=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-play-btn")},bindEvent:function(){var e=this;this._player.on(o.Player.Play,function(){e.addClass("playing")}),this._player.on(o.Player.Pause,function(){e.removeClass("playing")}),this.on(o.Private.Click,function(){e._player.paused()?(e._player.play(),e.addClass("playing")):(e._player.pause(),e.removeClass("playing"))})}});t.exports=n},{"../../player/base/event/eventtype":36,"../component":76}],86:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),n=e("../../lib/event"),a=e("../../lib/ua"),s=e("../../lib/function"),l=e("../../lang/index"),u=e("../../player/base/event/eventtype"),c=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className?t.className:"prism-progress",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"></div>',e},bindEvent:function(){var e=this;this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.controlNode=document.getElementsByClassName("prism-controlbar")[0],n.on(this.cursorNode,"mousedown",function(t){e._onMouseDown(t)}),n.on(this.cursorNode,"touchstart",function(t){e._onMouseDown(t)}),n.on(this._el,"click",function(t){e._onMouseClick(t)}),this._player.on(u.Private.HideProgress,function(t){e._hideProgress(t)}),this._player.on(u.Private.CancelHideProgress,function(t){e._cancelHideProgress(t)}),this.bindTimeupdate=s.bind(this,this._onTimeupdate),this._player.on(u.Player.TimeUpdate,this.bindTimeupdate),a.IS_IPAD?this.interval=setInterval(function(){e._onProgress()},500):this._player.on(u.Video.Progress,function(){e._onProgress()})},_hideProgress:function(e){n.off(this.cursorNode,"mousedown"),n.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;n.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return"function"==typeof this._player.canSeekable&&(t=this._player.canSeekable(e)),t},_onMouseClick:function(e){for(var t=this.el().offsetLeft,r=this.el();r=r.offsetParent;)t+=r.offsetLeft;var i=(e.touches?e.touches[0].pageX:e.pageX)-t,o=this.el().offsetWidth,n=this._player.getDuration()?i/o*this._player.getDuration():0;n<0&&(n=0),n>this._player.getDuration()&&(n=this._player.getDuration()),this._canSeekable(n)?(this._player.trigger(u.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._player.seek(n),this._player.trigger(u.Private.EndStart,{toTime:n})):this._player.trigger(u.Private.Info_Show,{text:l.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(e){var t=this;e.preventDefault(),this._player.trigger(u.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),n.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),n.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),n.on(this._player.tag,"mouseup",function(e){t._onPlayerMouseUp(e)}),n.on(this._player.tag,"touchend",function(e){t._onPlayerMouseUp(e)}),n.on(this.controlNode,"mouseup",function(e){t._onControlBarMouseUp(e)}),n.on(this.controlNode,"touchend",function(e){t._onControlBarMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),n.off(this.controlNode,"mousemove"),n.off(this.controlNode,"touchmove"),n.off(this._player.tag,"mouseup"),n.off(this._player.tag,"touchend"),n.off(this.controlNode,"mouseup"),n.off(this.controlNode,"touchend");var t=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration();this._player.getDuration(),this._player.seek(t),this._player.trigger(u.Private.EndStart,{toTime:t})},_onControlBarMouseUp:function(e){e.preventDefault(),n.off(this.controlNode,"mousemove"),n.off(this.controlNode,"touchmove"),n.off(this._player.tag,"mouseup"),n.off(this._player.tag,"touchend"),n.off(this.controlNode,"mouseup"),n.off(this.controlNode,"touchend");var t=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration();this._player.getDuration(),this._player.seek(t),this._player.trigger(u.Private.EndStart,{toTime:t})},_onPlayerMouseUp:function(e){e.preventDefault(),n.off(this.controlNode,"mousemove"),n.off(this.controlNode,"touchmove"),n.off(this._player.tag,"mouseup"),n.off(this._player.tag,"touchend"),n.off(this.controlNode,"mouseup"),n.off(this.controlNode,"touchend");var t=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration();this._player.getDuration(),isNaN(t)||this._player.seek(t),this._player.trigger(u.Private.EndStart,{toTime:t})},_onMouseMove:function(e){e.preventDefault();for(var t=this.el().offsetLeft,r=this.el();r=r.offsetParent;)t+=r.offsetLeft;var i=(e.touches?e.touches[0].pageX:e.pageX)-t,o=this.el().offsetWidth,n=this._player.getDuration()?i/o*this._player.getDuration():0;n<0&&(n=0),n>this._player.getDuration()&&(n=this._player.getDuration()),this._player._hls||(this._player.seek(n),this._player.play()),this._updateProgressBar(this.playedNode,n),this._updateCursorPosition(n)},_onTimeupdate:function(e){this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(u.Private.UpdateProgressBar,{time:this._player.getCurrentTime()})},_onProgress:function(e){this._player.getDuration()&&this._player.getBuffered().length>=1&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){if(1!=this._player._switchSourcing){var r=this._player.getDuration()?t/this._player.getDuration():0;e&&o.css(e,"width",100*r+"%")}},_updateCursorPosition:function(e){if(1!=this._player._switchSourcing){var t=this._player.getDuration()?e/this._player.getDuration():0,r=1-1.5*this.cursorNode.clientWidth/this.el().clientWidth;t>r&&(t=r),this.cursorNode&&o.css(this.cursorNode,"left",100*t+"%")}}});t.exports=c},{"../../lang/index":14,"../../lib/dom":20,"../../lib/event":21,"../../lib/function":22,"../../lib/ua":29,"../../player/base/event/eventtype":36,"../component":76}],87:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),n=e("../../lib/util"),a=e("../../lang/index"),s=e("../../player/base/event/eventtype"),l=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-snapshot-btn")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerText=a.get("Snapshot"),e},bindEvent:function(){var e=this;this._player.on(s.Private.Snapshot_Hide,function(){o.css(e._el,"display","none")}),this.on("click",function(){e.trigger(s.Player.Snapshoting);var t=document.createElement("canvas"),r=e._player.tag,i=r.videoWidth,o=r.videoHeight,a=e._player._getSanpshotMatric();t.width=a.width||i,t.height=a.height||o;var l=e._player.getCurrentTime(),c=t.getContext("2d");c.drawImage(r,0,0,i,o),u(c,e._player.getOptions());var p=t.toDataURL("image/jpeg",a.rate||1),d=p.substr(p.indexOf(",")+1),h=n.toBinary(d);e.trigger(s.Player.Snapshoted,{time:l,base64:p,binary:h})})}}),u=function(e,t){var r=t.snapshotWatermark;r&&r.text&&(e.font=r.font,r.fillColor&&(e.fillStyle=r.fillColor,e.fillText(r.text,r.left,r.top)),r.strokeColor&&(e.strokeStyle=r.strokeColor,e.strokeText(r.text,r.left,r.top)),e.stroke())};t.exports=l},{"../../lang/index":14,"../../lib/dom":20,"../../lib/util":31,"../../player/base/event/eventtype":36,"../component":76}],88:[function(e,t,r){var i=e("../component"),o=e("../../lib/object"),n=e("../../lib/util"),a=(e("../../lib/cookie"),e("../../lib/dom")),s=e("../../lib/event"),l=e("../../lib/constants"),u=e("../../lang/index"),c=i.extend({init:function(e,t){this._hasGeneratedList=!1,this._previousSelection=null,this._isShown=!1,i.call(this,e,t),this.className=t.className?t.className:"prism-speed-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="current-speed-selector" key="1">'+u.get("Speed_1X_Text")+'</div><ul class="speed-selector-list"></ul>',e},bindEvent:function(){var e=this,t=document.querySelector("#"+e.id()+"  .current-speed-selector"),r=document.querySelector("#"+e.id()+" .speed-selector-list");s.on(r,"mouseleave",function(){a.css(r,"display","none"),e._isShown=!1}),s.on(t,"click",function(){if(e._hasGeneratedList)a.css(r,"display",0==e._isShown?"block":"none"),e._isShown=!e._isShown;else{var i=l.SpeedLevels;o.each(i,function(i,o){var n=a.createEl.call(e,"li",{key:i.key,text:i.text});t.getAttribute("key")==i.key&&(a.addClass(n,"current"),e._previousSelection=n);var s=a.createEl.call(e,"span",{key:i.key,text:i.text});s.innerText=i.text,n.appendChild(s),r.appendChild(n)}),e._hasGeneratedList=!0,a.css(r,"display","block")}}),s.on(r,"click",function(t){var i=t.srcElement?t.srcElement:t.target,o=i.key,s=i.text;void 0!==s&&(e._previousSelection&&a.removeClass(e._previousSelection,"current"),e._previousSelection=i,a.addClass(i,"current"),document.querySelector("#"+e.id()+" .current-speed-selector").innerText=s,e._player.setSpeed(o),n.delayHide(r))})}});t.exports=c},{"../../lang/index":14,"../../lib/constants":17,"../../lib/cookie":18,"../../lib/dom":20,"../../lib/event":21,"../../lib/object":25,"../../lib/util":31,"../component":76}],89:[function(e,t,r){var i=e("../component"),o=e("../../lib/object"),n=e("../../lib/util"),a=e("../../lib/cookie"),s=e("../../lib/dom"),l=e("../../lib/event"),u=e("../../lib/constants"),c=e("../../lang/index"),p=e("../../player/base/event/eventtype"),d=i.extend({init:function(e,t){this._hasGeneratedList=!1,this._previousSelection=null,this._isShown=!1,i.call(this,e,t),this.className=t.className?t.className:"prism-stream-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="current-stream-selector">'+c.get("Quality_SD_Text")+'</div><ul class="stream-selector-list"></ul>',e},showTip:function(e,t){this._player.trigger(p.Private.Info_Show,e);var r=this;setTimeout(function(){r._player.trigger(p.Private.Info_Hide,e)},t)},bindEvent:function(){var e=this,t=document.querySelector("#"+e.id()+"  .current-stream-selector"),r=document.querySelector("#"+e.id()+" .stream-selector-list");l.on(r,"mouseleave",function(){s.css(r,"display","none"),e._isShown=!1}),this._player.on(p.Private.QualityChange,function(t){var r=document.querySelectorAll("#"+e.id()+" .stream-selector-list li"),i="",o="";if(r.length>e._player._currentPlayIndex){var n=r[e._player._currentPlayIndex];i=c.get("Quality_The_Url"),e._previousSelection&&(s.removeClass(e._previousSelection,"current"),i=e._previousSelection.text),s.addClass(n,"current"),o=n.text,document.querySelector("#"+e.id()+" .current-stream-selector").innerText=o,e._previousSelection=n}else if(e._player._currentPlayIndex>0){var a=e._player._urls,l=e._player._currentPlayIndex;i=a[l-1].desc,o=a[l].desc}e.showTip(i+t.paramData+o,1e3)}),this._player.on(p.Private.SourceLoaded,function(t){var r=t.paramData.desc,i=document.querySelector("#"+e.id()+" .current-stream-selector");i.innerText=r,s.css(i,"display","block")}),l.on(t,"click",function(){if(e._hasGeneratedList)s.css(r,"display",0==e._isShown?"block":"none"),e._isShown=!e._isShown;else{var t=e._player._urls;t.length>1&&o.each(t,function(t,i){var o=s.createEl.call(e,"li",{url:t.Url,index:i,text:t.desc});e._player._currentPlayIndex==i&&(s.addClass(o,"current"),e._previousSelection=o);var n=s.createEl.call(e,"span",{url:t.Url,index:i,text:t.desc});n.innerText=t.desc,o.appendChild(n),r.appendChild(o),e._hasGeneratedList=!0,s.css(r,"display","block")})}}),l.on(r,"click",function(t){var i=t.srcElement?t.srcElement:t.target,o=i.url,l=i.index,p=i.text;void 0!==p&&(e._player._switchSourcing=!0,e._previousSelection&&s.removeClass(e._previousSelection,"current"),e._previousSelection=i,s.addClass(i,"current"),e._player._currentPlayIndex=l,a.set(u.SelectedStreamLevel,e._player._urls[l].definition,365),e._player._urls.length>l&&(o=e._player._urls[l].Url),document.querySelector("#"+e.id()+" .current-stream-selector").innerText=p,e._player.loadByUrl(o,e._player.getCurrentTime(),!e._player.paused()),s.css(r,"display","none"),e._isShown=!1,e.showTip(c.get("Quality_Change_Text")+p,2e3),setTimeout(function(){e._player._switchSourcing=!1}),n.delayHide(r))})}});t.exports=d},{"../../lang/index":14,"../../lib/constants":17,"../../lib/cookie":18,"../../lib/dom":20,"../../lib/event":21,"../../lib/object":25,"../../lib/util":31,"../../player/base/event/eventtype":36,"../component":76}],90:[function(e,t,r){var i=e("../component"),o=e("../../lib/util"),n=e("../../player/base/event/eventtype"),a=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className?t.className:"prism-time-display",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',e},bindEvent:function(){var e=this;this._player.on(n.Video.DurationChange,function(){var t=o.formatTime(e._player.getDuration());t?(document.querySelector("#"+e.id()+" .time-bound").style.display="inline",document.querySelector("#"+e.id()+" .duration").style.display="inline",document.querySelector("#"+e.id()+" .duration").innerText=t):(document.querySelector("#"+e.id()+" .duration").style.display="none",document.querySelector("#"+e.id()+" .time-bound").style.display="none")}),this._player.on(n.Video.TimeUpdate,function(){var t=o.formatTime(e._player.getCurrentTime());document.querySelector("#"+e.id()+" .current-time")&&(t?(document.querySelector("#"+e.id()+" .current-time").style.display="inline",document.querySelector("#"+e.id()+" .current-time").innerText=t):document.querySelector("#"+e.id()+" .current-time").style.display="none")})}});t.exports=a},{"../../lib/util":31,"../../player/base/event/eventtype":36,"../component":76}],91:[function(e,t,r){var i=e("../component"),o=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-volume")},bindEvent:function(){var e=this;this.on("click",function(){e._player.muted()?(e._player.unMute(),e.removeClass("mute")):(e._player.mute(),e.addClass("mute"))})}});t.exports=o},{"../component":76}],92:[function(e,t,r){t.exports={H5Loading:e("./component/h5-loading"),bigPlayButton:e("./component/big-play-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume"),streamButton:e("./component/stream-selector"),speedButton:e("./component/speed-selector"),snapshot:e("./component/snapshot"),errorDisplay:e("./component/error-display"),infoDisplay:e("./component/info-display")}},{"./component/big-play-button":77,"./component/controlbar":78,"./component/error-display":80,"./component/fullscreen-button":81,"./component/h5-loading":82,"./component/info-display":83,"./component/live-display":84,"./component/play-button":85,"./component/progress":86,"./component/snapshot":87,"./component/speed-selector":88,"./component/stream-selector":89,"./component/time-display":90,"./component/volume":91}]},{},[9]);