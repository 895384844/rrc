function addCookie(e,a,i){var t=e+"="+escape(a);if(i>0){var s=new Date,o=3600*i*1e3;s.setTime(s.getTime()+o),t+="; expires="+s.toGMTString()}document.cookie=t}function alertHide(){$(".alertBox .closed").on("click",function(){$(this).parents(".alertBox").hasClass("show")&&$(this).parents(".alertBox").removeClass("show"),$(this).parents(".alertBox").hide()}),$(".alertBox .cancels").on("click",function(){$(this).parents(".alertBox").hasClass("show")&&$(this).parents(".alertBox").removeClass("show"),$(this).parents(".alertBox").hide()})}function alertError(e){}function hashPick(){var e=window.location.hash;if("undefined"!==e.split("/")[2]&&""!==e.split("/")[2]&&void 0!==e.split("/")[2])var a=e.split("/")[2];"plan"==a?($(".colist li").eq(0).addClass("active"),$(".colist li").eq(0).siblings("li").removeClass("active")):"course"==a?($(".colist li").eq(1).addClass("active"),$(".colist li").eq(1).siblings("li").removeClass("active")):"test"==a?($(".colist li").eq(2).addClass("active"),$(".colist li").eq(2).siblings("li").removeClass("active")):"info"==a?($(".colist li").eq(3).addClass("active"),$(".colist li").eq(3).siblings("li").removeClass("active")):"safe"==a?($(".colist li").eq(4).addClass("active"),$(".colist li").eq(4).siblings("li").removeClass("active")):"hike"==a?($(".colist li").eq(5).addClass("active"),$(".colist li").eq(5).siblings("li").removeClass("active")):"about"==a?($(".aboutS li").eq(0).addClass("active"),$(".aboutS li").eq(0).siblings("li").removeClass("active")):"contract"==a?($(".aboutS li").eq(1).addClass("active"),$(".aboutS li").eq(1).siblings("li").removeClass("active")):"question"==a?($(".aboutS li").eq(2).addClass("active"),$(".aboutS li").eq(2).siblings("li").removeClass("active")):"company"==a?($(".aboutS li").eq(3).addClass("active"),$(".aboutS li").eq(3).siblings("li").removeClass("active")):"disclaimer"==a?($(".aboutS li").eq(4).addClass("active"),$(".aboutS li").eq(4).siblings("li").removeClass("active")):"order"==a?$(".o_list li").eq(0).addClass("oactive").siblings("li").removeClass("oactive"):"consumption"==a?$(".o_list li").eq(1).addClass("oactive").siblings("li").removeClass("oactive"):"profit"==a&&$(".o_list li").eq(2).addClass("oactive").siblings("li").removeClass("oactive"),$("#tabB a").on("click",function(){$(this).parent("li").addClass("active"),$(this).parent("li").siblings("li").removeClass("active")}),$(document).keydown(function(e){13==e.keyCode&&hashPick()})}function detectOS(){var e=navigator.userAgent,a="Win32"==navigator.platform||"Windows"==navigator.platform,i="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(i)return"Mac";if("X11"==navigator.platform&&!a&&!i)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(a){if(e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1)return"Win2000";if(e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1)return"WinXP";var t=e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1;if(t)return"Win2003";if(t=e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1)return"WinVista";if(t=e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1)return"Win7"}return"None"}function getParam(e){paramValue="",isFound=!1;var a=window.location.hash.indexOf("?"),t=window.location.hash.substring(a);if(0==t.indexOf("?")&&t.indexOf("=")>1)for(arrSource=unescape(t).substring(1,t.length).split("&"),i=0;i<arrSource.length&&!isFound;)arrSource[i].indexOf("=")>0&&arrSource[i].split("=")[0].toLowerCase()==e.toLowerCase()&&(paramValue=arrSource[i].split("=")[1],isFound=!0),i++;return""==paramValue&&(paramValue=null),paramValue}function getSearch(e){paramValue="",isFound=!1;var a=window.location.search.indexOf("?"),t=window.location.search.substring(a);if(0==t.indexOf("?")&&t.indexOf("=")>1)for(arrSource=unescape(t).substring(1,t.length).split("&"),i=0;i<arrSource.length&&!isFound;)arrSource[i].indexOf("=")>0&&arrSource[i].split("=")[0].toLowerCase()==e.toLowerCase()&&(paramValue=arrSource[i].split("=")[1],isFound=!0),i++;return""==paramValue&&(paramValue=null),paramValue}function millsTrans(e){var a=parseInt(e)+"秒";if(parseInt(e)>60){var i=parseInt(e)%60,t=parseInt(e/60);if(a=t+"分"+i+"秒",t>=60){t=parseInt(e/60)%60;var s=parseInt(parseInt(e/60)/60);a=s+"小时"+t+"分"+i+"秒",s>24&&(s=parseInt(parseInt(e/60)/60)%24,a=parseInt(parseInt(parseInt(e/60)/60)/24)+"天"+s+"小时"+t+"分"+i+"秒")}}return"null"!=e&&null!=e&&"undefined"!=e||(a="0秒"),a}function gapH(){var e=$(window).height()-$(".header").height()-$(".fotter").outerHeight(!0)+"px";$("#wrapBox").css({height:e}),$(window).on("resize",function(){gapH()})}function userGapH(){var e=$(window).height()-$(".mainCpn").height()-$(".fot").outerHeight(!0)+"px";$("#userBox").css({height:e}),$(window).on("resize",function(){userGapH()})}function getScrollTop(){var e=0,a=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(a=document.documentElement.scrollTop),e-a>0?e:a}function getScrollHeight(){var e=0,a=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(a=document.documentElement.scrollHeight),e-a>0?e:a}function getWindowHeight(){return"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}function clearAllCookie(){var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var a=e.length;a--;)document.cookie=e[a]+"=0;expires="+new Date(0).toUTCString()}function linkFn(){$("link").each(function(e,a){if("link"==$(this).prop("tagName").toLowerCase()){var i=$(this).attr("href").split("?")[0];"css/style.css"!=i&&"css/reset.css"!=i&&"css/new.css"!=i||$(this).attr("href",i+"?v=1.0")}})}function patch(e,a){return e.split(a).length-1}function operationImg(e,a){a.files&&a.files[0]?previewImg(e,a):previewImgIE(e,a)}function previewImg(e,a){var i=a.files[0];if(e.hasClass("addFile")&&$("#corsePoster").val(i.name),1==checkSize(i,e)){var t=new FileReader;t.onload=function(a){console.log(a),addImgHtml(e,a.target.result)},t.readAsDataURL(i)}}function uuid(){for(var e=[],a=0;a<36;a++)e[a]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}function checkSize(e,a){var i,t,s,o;return!!e&&(i=Math.ceil(e.size/1024),t=e.type.split("/")[1],a&&(a.hasClass("addFile")?$("#corseType").val(t):$("#imgStr").val(t)),console.log(e),i>102400?(M.dialog1=jqueryAlert({content:"您选择的图片大小偏大",closeTime:1e3,modal:!0}),s=!1):s=!0,-1=="gif|jpg|jpeg|png|GIF|JPG|PNG".indexOf(t)?(M.dialog1=jqueryAlert({content:"您选择的图片格式有误，请重新输入",closeTime:1e3,modal:!0}),o=!1):o=!0,1==s&&1==o)}function previewImgIE(e,a){if(a.select(),$(a).blur(),document.selection){var i=document.selection.createRange().text;if($("#imgStr").length>0&&$("#imgStr").val(i.split(".")[1]),/\.(jpg|jpeg|png|JPG|PNG|JPEG)$/.test(i)){var t=e.attr("id");if(1==$("#"+t).hasClass("uInput")){$("#"+t).find(".imgWrap").length>0&&$("#"+t).find(".imgWrap").remove();l="<div class='imgWrap'></div>";$("#"+t).append($(l)),$("#"+t).find("i").show(),$("#"+t).parents(".fli-li").find(".upFail").hide(),$("#"+t).parents(".fli-li").find(".upSucc").css("display","inline-block"),$(".imgWrap").css({width:"58px",height:"58px",display:"inline-block","*display":"inline","*zoom":1});var s=uuid(),o=uuid(),r=new Object,n=new Object;"uInput1"==t?(jgZhaoForm(s),r.key=s,commonParm(r),setTimeout(function(){jsonAjax(InterFace.getImgURL,r,getImgFunc)},500)):"uInput2"==t&&(jgErForm(o),n.key=o,commonParm(n),setTimeout(function(){jsonAjax(InterFace.getImgURL,n,getImgEr)},500)),$("#"+t).find(".imgWrap").css("filter",'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod = scale,src="'+i+'")')}else if("ieAva"==e.attr("id")){e.find(".imgWrap").length>0&&e.find(".imgWrap").remove();var l="<div class='imgWrap'></div>";e.html($(l)),$(".imgWrap").css({width:"137px",height:"137px",display:"inline-block","*display":"inline","*zoom":1}),e.find(".imgWrap").css("filter",'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod = scale,src="'+i+'")')}}else M.dialog1=jqueryAlert({content:"您选择的图片格式有误，请重新选择",closeTime:1e3,modal:!0})}}function jumpUrl(e){var a=window.opener?window.opener.top:window;try{a.document.location.replace(e)}catch(i){a.location.replace(e)}a!==window&&(window.open("","_parent",""),window.close())}function jumpPage(e){var a=window.opener?window.opener.top:window;try{a.document.location.replace(e),a.getUser()}catch(e){a.getUser()}a!==window&&(window.open("","_parent",""),window.close())}function openwindow(e){var a=($(window).width()-500)/2;return window.open(e,"wxChannel","height=500,width=500,top=150,left="+a+",toolbar=no,menubar=no,scrollbars=no,resizable=no,location=0,status=no")}function getVersion(){return"?v=2.0"}function pdGwc(){if(null==getCookie("token")||"undefined"==getCookie("token")||void 0==getCookie("token")||""==getCookie("token"))if(void 0!==getCookie("addCart")&&"undefined"!==getCookie("addCart")&&""!==getCookie("addCart")&&null!==getCookie("addCart")){var e=new Array,a=(e=JSON.parse(getCookie("addCart"))).length;$(".js-cart-num").text(a).show(),$(".js-incart-num").text(a),$(".cart-wrap .clear-cart").hide(),$(".cart-wrap .cart-wrap-box").show();var i="";$.each(e,function(e,a){a.corId==getSearch("id")&&$(".addcart").css("cursor","default").unbind("click"),i+=' <li class="clearfix js-item" id='+a.corId+'><a href="lessoninfo_fee.html?id='+a.corId+'"><img class="fl" src="'+a.corImg+'"></a><div class="content-box fl"><a href="" target="_blank"><h3>'+a.corname+'</h3></a><p class="clearfix"><span class="price fl">￥'+a.curprice+'</span><span class="del fr js-close" onclick="delChapter(this)">删除</span></p></div></li>'}),$("#js-card-ul ul").html(i)}else $(".js-cart-num").hide(),$(".js-incart-num").text("0"),$(".cart-wrap .clear-cart").show(),$(".cart-wrap .cart-wrap-box").hide(),$(".addcart").css("cursor","pointer").bind("click");else{var t=new Object;commonParm(t),jsonAjax(InterFace.queryGwclist,t,queryFn)}}function queryFn(e){console.log(e);var a=window.location.pathname.split("/")[window.location.pathname.split("/").length-1];if("200"==e.errCode){if((i=e.list.length)>0){$(".js-cart-num").text(i).show(),$(".js-incart-num").text(i),$(".cart-wrap .clear-cart").hide(),$(".cart-wrap .cart-wrap-box").show();s="";$.each(e.list,function(e,a){s+=' <li class="clearfix js-item" id='+a.coursewareid+' cartId="'+a.cartid+'"><a href="lessoninfo_fee.html?id='+a.coursewareid+'"><img class="fl" src="'+a.coursewareMinUrl+'"></a><div class="content-box fl"><a href="" target="_blank"><h3>'+a.coursewareName+'</h3></a><p class="clearfix"><span class="price fl">￥'+a.money+'</span><span class="del fr js-close" onclick="delChapter(this)">删除</span></p></div></li>'}),$("#js-card-ul ul").html(s)}else $(".js-cart-num").text("0").hide(),$(".cart-wrap .clear-cart").show(),$(".cart-wrap .cart-wrap-box").hide();if("confirmorder.html"==a);else if("gwc.html"==a){var i=e.list.length;$(".js-coures-num").text(i),$(".js-choice-num").text(i);var t=0,s="";i>0?($.each(e.list,function(e,a){s+='<div class="item clearfix js-item-cart" id='+a.coursewareid+' data-price="'+a.money+'" cartId="'+a.cartid+'"><div class="item-1"><i class="js-check check"></i></div><div class="item-2 clearfix"><a href="lessonInfo_fee.html?id='+a.coursewareid+'" target="_blank" class="img-box l"><img src="'+a.coursewareMinUrl+'" width="160" height="90"></a><dl class="l has-package"><a href=""lessonInfo_fee.html?id='+a.corId+'"" target="_blank"><dt>'+a.coursewareName+'</dt></a><p class="package-item js-package-item"></p></dl></div><div class="item-3"><div class="price clearfix"> <em>￥</em><span>'+a.money+'</span></div></div><div class="item-4"><i class="js-close-cart">删除</i></div></div>',t+=Number(a.money)}),t=parseFloat(t).toFixed(2),$(".jsAltogether").text(t),$("#js-cart-body-table .catitemList").html(s),cksomething(),delSgwc(),$("#cartBody .cathasData").show(),loadig.hide("loadOrder")):($("#cartBody .cathasData").hide(),$(".catNodata").show())}}else"306"==e.errCode?($(".js-cart-num").text("0").hide(),"gwc.html"==a&&($("#cartBody .cathasData").hide(),$("#cartBody .catNodata").show(),loadig.hide("loadOrder"))):"400"==e.errCode&&$(".js-cart-num").text("0").hide()}function delChapter(e){$(e).parents(".js-item").remove();var a=$(e).parents(".js-item").attr("id");if(null==getCookie("token")||"undefined"==getCookie("token")||void 0==getCookie("token")||""==getCookie("token")){var i=new Array;i=JSON.parse(getCookie("addCart"));console.log(i),$.each(i,function(e,t){console.log(t),"undefined"!==t&&void 0!==t&&t.corId==a?i.splice(e,1):i=i});var t=i.length;t>0?(addCookie("addCart",JSON.stringify(i),0),$(".js-cart-num").text(t).show(),$(".js-incart-num").text(t),$(".cart-wrap .clear-cart").hide(),$(".cart-wrap .cart-wrap-box").show()):($(".js-cart-num").hide(),$(".js-incart-num").text(t),$(".cart-wrap .clear-cart").show(),$(".cart-wrap .cart-wrap-box").hide(),delCookie("addCart"))}else{var s=$("#js-card-ul").find(".js-item").length;console.log(s),0==s?($(".js-cart-num").hide(),$(".js-incart-num").text("0"),$(".cart-wrap .clear-cart").show(),$(".cart-wrap .cart-wrap-box").hide()):($(".js-cart-num").text(s).show(),$(".js-incart-num").text(s),$(".cart-wrap .clear-cart").hide(),$(".cart-wrap .cart-wrap-box").show());var o=$(e).parents(".js-item").attr("cartId"),r=new Object;r.cartId=o,commonParm(r),console.log(r),jsonAjax(InterFace.delGwclist,r,delSigl)}}function delSigl(e){if("200"==e.errCode){var a=new Object;commonParm(a),jsonAjax(InterFace.queryGwclist,a,queryFn)}}function confirmGoods(){var e=getCookie("pickGoods"),a=new Object;a.cartIds=e,commonParm(a),jsonAjax(InterFace.queryCart,a,queryCartSFn)}function confirmLimit(){var e=getCookie("limitGoods"),a=new Object;a.coursewareId=e,commonParm(a),jsonAjax(InterFace.listInfo,a,queryLeson)}function queryLeson(e){if("200"==e.errCode){var a=Number(e.money).toFixed(2),i='<div class="item clearfix js-item-cart" data-price="'+e.money+'" id="'+e.coursewareId+'"><div class="item-2 clearfix"><a href="lessonInfo_fee.html?id='+e.coursewareId+'" target="_blank" class="img-box l"><img src="'+e.coursewareurl+'" width="160" height="90"></a><dl class="l has-package"><a href=""lessonInfo_fee.html?id='+e.coursewareId+'"" target="_blank"><dt class="coursewareName">'+e.coursewarename+'</dt></a><p class="package-item js-package-item"></p></dl></div><div class="item-3"><div class="price clearfix"> <em>￥</em><span>'+a+"</span></div></div></div>";if("confirmorder.html"==window.location.pathname.split("/")[window.location.pathname.split("/").length-1]){var t=a;$("#js-actual-price").text(t),$("#js-pay-price").text(t),$("#zcount").text("1")}$("#js-cart-body-table").prepend(i).removeClass("hide"),loadig.hide("loadOrder")}}function queryCartSFn(e){if("200"==e.errCode){var a="",i=0;e.list.length>0&&($.each(e.list,function(e,t){var s=Number(t.money).toFixed(2);a+='<div class="item clearfix js-item-cart" data-price="'+s+'" id="'+t.coursewareid+'" cartId="'+t.cartid+'"><div class="item-2 clearfix"><a href="lessonInfo_fee.html?id='+t.coursewareid+'" target="_blank" class="img-box l"><img src="'+t.coursewareMinUrl+'" width="160" height="90"></a><dl class="l has-package"><a href=""lessonInfo_fee.html?id='+t.coursewareId+'"" target="_blank"><dt class="coursewareName">'+t.coursewareName+'</dt></a><p class="package-item js-package-item"></p></dl></div><div class="item-3"><div class="price clearfix"> <em>￥</em><span>'+s+"</span></div></div></div>",i+=Number(t.money)}),"confirmorder.html"==window.location.pathname.split("/")[window.location.pathname.split("/").length-1]&&(i=parseFloat(i).toFixed(2),$("#js-actual-price").text(i),$("#js-pay-price").text(i),$("#zcount").text(e.list.length)),$("#js-cart-body-table").prepend(a).removeClass("hide")),loadig.hide("loadOrder")}}hashPick(),jQuery.extend({myTime:{CurTime:function(){return Date.parse(new Date)/1e3},DateToUnix:function(e){var a=e.split(" ",2),i=(a[0]?a[0]:"").split("-",3),t=(a[1]?a[1]:"").split(":",3);return new Date(parseInt(i[0],10)||null,(parseInt(i[1],10)||1)-1,parseInt(i[2],10)||null,parseInt(t[0],10)||null,parseInt(t[1],10)||null,parseInt(t[2],10)||null).getTime()/1e3},UnixToDate:function(e,a,i){var t=new Date(e),s="";return s+=t.getUTCFullYear()+".",s+=t.getUTCMonth()+1+".",s+=("0"+t.getUTCDate()).slice(-2),!0===a&&(s+=" "+t.getHours()+":",s+=("0"+t.getMinutes()).slice(-2)+":",s+=("0"+t.getSeconds()).slice(-2)),s},UnixToMill:function(e,a,i){"number"==typeof i&&(e=parseInt(e)+60*parseInt(i)*60);var t=new Date(1e3*e);t.getFullYear(),t.getHours();return t.getMinutes()}}});var loadig={load:function(e,a,i){var t='<div class="loading" id="'+e+'"><div class="shadow"></div><span style="" class="zeng_msgbox_layer">';"1"==a?t+='<span class="gtl_ico_clear"></span><span class="gtl_ico_loading"></span>'+i:"2"==a?t+='<span class="gtl_ico_succ"></span>恭喜，操作成功！':"3"==a?t+='<span class="gtl_ico_fail"></span>服务器出错了':"4"==a&&(t+='<span class="gtl_ico_hits"></span>您当前没有任何修改'),t+='<span class="gtl_end"></span></span></div>',$("body").append(t)},circle:function(e){var a='<div class="alertBox loadCircle" id="'+e+'"><div class="shadow"></div><div class="loading2"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>';$("body").append(a)},hide:function(e){$("#"+e).remove()}},ieTip={load:function(e,a,i){var t='<div class="loading" id="'+e+'"><div class="shadow"></div><span style="" class="zeng_msgbox_layer">';t+='<span class="gtl_ico_clear"></span><span class="gtl_ico_loading"></span>正在加载中，请稍后...',t+='<span class="gtl_end"></span></span></div>',$("body").append(t).css("overflow","hidden")},hide:function(e){$("#"+e).remove()}};$(function(){if($(".avatar")){e=0;$("#headAva").on("mouseenter",function(){$("#shop-cart").removeClass("hover"),clearTimeout(e),$(this).hasClass("hover")||$(this).addClass("hover")}).on("mouseleave",function(a){a.stopPropagation();var i=$(this);e=setTimeout(function(){i.hasClass("hover")&&i.removeClass("hover")},200)})}var e=0;$("#shop-cart").on("mouseenter",function(){$("#headAva").removeClass("hover"),clearTimeout(e),$(this).hasClass("hover")||$(this).addClass("hover")}).on("mouseleave",function(a){a.stopPropagation();var i=$(this);e=setTimeout(function(){i.hasClass("hover")&&i.removeClass("hover")},200)})}),pdGwc();