!function e(t,o,n){function i(s,a){if(!o[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=o[s]={exports:{}};t[s][0].call(c.exports,function(e){var o=t[s][1][e];return i(o||e)},c,c.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,o){t.exports={domain:"g.alicdn.com",flashVersion:"1.2.12",h5Version:"1.5.7",logReportTo:"//videocloud.cn-hangzhou.log.aliyuncs.com/logstores/player/track"}},{}],2:[function(e,t,o){var n=e("./player/player"),i=e("./player/flashplayer"),r=e("./lib/dom"),s=e("./lib/ua"),a=e("./lib/object"),l=e("./config"),u=function(e){var t,o=e.id;if("string"==typeof o){if(0===o.indexOf("#")&&(o=o.slice(1)),u.players[o])return u.players[o];t=r.el(o)}else t=o;if(!t||!t.nodeName)throw new TypeError("没有为播放器指定容器");var l=a.merge(a.copy(u.defaultOpt),e);if(s.IS_H5&&e.isLive&&(l.skinLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:20,y:25},{name:"volume",align:"tr",x:20,y:25}]}]),s.IS_IOS)for(var c=0;c<l.skinLayout.length;c++)if("controlBar"==l.skinLayout[c].name)for(var p=l.skinLayout[c],d=0;d<p.children.length;d++)if("volume"==p.children[d].name){p.children.splice(d,1);break}if(l.width&&(t.style.width=l.width),l.height)if(l.height.indexOf("%")>0){var h=window.screen.height,f=l.height.replace("%","");if(isNaN(f))t.style.height=l.height;else{var g=9*h*parseInt(f)/1e3;t.style.height=String(g%2?g+1:g)+"px"}}else t.style.height=l.height;return t.player||(s.IS_H5?new n(t,l):new i(t,l))},c=window.prismplayer=u;u.players={},u.defaultOpt={preload:!1,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"prism_aliyun",trackLog:!0,waterMark:"",isLive:!1,showBarTime:5e3,rePlay:!1,skinRes:"//"+l.domain+"/de/prismplayer-flash/"+l.flashVersion+"/atlas/defaultSkin",skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]},"function"==typeof define&&define.amd?define([],function(){return c}):"object"==typeof o&&"object"==typeof t&&(t.exports=c)},{"./config":1,"./lib/dom":5,"./lib/object":10,"./lib/ua":12,"./player/flashplayer":16,"./player/player":17}],3:[function(e,t,o){t.exports.get=function(e){for(var t=e+"",o=document.cookie.split(";"),n=0;n<o.length;n++){var i=o[n].trim();if(0==i.indexOf(t))return unescape(i.substring(t.length+1,i.length))}return""},t.exports.set=function(e,t,o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var i="expires="+n.toGMTString();document.cookie=e+"="+escape(t)+"; "+i}},{}],4:[function(e,t,o){var n=e("./object");t.exports.cache={},t.exports.guid=function(e,t){var o,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||n.length,e)for(o=0;o<e;o++)i[o]=n[0|Math.random()*t];else{var r;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",o=0;o<36;o++)i[o]||(r=0|16*Math.random(),i[o]=n[19==o?3&r|8:r])}return i.join("")},t.exports.expando="vdata"+(new Date).getTime(),t.exports.getData=function(e){var o=e[t.exports.expando];return o||(o=e[t.exports.expando]=t.exports.guid(),t.exports.cache[o]={}),t.exports.cache[o]},t.exports.hasData=function(e){var o=e[t.exports.expando];return!(!o||n.isEmpty(t.exports.cache[o]))},t.exports.removeData=function(e){var o=e[t.exports.expando];if(o){delete t.exports.cache[o];try{delete e[t.exports.expando]}catch(o){e.removeAttribute?e.removeAttribute(t.exports.expando):e[t.exports.expando]=null}}}},{"./object":10}],5:[function(e,t,o){var n=e("./object");t.exports.el=function(e){return document.getElementById(e)},t.exports.createEl=function(e,t){var o;return e=e||"div",t=t||{},o=document.createElement(e),n.each(t,function(e,t){-1!==e.indexOf("aria-")||"role"==e?o.setAttribute(e,t):o[e]=t}),o},t.exports.addClass=function(e,t){-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)},t.exports.removeClass=function(e,t){var o,n;if(-1!=e.className.indexOf(t)){for(n=(o=e.className.split(" ")).length-1;n>=0;n--)o[n]===t&&o.splice(n,1);e.className=o.join(" ")}},t.exports.getElementAttributes=function(e){var t,o,n,i,r;if(t={},o=",autoplay,controls,loop,muted,default,",e&&e.attributes&&e.attributes.length>0)for(var s=(n=e.attributes).length-1;s>=0;s--)i=n[s].name,r=n[s].value,"boolean"!=typeof e[i]&&-1===o.indexOf(","+i+",")||(r=null!==r),t[i]=r;return t},t.exports.insertFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},t.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},t.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},t.exports.css=function(e,t,o){return!!e.style&&(t&&o?(e.style[t]=o,!0):o||"string"!=typeof t?!o&&"object"==typeof t&&(n.each(t,function(t,o){e.style[t]=o}),!0):e.style[t])}},{"./object":10}],6:[function(e,t,o){function n(e,t,o,n){i.each(o,function(o){e(t,o,n)})}var i=e("./object"),r=e("./data");t.exports.on=function(e,o,s){if(i.isArray(o))return n(t.exports.on,e,o,s);var a=r.getData(e);a.handlers||(a.handlers={}),a.handlers[o]||(a.handlers[o]=[]),s.guid||(s.guid=r.guid()),a.handlers[o].push(s),a.dispatcher||(a.disabled=!1,a.dispatcher=function(o){if(!a.disabled){o=t.exports.fixEvent(o);var n=a.handlers[o.type];if(n)for(var i=n.slice(0),r=0,s=i.length;r<s&&!o.isImmediatePropagationStopped();r++)i[r].call(e,o)}}),1==a.handlers[o].length&&(e.addEventListener?e.addEventListener(o,a.dispatcher,!1):e.attachEvent&&e.attachEvent("on"+o,a.dispatcher))},t.exports.off=function(e,o,s){if(r.hasData(e)){var a=r.getData(e);if(a.handlers){if(i.isArray(o))return n(t.exports.off,e,o,s);var l=function(o){a.handlers[o]=[],t.exports.cleanUpEvents(e,o)};if(o){var u=a.handlers[o];if(u){if(!s)return void l(o);if(s.guid)for(var c=0;c<u.length;c++)u[c].guid===s.guid&&u.splice(c--,1);t.exports.cleanUpEvents(e,o)}}else for(var p in a.handlers)l(p)}}},t.exports.cleanUpEvents=function(e,t){var o=r.getData(e);0===o.handlers[t].length&&(delete o.handlers[t],e.removeEventListener?e.removeEventListener(t,o.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,o.dispatcher)),i.isEmpty(o.handlers)&&(delete o.handlers,delete o.dispatcher,delete o.disabled),i.isEmpty(o)&&r.removeData(e)},t.exports.fixEvent=function(e){function t(){return!0}function o(){return!1}if(!e||!e.isPropagationStopped){var n=e||window.event;e={};for(var i in n)"layerX"!==i&&"layerY"!==i&&"keyboardEvent.keyLocation"!==i&&("returnValue"==i&&n.preventDefault||(e[i]=n[i]));if(e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,e.isDefaultPrevented=t,e.defaultPrevented=!0},e.isDefaultPrevented=o,e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=o,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=o,null!=e.clientX){var r=document.documentElement,s=document.body;e.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},t.exports.trigger=function(e,o){var n=r.hasData(e)?r.getData(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof o){var s=null;e.paramData&&(s=e.paramData,e.paramData=null,e.removeAttribute(s)),o={type:o,target:e,paramData:s}}if(o=t.exports.fixEvent(o),n.dispatcher&&n.dispatcher.call(e,o),i&&!o.isPropagationStopped()&&!1!==o.bubbles)t.exports.trigger(i,o);else if(!i&&!o.defaultPrevented){var a=r.getData(o.target);o.target[o.type]&&(a.disabled=!0,"function"==typeof o.target[o.type]&&o.target[o.type](),a.disabled=!1)}return!o.defaultPrevented},t.exports.one=function(e,o,s){if(i.isArray(o))return n(t.exports.one,e,o,s);var a=function(){t.exports.off(e,o,a),s.apply(this,arguments)};a.guid=s.guid=s.guid||r.guid(),t.exports.on(e,o,a)}},{"./data":4,"./object":10}],7:[function(e,t,o){var n=e("./data");t.exports.bind=function(e,t,o){t.guid||(t.guid=n.guid());var i=function(){return t.apply(e,arguments)};return i.guid=o?o+"_"+t.guid:t.guid,i}},{"./data":4}],8:[function(e,t,o){var n=e("./url");t.exports.get=function(e,t,o,i){var r,s,a,l;o=o||function(){},"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),s=new XMLHttpRequest,a=n.parseUrl(e),l=window.location,a.protocol+a.host===l.protocol+l.host||!window.XDomainRequest||"withCredentials"in s?(r="file:"==a.protocol||"file:"==l.protocol,s.onreadystatechange=function(){4===s.readyState&&(200===s.status||r&&0===s.status?t(s.responseText):o(s.responseText))}):(s=new window.XDomainRequest,s.onload=function(){t(s.responseText)},s.onerror=o,s.onprogress=function(){},s.ontimeout=o);try{s.open("GET",e,!0),i&&(s.withCredentials=!0)}catch(e){return void o(e)}try{s.send()}catch(e){o(e)}},t.exports.jsonp=function(e,t,o){var n="jsonp_callback_"+Math.round(1e5*Math.random()),i=document.createElement("script");i.src=e+(e.indexOf("?")>=0?"&":"?")+"callback="+n,i.onerror=function(){delete window[n],document.body.removeChild(i),o()},i.onload=function(){setTimeout(function(){window[n]&&(delete window[n],document.body.removeChild(i))},0)},window[n]=function(e){delete window[n],document.body.removeChild(i),t(e)},document.body.appendChild(i)}},{"./url":13}],9:[function(e,t,o){var n=e("./dom");t.exports.render=function(e,t){var o=t.align?t.align:"tl",i=t.x?t.x:0,r=t.y?t.y:0;"tl"===o?n.css(e,{float:"left","margin-left":i+"px","margin-top":r+"px"}):"tr"===o?n.css(e,{float:"right","margin-right":i+"px","margin-top":r+"px"}):"tlabs"===o?n.css(e,{position:"absolute",left:i+"px",top:r+"px"}):"trabs"===o?n.css(e,{position:"absolute",right:i+"px",top:r+"px"}):"blabs"===o?n.css(e,{position:"absolute",left:i+"px",bottom:r+"px"}):"brabs"===o?n.css(e,{position:"absolute",right:i+"px",bottom:r+"px"}):"cc"===o&&n.css(e,{position:"absolute",left:"50%",top:"50%","margin-top":e.offsetHeight/-2+"px","margin-left":e.offsetWidth/-2+"px"})}},{"./dom":5}],10:[function(e,t,o){var n=Object.prototype.hasOwnProperty;t.exports.create=Object.create||function(e){function t(){}return t.prototype=e,new t},t.exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(arg)},t.exports.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0},t.exports.each=function(e,o,i){if(t.exports.isArray(e))for(var r=0,s=e.length;r<s&&!1!==o.call(i||this,e[r],r);++r);else for(var a in e)if(n.call(e,a)&&!1===o.call(i||this,a,e[a]))break;return e},t.exports.merge=function(e,t){if(!t)return e;for(var o in t)n.call(t,o)&&(e[o]=t[o]);return e},t.exports.deepMerge=function(e,o){var i,r,s;e=t.exports.copy(e);for(i in o)n.call(o,i)&&(r=e[i],s=o[i],t.exports.isPlain(r)&&t.exports.isPlain(s)?e[i]=t.exports.deepMerge(r,s):e[i]=o[i]);return e},t.exports.copy=function(e){return t.exports.merge({},e)},t.exports.isPlain=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},t.exports.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.exports.unescape=function(e){return e.replace(/&([^;]+);/g,function(e,t){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[t.toLowerCase()]||e})}},{}],11:[function(e,t,o){var n=e("./object"),i=function(){};(i=function(){}).extend=function(e){var t,o;t=(e=e||{}).init||e.init||this.prototype.init||this.prototype.init||function(){},((o=function(){t.apply(this,arguments)}).prototype=n.create(this.prototype)).constructor=o,o.extend=i.extend,o.create=i.create;for(var r in e)e.hasOwnProperty(r)&&(o.prototype[r]=e[r]);return o},i.create=function(){var e=n.create(this.prototype);return this.apply(e,arguments),e},t.exports=i},{"./object":10}],12:[function(e,t,o){if(t.exports.USER_AGENT=navigator.userAgent,t.exports.IS_IPHONE=/iPhone/i.test(t.exports.USER_AGENT),t.exports.IS_IPAD=/iPad/i.test(t.exports.USER_AGENT),t.exports.IS_IPOD=/iPod/i.test(t.exports.USER_AGENT),t.exports.IS_MAC=/mac/i.test(t.exports.USER_AGENT),t.exports.IS_SAFARI=/Safari/i.test(t.exports.USER_AGENT),t.exports.IS_CHROME=/Chrome/i.test(t.exports.USER_AGENT),t.exports.IS_FIREFOX=/Firefox/i.test(t.exports.USER_AGENT),document.all){n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t.exports.HAS_FLASH=!!n}else if(navigator.plugins&&navigator.plugins.length>0){var n=navigator.plugins["Shockwave Flash"];t.exports.HAS_FLASH=!!n}else t.exports.HAS_FLASH=!1;t.exports.IS_MAC_SAFARI=t.exports.IS_MAC&&t.exports.IS_SAFARI&&!t.exports.IS_CHROME&&!t.exports.HAS_FLASH,t.exports.IS_IOS=t.exports.IS_IPHONE||t.exports.IS_IPAD||t.exports.IS_IPOD||t.exports.IS_MAC_SAFARI,t.exports.IOS_VERSION=function(){var e=t.exports.USER_AGENT.match(/OS (\d+)_/i);if(e&&e[1])return e[1]}(),t.exports.IS_ANDROID=/Android/i.test(t.exports.USER_AGENT),t.exports.ANDROID_VERSION=function(){var e,o,n=t.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return n?(e=n[1]&&parseFloat(n[1]),o=n[2]&&parseFloat(n[2]),e&&o?parseFloat(n[1]+"."+n[2]):e||null):null}(),t.exports.IS_OLD_ANDROID=t.exports.IS_ANDROID&&/webkit/i.test(t.exports.USER_AGENT)&&t.exports.ANDROID_VERSION<2.3,t.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),t.exports.IS_MOBILE=t.exports.IS_IOS||t.exports.IS_ANDROID,t.exports.IS_H5=t.exports.IS_MOBILE||!t.exports.HAS_FLASH,t.exports.IS_PC=!t.exports.IS_H5},{}],13:[function(e,t,o){var n=e("./dom");t.exports.getAbsoluteURL=function(e){return e.match(/^https?:\/\//)||(e=n.createEl("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href),e},t.exports.parseUrl=function(e){var t,o,i,r,s;r=["protocol","hostname","port","pathname","search","hash","host"],(i=""===(o=n.createEl("a",{href:e})).host&&"file:"!==o.protocol)&&(t=n.createEl("div"),t.innerHTML='<a href="'+e+'"></a>',o=t.firstChild,t.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(t)),s={};for(var a=0;a<r.length;a++)s[r[a]]=o[r[a]];return i&&document.body.removeChild(t),s}},{"./dom":5}],14:[function(e,t,o){t.exports.formatTime=function(e){var t,o,n,i=Math.round(e);return t=Math.floor(i/3600),i%=3600,o=Math.floor(i/60),n=i%60,!(t===1/0||isNaN(t)||o===1/0||isNaN(o)||n===1/0||isNaN(n))&&(t=t>=10?t:"0"+t,o=o>=10?o:"0"+o,n=n>=10?n:"0"+n,("00"===t?"":t+":")+o+":"+n)},t.exports.parseTime=function(e){var t=e.split(":"),o=0,n=0,i=0;return 3===t.length?(o=t[0],n=t[1],i=t[2]):2===t.length?(n=t[0],i=t[1]):1===t.length&&(i=t[0]),o=parseInt(o,10),n=parseInt(n,10),i=Math.ceil(parseFloat(i)),3600*o+60*n+i}},{}],15:[function(e,t,o){var n,i=e("../lib/oo"),r=e("../lib/object"),s=e("../lib/cookie"),a=e("../lib/data"),l=e("../lib/io"),u=e("../lib/ua"),c=e("../config"),p={INIT:1001,CLOSE:1002,PLAY:2001,STOP:2002,PAUSE:2003,RECOVER:2010,SEEK:2004,SEEK_END:2011,FULLSREEM:2005,QUITFULLSCREEM:2006,UNDERLOAD:3002,LOADED:3001,RESOLUTION:2007,RESOLUTION_DONE:2009,HEARTBEAT:9001,ERROR:4001},d=i.extend({init:function(e,t){this.player=e;var o=this.player.getOptions(),n=t.from?t.from:"prism_aliyun",i=o.isLive?"prism_live":"prism_vod",r="pc";u.IS_IPAD?r="pad":u.IS_IPHONE?r="iphone":u.IS_ANDROID&&(r="andorid");var s=u.IS_PC?"pc_h5":"h5",a=c.h5Version,l=this._getUuid(),p=o.source?encodeURIComponent(o.source):t.video_id,d=this.sessionId,h=(new Date).getTime();this.opt={APIVersion:"0.6.0",lv:"1",b:n,lm:i,t:r,m:s,pv:a,uuid:l,v:p,u:"0",s:d,e:"0",args:"0",d:"custom",cdn_ip:"0.0.0.0",ct:h},this.bindEvent()},updateVideoInfo:function(e){var t=this.player.getOptions(),o=e.from?e.from:"prism_aliyun",n=t.isLive?"prism_live":"prism_vod",i="pc";u.IS_IPAD?i="pad":u.IS_IPHONE?i="iphone":u.IS_ANDROID&&(i="andorid");var r=u.IS_PC?"pc_h5":"h5",s=c.h5Version,a=this._getUuid(),l=t.source?encodeURIComponent(t.source):e.video_id,p=this.sessionId,d=(new Date).getTime();this.opt={APIVersion:"0.6.0",lv:"1",b:o,lm:n,t:i,m:r,pv:s,uuid:a,v:l,u:"0",s:p,e:"0",args:"0",d:"custom",cdn_ip:"0.0.0.0",ct:d}},bindEvent:function(){var e=this;this.player.on("init",function(){e._onPlayerInit()}),window.addEventListener("beforeunload",function(){e._onPlayerClose()}),this.player.on("ready",function(){e._onPlayerReady()}),this.player.on("ended",function(){e._onPlayerFinish()}),this.player.on("play",function(){e._onPlayerPlay()}),this.player.on("pause",function(){e._onPlayerPause()}),this.player.on("seekStart",function(t){e._onPlayerSeekStart(t)}),this.player.on("seekEnd",function(t){e._onPlayerSeekEnd(t)}),this.player.on("waiting",function(){e._onPlayerLoaded()}),this.player.on("canplaythrough",function(){e._onPlayerUnderload()}),this.player.on("error",function(){e._onPlayerError()}),n=setInterval(function(){2===e.player.readyState()||3===e.player.readyState()?e._onPlayerLoaded():4===e.player.readyState()&&e._onPlayerUnderload()},100)},removeEvent:function(){this.player.off("init"),this.player.off("ready"),this.player.off("ended"),this.player.off("play"),this.player.off("pause"),this.player.off("seekStart"),this.player.off("seekEnd"),this.player.off("canplaythrough"),this.player.off("error"),clearInterval(n)},_onPlayerInit:function(){this.sessionId=a.guid(),this._log("INIT",{}),this.buffer_flag=0,this.pause_flag=0},_onPlayerClose:function(){this._log("CLOSE",{vt:Math.floor(1e3*this.player.getCurrentTime())})},_onPlayerReady:function(){this.startTimePlay=(new Date).getTime()},_onPlayerFinish:function(){this.sessionId=a.guid(),this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())})},_onPlayerPlay:function(){return!this.buffer_flag&&this.player._options.autoplay?(this.first_play_time=(new Date).getTime(),this._log("PLAY",{dsm:"fix",vt:0,cost:this.first_play_time-this.player.getReadyTime()}),void(this.buffer_flag=1)):void(this.buffer_flag&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=(new Date).getTime(),this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.pauseEndTime-this.pauseTime})))},_onPlayerPause:function(){this.buffer_flag&&this.startTimePlay&&(this.seeking||(this.pause_flag=1,this.pauseTime=(new Date).getTime(),this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())})))},_onPlayerSeekStart:function(e){this.seekStartTime=e.paramData.fromTime,this.seeking=!0,this.seekStartStamp=(new Date).getTime()},_onPlayerSeekEnd:function(e){this.seekEndStamp=(new Date).getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*e.paramData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this.seeking=!1},_onPlayerLoaded:function(){this.buffer_flag&&this.startTimePlay&&(this.stucking||this.seeking||(this.stuckStartTime=(new Date).getTime(),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.stuckStartTime=(new Date).getTime())))},_onPlayerUnderload:function(){if(!this.buffer_flag&&!this.player._options.autoplay)return this.first_play_time=(new Date).getTime(),this._log("PLAY",{play_mode:"fix",vt:0,cost:this.first_play_time-this.player.getReadyTime()}),void(this.buffer_flag=1);if((this.buffer_flag||!this.player._options.autoplay)&&this.stucking&&!this.seeking){var e=Math.floor(1e3*this.player.getCurrentTime()),t=this.stuckStartTime||(new Date).getTime(),o=Math.floor((new Date).getTime()-t);o<0&&(o=0),this._log("LOADED",{vt:e,cost:o}),this.stucking=!1}},_onPlayerHeartBeat:function(){if(!this.seeking){var e=Math.floor(1e3*this.player.getCurrentTime()),t=this;this.timer||(this.timer=setTimeout(function(){!t.seeking&&t._log("HEARTBEAT",{progress:e}),clearTimeout(t.timer),t.timer=null},6e4))}},_onPlayerError:function(){var e,t={MEDIA_ERR_NETWORK:-1,MEDIA_ERR_SRC_NOT_SUPPORTED:-2,MEDIA_ERR_DECODE:-3},o=this.player.getError(),n=o.code;r.each(o.__proto__,function(t,o){if(o===n)return e=t,!1}),t[e]&&this._log("ERROR",{vt:Math.floor(1e3*this.player.getCurrentTime()),error_code:t[e],error_msg:e})},_log:function(e,t){var o=r.copy(this.opt),n=c.logReportTo;o.e=p[e],o.s=this.sessionId,o.ct=(new Date).getTime();var i=[];r.each(t,function(e,t){i.push(e+"="+t)}),""==(i=i.join("&"))&&(i="0"),o.args=encodeURIComponent(i);var s=[];r.each(o,function(e,t){s.push(e+"="+t)}),s=s.join("&"),l.jsonp(n+"?"+s,function(){},function(){})},_getUuid:function(){var e=s.get("p_h5_u");return e||(e=a.guid(),s.set("p_h5_u",e,7)),e}});t.exports=d},{"../config":1,"../lib/cookie":3,"../lib/data":4,"../lib/io":8,"../lib/object":10,"../lib/oo":11,"../lib/ua":12}],16:[function(e,t,o){var n=e("../ui/component"),i=e("../lib/data"),r=e("../lib/object"),s=e("../config"),a=n.extend({init:function(e,t){n.call(this,this,t),this._id=this.id="prism-player-"+i.guid(),this.tag=e,this._el=this.tag,window[this.id]=this;var o="100%",r="100%",a="//"+s.domain+"/de/prismplayer-flash/"+s.flashVersion+"/PrismPlayer.swf",l=this._comboFlashVars(),u=this._options.wmode?this._options.wmode:"opaque";e.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+a+'"><param name=quality value=High><param name="FlashVars" value="'+l+'"><param name="WMode" value="'+u+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+a+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="'+o+'" height="'+r+'" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+u+'" FlashVars="'+l+'"></embed></object>'},_getPlayer:function(e){return-1!=navigator.appName.indexOf("Microsoft")?document.getElementById(e):document[e]},_comboFlashVars:function(){var e=this._options,t={autoPlay:e.autoplay?1:0,from:e.from,isInner:0,actRequest:1,vid:e.vid,domain:e.domain?e.domain:"//tv.taobao.com",statisticService:e.statisticService?e.statisticService:s.logReportTo,videoInfoService:e.videoInfoService?e.videoInfoService:"/player/json/getBaseVideoInfo.do",disablePing:e.trackLog?0:1,namespace:this.id,barMode:0!=e.barMode?1:0,isLive:e.isLive?1:0,waterMark:e.waterMark,vurl:e.source?encodeURIComponent(e.source):"",plugins:e.plugins?e.plugins:"",snapShotShow:e.snapshot?1:0,accessId:e.acId?e.acId:"",accessKey:e.acKey?e.acKey:"",stsToken:e.stsToken?e.stsToken:"",domainRegion:e.domainRegion?e.domainRegion:"",authInfo:e.authInfo?encodeURIComponent(e.authInfo):"",formats:e.formats?e.formats:"",notShowTips:e.notShowTips?1:0,showBarTime:e.showBarTime?e.showBarTime:0,showBuffer:0==e.showBuffer?0:1,rePlay:e.rePlay?1:0,encryp:e.encryp?e.encryp:"",secret:e.secret?e.secret:""},o=[];return e.cover&&(t.cover=e.cover),e.extraInfo&&(t.extraInfo=encodeURIComponent(JSON.stringify(e.extraInfo))),r.each(t,function(e,t){o.push(e+"="+t)}),o.join("&")},flashReady:function(){this.flashPlayer=this._getPlayer(this.id),this._isReady=!0;var e,t=this._options.skinRes,o=this._options.skinLayout;if(!1!==o&&!r.isArray(o))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if("string"!=typeof t)throw new Error("PrismPlayer Error: skinRes should be string!");e=0!=o&&0!==o.length&&{skinRes:t,skinLayout:o},this.flashPlayer.setPlayerSkin(e),this.trigger("ready");var n=this;window.addEventListener("beforeunload",function(){try{n.flashPlayer.setPlayerCloseStatus()}catch(e){}})},jsReady:function(){return!0},uiReady:function(){this.trigger("uiReady")},loadedmetadata:function(){this.trigger("loadedmetadata")},onPlay:function(){this.trigger("play")},onEnded:function(){this.trigger("ended")},onPause:function(){this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(e){this.trigger("bSSendMsg",e)},onVideoRender:function(e){this.trigger("videoRender"),this.trigger("canplay",{loadtime:e})},onVideoError:function(e){this.trigger("error",{errortype:e})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){this.trigger("stsTokenExpired")},onVideoBuffer:function(){this.trigger("waiting")},_invoke:function(){var e=arguments[0],t=arguments;if(Array.prototype.shift.call(t),!this.flashPlayer)throw new Error("PrismPlayer Error: flash player is not ready!");if("function"!=typeof this.flashPlayer[e])throw new Error("PrismPlayer Error: function "+e+" is not found!");return this.flashPlayer[e].apply(this.flashPlayer,t)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(e){this._invoke("seekVideo",e)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(e){this._invoke("setVolume",e)},loadByVid:function(e){this._invoke("loadByVid",e,!1)},loadByUrl:function(e,t){this._invoke("loadByUrl",e,t)},dispose:function(){this._invoke("pauseVideo")},showBSMsg:function(e){this._invoke("showBSMsg",e)},setToastEnabled:function(e){this._invoke("setToastEnabled",e)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(e,t){if(this._el.style.width=e,t.indexOf("%")>0){var o=window.screen.height,n=t.replace("%","");if(isNaN(n))this._el.style.height=t;else{var i=9*o*parseInt(n)/1e3;this._el.style.height=String(i%2?i+1:i)+"px"}}else this._el.style.height=t;console.log(e+t)}});t.exports=a},{"../config":1,"../lib/data":4,"../lib/object":10,"../ui/component":18}],17:[function(require,module,exports){function sleep(e){for(var t=Date.now();Date.now()-t<=e;);}var Component=require("../ui/component"),_=require("../lib/object"),Dom=require("../lib/dom"),Event=require("../lib/event"),io=require("../lib/io"),UI=require("../ui/exports"),Monitor=require("../monitor/monitor"),UA=require("../lib/ua"),debug_flag=0,Player=Component.extend({init:function(tag,options){if(this.tag=tag,this.loaded=!1,this.played=!1,Component.call(this,this,options),options.plugins&&_.each(options.plugins,function(e,t){this[e](t)},this),options.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=UI,this.initChildren()),this.bindVideoEvent(),this._options.source?(this._options.trackLog&&(this._monitor=new Monitor(this,{video_id:0,album_id:0,from:this._options.from})),this.trigger("init"),debug_flag&&console.log("init"),(this._options.autoplay||this._options.preload)&&(this.getMetaData(),this.tag.setAttribute("src",this._options.source),this.readyTime=(new Date).getTime(),this.loaded=!0)):this._options.vid?this.loadVideoInfo():(this._options.trackLog&&(this._monitor=new Monitor(this,{video_id:0,album_id:0,from:this._options.from})),this.trigger("init"),debug_flag&&console.log("init")),this._options.extraInfo){var dict=eval(this._options.extraInfo);dict.liveRetry&&(this._options.liveRetry=dict.liveRetry)}this.on("readyState",function(){this.trigger("ready"),debug_flag&&console.log("ready")})}});Player.prototype.initChildren=function(){var e=this.options().skinLayout;if(!1!==e&&!_.isArray(e))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");!1!==e&&0!==e.length&&(this.options({children:e}),Component.prototype.initChildren.call(this)),this.trigger("uiH5Ready"),debug_flag&&console.log("uiH5ready")},Player.prototype.createEl=function(){"VIDEO"!==this.tag.tagName&&(this._el=this.tag,this.tag=Component.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline","")));var e=this._el,t=this.tag;t.player=this;var o=Dom.getElementAttributes(t);return _.each(o,function(t){e.setAttribute(t,o[t])}),this.setVideoAttrs(),t.parentNode&&t.parentNode.insertBefore(e,t),Dom.insertFirst(t,e),this.cover=Dom.createEl("div"),Dom.addClass(this.cover,"prism-cover"),e.appendChild(this.cover),this.options().cover&&(this.cover.style.backgroundImage="url("+this.options().cover+")"),UA.IS_IOS&&Dom.css(t,"display","none"),e},Player.prototype.setVideoAttrs=function(){var e=this._options.preload,t=this._options.autoplay;this.tag.style.width="100%",this.tag.style.height="100%",e&&this.tag.setAttribute("preload","preload"),t&&this.tag.setAttribute("autoplay","autoplay")},Player.prototype.id=function(){return this.el().id},Player.prototype.renderUI=function(){},Player.prototype.bindVideoEvent=function(){var e=this.tag,t=this;Event.on(e,"loadstart",function(e){t.trigger("loadstart"),debug_flag&&console.log("loadstart")}),Event.on(e,"durationchange",function(e){t.trigger("durationchange"),debug_flag&&console.log("durationchange")}),Event.on(e,"loadedmetadata",function(e){t.trigger("loadedmetadata"),debug_flag&&console.log("loadedmetadata")}),Event.on(e,"loadeddata",function(e){t.trigger("loadeddata"),debug_flag&&console.log("loadeddata")}),Event.on(e,"progress",function(e){t.trigger("progress"),debug_flag&&console.log("progress")}),Event.on(e,"canplay",function(e){var o=(new Date).getTime()-t.readyTime;t.trigger("canplay",{loadtime:o}),debug_flag&&console.log("canplay")}),Event.on(e,"canplaythrough",function(o){t.cover&&t._options.autoplay&&(Dom.css(t.cover,"display","none"),delete t.cover),"none"===e.style.display&&UA.IS_IOS&&setTimeout(function(){Dom.css(e,"display","block")},100),t.trigger("canplaythrough"),debug_flag&&console.log("canplaythrough")}),Event.on(e,"play",function(e){t.trigger("play"),debug_flag&&console.log("play")}),Event.on(e,"play",function(e){t.trigger("videoRender"),debug_flag&&console.log("videoRender")}),Event.on(e,"pause",function(e){t.trigger("pause"),debug_flag&&console.log("pause")}),Event.on(e,"ended",function(e){t._options.rePlay&&(t.seek(0),t.tag.play()),t.trigger("ended"),debug_flag&&console.log("ended")}),Event.on(e,"stalled",function(e){t.trigger("stalled"),debug_flag&&console.log("stalled")}),Event.on(e,"waiting",function(e){t.trigger("waiting"),debug_flag&&console.log("waiting")}),Event.on(e,"playing",function(e){t.trigger("playing"),debug_flag&&console.log("playing")}),Event.on(e,"error",function(e){if(console.log("error"),t._options.isLive)t._options.liveRetry?(sleep(2e3),t.tag.load(t._options.source),t.tag.play()):t.trigger("error"),t.trigger("liveStreamStop");else{var o=0;t._options.source.indexOf("flv")>0?o=1:t._options.source.indexOf("m3u8")>0&&!UA.IS_MOBILE&&(o=1),errmsg=document.querySelector("#"+t.id()),errmsg.style.lineHeight=errmsg.clientHeight+"px",Dom.css(errmsg,"text-align","center"),Dom.css(errmsg,"color","#FFFFFF"),errmsg.innerText=o?"播放失败: h5不支持此格式，请安装flashplayer":"播放失败: 请确认播放源",t.trigger("error")}}),Event.on(e,"onM3u8Retry",function(e){t.trigger("m3u8Retry"),debug_flag&&console.log("m3u8Retry")}),Event.on(e,"liveStreamStop",function(e){t.trigger("liveStreamStop"),debug_flag&&console.log("liveStreamStop")}),Event.on(e,"seeking",function(e){t.trigger("seeking"),debug_flag&&console.log("seeking")}),Event.on(e,"seeked",function(e){t.trigger("seeked"),debug_flag&&console.log("seeked")}),Event.on(e,"ratechange",function(e){t.trigger("ratechange"),debug_flag&&console.log("ratechange")}),Event.on(e,"timeupdate",function(e){t.trigger("timeupdate"),debug_flag&&console.log("timeupdate")}),Event.on(e,"webkitfullscreenchange",function(e){t.trigger("fullscreenchange"),debug_flag&&console.log("fullscreenchange")}),this.on("requestFullScreen",function(){Dom.addClass(t.el(),"prism-fullscreen"),debug_flag&&console.log("request-fullscreen")}),this.on("cancelFullScreen",function(){Dom.removeClass(t.el(),"prism-fullscreen"),debug_flag&&console.log("cancel-fullscreen")}),Event.on(e,"suspend",function(e){t.trigger("suspend"),debug_flag&&console.log("sudpend")}),Event.on(e,"abort",function(e){t.trigger("abort"),debug_flag&&console.log("abort")}),Event.on(e,"volumechange",function(e){t.trigger("volumechange"),debug_flag&&console.log("volumechange")}),Event.on(e,"drag",function(e){t.trigger("drag"),debug_flag&&console.log("drag")}),Event.on(e,"dragstart",function(e){t.trigger("dragstart"),debug_flag&&console.log("dragstart")}),Event.on(e,"dragover",function(e){t.trigger("dragover"),debug_flag&&console.log("dragover")}),Event.on(e,"dragenter",function(e){t.trigger("dragenter"),debug_flag&&console.log("dragenter")}),Event.on(e,"dragleave",function(e){t.trigger("dragleave"),debug_flag&&console.log("dragleave")}),Event.on(e,"ondrag",function(e){t.trigger("ondrag"),debug_flag&&console.log("ondrag")}),Event.on(e,"ondragstart",function(e){t.trigger("ondragstart"),debug_flag&&console.log("ondragstart")}),Event.on(e,"ondragover",function(e){t.trigger("ondragover"),debug_flag&&console.log("ondragover")}),Event.on(e,"ondragenter",function(e){t.trigger("ondragenter"),debug_flag&&console.log("ondragenter")}),Event.on(e,"ondragleave",function(e){t.trigger("ondragleave"),debug_flag&&console.log("ondragleave")}),Event.on(e,"drop",function(e){t.trigger("drop"),debug_flag&&console.log("drop")}),Event.on(e,"dragend",function(e){t.trigger("dragend"),debug_flag&&console.log("dragend")}),Event.on(e,"onscroll",function(e){t.trigger("onscroll"),debug_flag&&console.log("onscroll")})},Player.prototype.loadVideoInfo=function(){var e=this._options.vid,t=this;if(!e)throw new Error("PrismPlayer Error: vid should not be null!");io.jsonp("//tv.taobao.com/player/json/getBaseVideoInfo.do?vid="+e+"&playerType=3",function(o){if(1!==o.status||!o.data.source)throw new Error("PrismPlayer Error: #vid:"+e+" cannot find video resource!");var n,i=-1;_.each(o.data.source,function(e,t){var o=+e.substring(1);o>i&&(i=o)}),n=o.data.source["v"+i],n=_.unescape(n),t._options.source=n,t._options.trackLog&&(t._monitor=new Monitor(t,{video_id:e,album_id:o.data.baseInfo.aid,from:t._options.from})),t.trigger("init"),debug_flag&&console.log("init"),(t._options.autoplay||t._options.preload)&&(t.getMetaData(),t.tag.setAttribute("src",t._options.source),t.readyTime=(new Date).getTime(),t.loaded=!0)},function(){throw new Error("PrismPlayer Error: network error!")})},Player.prototype.setControls=function(){var e=this.options();if(e.useNativeControls)this.tag.setAttribute("controls","controls");else if("object"==typeof e.controls){var t=this._initControlBar(e.controls);this.addChild(t)}},Player.prototype._initControlBar=function(e){return new ControlBar(this,e)},Player.prototype.getMetaData=function(){var e=this,t=null,o=this.tag;t=window.setInterval(function(n){if(o.readyState>0){var i=Math.round(o.duration);e.tag.duration=i,e.trigger("readyState"),debug_flag&&console.log("readystate"),clearInterval(t)}},100)},Player.prototype.getReadyTime=function(){return this.readyTime},Player.prototype.readyState=function(){return this.tag.readyState},Player.prototype.getError=function(){return this.tag.error},Player.prototype.play=function(){var e=this;return this._options.autoplay||this._options.preload||this.loaded||(this.getMetaData(),this.tag.setAttribute("src",this._options.source),this.readyTime=(new Date).getTime(),this.loaded=!0),e.cover&&!e._options.autoplay&&(Dom.css(e.cover,"display","none"),delete e.cover),this.tag.play(),this},Player.prototype.replay=function(){return this.seek(0),this.tag.play(),this},Player.prototype.pause=function(){return this.tag.pause(),this},Player.prototype.stop=function(){return this.tag.setAttribute("src",null),this},Player.prototype.paused=function(){return!1!==this.tag.paused},Player.prototype.getDuration=function(){return this.tag.duration},Player.prototype.getCurrentTime=function(){return this.tag.currentTime},Player.prototype.seek=function(e){e===this.tag.duration&&e--;try{this.tag.currentTime=e}catch(e){console.log(e)}return this},Player.prototype.loadByVid=function(e){this._options.vid=e;var t=this;if(!e)throw new Error("PrismPlayer Error: vid should not be null!");io.jsonp("//tv.taobao.com/player/json/getBaseVideoInfo.do?vid="+e+"&playerType=3",function(o){if(1!==o.status||!o.data.source)throw new Error("PrismPlayer Error: #vid:"+e+" cannot find video resource!");var n,i=-1;_.each(o.data.source,function(e,t){var o=+e.substring(1);o>i&&(i=o)}),n=o.data.source["v"+i],n=_.unescape(n),t._options.source=n,t._options.trackLog&&(t._monitor?t._monitor.updateVideoInfo({video_id:e,album_id:o.data.baseInfo.aid,from:t._options.from}):t._monitor=new Monitor(t,{video_id:e,album_id:o.data.baseInfo.aid,from:t._options.from})),t._options.autoplay=!0,t.loaded||(t.trigger("init"),debug_flag&&console.log("init")),t.getMetaData(),t.tag.setAttribute("src",t._options.source),t.readyTime=(new Date).getTime(),t.loaded=!0,t.cover&&t._options.autoplay&&(Dom.css(t.cover,"display","none"),delete t.cover),t.tag.play()},function(){throw new Error("PrismPlayer Error: network error!")})},Player.prototype.loadByUrl=function(e,t){this._options.vid=0,this._options.source=e,this._options.autoplay=!0,this._options.trackLog&&(this._monitor?this._monitor.updateVideoInfo({video_id:0,album_id:0,from:this._options.from}):this._monitor=new Monitor(this,{video_id:0,album_id:0,from:this._options.from})),this.loaded||(this.trigger("init"),debug_flag&&console.log("init")),this.getMetaData(),this.tag.setAttribute("src",this._options.source),this.readyTime=(new Date).getTime(),this.loaded=!0,this.cover&&(this._options.preload||this._options.autoplay)&&(Dom.css(this.cover,"display","none"),delete this.cover),this.tag.play(),t&&!isNaN(t)&&this.seek(t)},Player.prototype.dispose=function(){this.tag.pause();var e=this.tag;Event.off(e,"timeupdate"),Event.off(e,"play"),Event.off(e,"pause"),Event.off(e,"canplay"),Event.off(e,"waiting"),Event.off(e,"playing"),Event.off(e,"ended"),Event.off(e,"error"),Event.off(e,"durationchange"),Event.off(e,"loadedmetadata"),Event.off(e,"loadeddata"),Event.off(e,"progress"),Event.off(e,"canplaythrough"),Event.off(e,"webkitfullscreenchange"),this.tag=null,this._options=null,this._monitor&&(this._monitor.removeEvent(),this._monitor=null)},Player.prototype.mute=function(){return this.tag.muted=!0,this},Player.prototype.unMute=function(){return this.tag.muted=!1,this},Player.prototype.muted=function(){return this.tag.muted},Player.prototype.getVolume=function(){return this.tag.volume},Player.prototype.getOptions=function(){return this._options},Player.prototype.setVolume=function(e){this.tag.volume=e},Player.prototype.hideProgress=function(){this.trigger("hideProgress")},Player.prototype.cancelHideProgress=function(){this.trigger("cancelHideProgress")},Player.prototype.setPlayerSize=function(e,t){if(this._el.style.width=e,t)if(t.indexOf("%")>0){var o=window.screen.height,n=t.replace("%","");if(isNaN(n))this._el.style.height=t;else{var i=9*o*parseInt(n)/1e3;this._el.style.height=String(i%2?i+1:i)+"px"}}else this._el.style.height=t};var __supportFullscreen=function(){var e;Dom.createEl("div"),e={};var t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozfullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]];if(UA.IS_IOS)e.requestFn="webkitEnterFullscreen",e.cancelFn="webkitExitFullscreen",e.eventName="webkitfullscreenchange",e.isFullScreen="webkitDisplayingFullscreen";else{for(var o=0;o<5;o++)if(t[o][1]in document){e.requestFn=t[o][0],e.cancelFn=t[o][1],e.eventName=t[o][4],e.isFullScreen=t[o][6];break}"requestFullscreen"in document?e.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?e.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?e.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?e.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?e.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(e.requestFn="msRequestFullscreen"),"fullscreenchange"in document?e.eventName="fullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?e.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(e.eventName="MSFullscreenChange"),"fullScreen"in document?e.isFullScreen="fullScreen":"webkitfullScreen"in document?e.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?e.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?e.isFullScreen="webkitDisplayingFullscreen":"mozfullScreen"in document?e.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(e.isFullScreen="MSFullScreen")}return e.requestFn?e:null}();Player.prototype._enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",Dom.addClass(document.getElementsByTagName("body")[0],"prism-full-window")},Player.prototype._exitFullWindow=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,Dom.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")},Player.prototype.requestFullScreen=function(){var e=__supportFullscreen,t=this.el(),o=this;return UA.IS_IOS?((t=this.tag)[e.requestFn](),this):(this.isFullScreen=!0,e?(Event.on(document,e.eventName,function(t){o.isFullScreen=document[e.isFullScreen],!0===o.isFullScreen&&Event.off(document,e.eventName),o.trigger("requestFullScreen")}),t[e.requestFn]()):(this._enterFullWindow(),this.trigger("requestFullScreen")),this)},Player.prototype.cancelFullScreen=function(){var e=__supportFullscreen,t=this;return this.isFullScreen=!1,e?(Event.on(document,e.eventName,function(o){t.isFullScreen=document[e.isFullScreen],!1===t.isFullScreen&&Event.off(document,e.eventName),t.trigger("cancelFullScreen")}),document[e.cancelFn](),this.trigger("play")):(this._exitFullWindow(),this.trigger("cancelFullScreen"),this.trigger("play")),this},Player.prototype.getIsFullScreen=function(){return this.isFullScreen},Player.prototype.getBuffered=function(){return this.tag.buffered},Player.prototype.setToastEnabled=function(e){},Player.prototype.setLoadingInvisible=function(){},module.exports=Player},{"../lib/dom":5,"../lib/event":6,"../lib/io":8,"../lib/object":10,"../lib/ua":12,"../monitor/monitor":15,"../ui/component":18,"../ui/exports":27}],18:[function(e,t,o){var n=e("../lib/oo"),i=e("../lib/data"),r=e("../lib/object"),s=e("../lib/dom"),a=e("../lib/event"),l=e("../lib/function"),u=e("../lib/layout"),c=n.extend({init:function(e,t){var o=this;this._player=e,this._options=r.copy(t),this._el=this.createEl(),this._id=e.id()+"_component_"+i.guid(),this._children=[],this._childIndex={},this._player.on("uiH5Ready",function(){o.renderUI(),o.syncUI(),o.bindEvent()})}});c.prototype.renderUI=function(){u.render(this.el(),this.options()),this.el().id=this.id()},c.prototype.syncUI=function(){},c.prototype.bindEvent=function(){},c.prototype.createEl=function(e,t){return s.createEl(e,t)},c.prototype.options=function(e){return void 0===e?this._options:this._options=r.merge(this._options,e)},c.prototype.el=function(){return this._el},c.prototype._contentEl,c.prototype.player=function(){return this._player},c.prototype.contentEl=function(){return this._contentEl||this._el},c.prototype._id,c.prototype.id=function(){return this._id},c.prototype.addChild=function(e,t){var o;if("string"==typeof e){if(!this._player.UI[e])return;o=new this._player.UI[e](this._player,t)}else o=e;return this._children.push(o),"function"==typeof o.id&&(this._childIndex[o.id()]=o),"function"==typeof o.el&&o.el()&&this.contentEl().appendChild(o.el()),o},c.prototype.removeChild=function(e){if(e&&this._children){for(var t=!1,o=this._children.length-1;o>=0;o--)if(this._children[o]===e){t=!0,this._children.splice(o,1);break}if(t){this._childIndex[e.id]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},c.prototype.initChildren=function(){var e,t,o,n,i;if(e=this,t=this.options().children)if(r.isArray(t))for(var s=0;s<t.length;s++)"string"==typeof(o=t[s])?(n=o,i={}):(n=o.name,i=o),e.addChild(n,i);else r.each(t,function(t,o){!1!==o&&e.addChild(t,o)})},c.prototype.on=function(e,t){return a.on(this._el,e,l.bind(this,t)),this},c.prototype.off=function(e,t){return a.off(this._el,e,t),this},c.prototype.one=function(e,t){return a.one(this._el,e,l.bind(this,t)),this},c.prototype.trigger=function(e,t){return t&&(this._el.paramData=t),a.trigger(this._el,e),this},c.prototype.addClass=function(e){return s.addClass(this._el,e),this},c.prototype.removeClass=function(e){return s.removeClass(this._el,e),this},c.prototype.show=function(){return this._el.style.display="block",this},c.prototype.hide=function(){return this._el.style.display="none",this},c.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var e=this._children.length-1;e>=0;e--)this._children[e].destroy&&this._children[e].destroy();this.children_=null,this.childIndex_=null,this.off(),this._el.parentNode&&this._el.parentNode.removeChild(this._el),i.removeData(this._el),this._el=null},t.exports=c},{"../lib/data":4,"../lib/dom":5,"../lib/event":6,"../lib/function":7,"../lib/layout":9,"../lib/object":10,"../lib/oo":11}],19:[function(e,t,o){var n=e("../component"),i=e("../../lib/dom"),r=n.extend({init:function(e,t){n.call(this,e,t),this.addClass(t.className||"prism-big-play-btn")},bindEvent:function(){var e=this;this._player.on("play",function(){e.addClass("playing"),i.css(e.el(),"display","none")}),this._player.on("pause",function(){e.removeClass("playing"),i.css(e.el(),"display","block")}),this.on("click",function(){e._player.paused()&&(e._player.play(),i.css(e.el(),"display","none"))})}});t.exports=r},{"../../lib/dom":5,"../component":18}],20:[function(e,t,o){var n=e("../component"),i=n.extend({init:function(e,t){n.call(this,e,t),this.addClass(t.className||"prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=n.prototype.createEl.call(this);return e.innerHTML='<div class="prism-controlbar-bg"></div>',e},onEvent:function(){var e=this.player(),t=this;this.timer=null,e.on("click",function(e){e.preventDefault(),e.stopPropagation(),t._show(),t._hide()}),e.on("ready",function(){t._hide()}),this.on("touchstart",function(){t._show()}),this.on("touchmove",function(){t._show()}),this.on("touchend",function(){t._hide()})},_show:function(){this.show(),this._player.trigger("showBar"),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var e=this,t=this.player().options().showBarTime;this.timer=setTimeout(function(){e.hide(),e._player.trigger("hideBar")},t)}});t.exports=i},{"../component":18}],21:[function(e,t,o){var n=e("../component"),i=n.extend({init:function(e,t){n.call(this,e,t),this.addClass(t.className||"prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on("requestFullScreen",function(){e.addClass("fullscreen")}),this._player.on("cancelFullScreen",function(){e.removeClass("fullscreen")}),this.on("click",function(){this._player.getIsFullScreen()?this._player.cancelFullScreen():this._player.requestFullScreen()})}});t.exports=i},{"../component":18}],22:[function(e,t,o){var n=e("../component"),i=(e("../../lib/util"),n.extend({init:function(e,t){n.call(this,e,t),this.className=t.className?t.className:"prism-live-display",this.addClass(this.className)}}));t.exports=i},{"../../lib/util":14,"../component":18}],23:[function(e,t,o){var n=e("../component"),i=n.extend({init:function(e,t){n.call(this,e,t),this.addClass(t.className||"prism-play-btn")},bindEvent:function(){var e=this;this._player.on("play",function(){e.addClass("playing")}),this._player.on("pause",function(){e.removeClass("playing")}),this.on("click",function(){e._player.paused()?(e._player.play(),e.addClass("playing")):(e._player.pause(),e.removeClass("playing"))})}});t.exports=i},{"../component":18}],24:[function(e,t,o){var n=e("../component"),i=e("../../lib/dom"),r=e("../../lib/event"),s=e("../../lib/ua"),a=e("../../lib/function"),l=n.extend({init:function(e,t){n.call(this,e,t),this.className=t.className?t.className:"prism-progress",this.addClass(this.className)},createEl:function(){var e=n.prototype.createEl.call(this);return e.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"></div>',e},bindEvent:function(){var e=this;this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.controlNode=document.getElementsByClassName("prism-controlbar")[0],r.on(this.cursorNode,"mousedown",function(t){e._onMouseDown(t)}),r.on(this.cursorNode,"touchstart",function(t){e._onMouseDown(t)}),r.on(this._el,"click",function(t){e._onMouseClick(t)}),this._player.on("hideProgress",function(t){e._hideProgress(t)}),this._player.on("cancelHideProgress",function(t){e._cancelHideProgress(t)}),this.bindTimeupdate=a.bind(this,this._onTimeupdate),this._player.on("timeupdate",this.bindTimeupdate),s.IS_IPAD?this.interval=setInterval(function(){e._onProgress()},500):this._player.on("progress",function(){e._onProgress()})},_hideProgress:function(e){r.off(this.cursorNode,"mousedown"),r.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;r.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),r.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_onMouseClick:function(e){var t=(e.touches?e.touches[0].pageX:e.pageX)-this.el().offsetLeft,o=this.el().offsetWidth,n=this._player.getDuration()?t/o*this._player.getDuration():0;n<0&&(n=0),n>this._player.getDuration()&&(n=this._player.getDuration()),this._player.trigger("seekStart",{fromTime:this._player.getCurrentTime()}),this._player.seek(n),this._player.play(),this._player.trigger("seekEnd",{toTime:this._player.getCurrentTime()})},_onMouseDown:function(e){var t=this;e.preventDefault(),this._player.pause(),this._player.trigger("seekStart",{fromTime:this._player.getCurrentTime()}),r.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),r.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),r.on(this._player.tag,"mouseup",function(e){t._onPlayerMouseUp(e)}),r.on(this._player.tag,"touchend",function(e){t._onPlayerMouseUp(e)}),r.on(this.controlNode,"mouseup",function(e){t._onControlBarMouseUp(e)}),r.on(this.controlNode,"touchend",function(e){t._onControlBarMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),r.off(this.controlNode,"mousemove"),r.off(this.controlNode,"touchmove"),r.off(this._player.tag,"mouseup"),r.off(this._player.tag,"touchend"),r.off(this.controlNode,"mouseup"),r.off(this.controlNode,"touchend");var t=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration();this._player.getDuration(),this._player.seek(t),this._player.play(),this._player.trigger("seekEnd",{toTime:this._player.getCurrentTime()})},_onControlBarMouseUp:function(e){e.preventDefault(),r.off(this.controlNode,"mousemove"),r.off(this.controlNode,"touchmove"),r.off(this._player.tag,"mouseup"),r.off(this._player.tag,"touchend"),r.off(this.controlNode,"mouseup"),r.off(this.controlNode,"touchend");var t=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration();this._player.getDuration(),this._player.seek(t),this._player.play(),this._player.trigger("seekEnd",{toTime:this._player.getCurrentTime()})},_onPlayerMouseUp:function(e){e.preventDefault(),r.off(this.controlNode,"mousemove"),r.off(this.controlNode,"touchmove"),r.off(this._player.tag,"mouseup"),r.off(this._player.tag,"touchend"),r.off(this.controlNode,"mouseup"),r.off(this.controlNode,"touchend");var t=this.playedNode.offsetWidth/this.el().offsetWidth*this._player.getDuration();this._player.getDuration(),isNaN(t)||(this._player.seek(t),this._player.play()),this._player.trigger("seekEnd",{toTime:this._player.getCurrentTime()})},_onMouseMove:function(e){e.preventDefault();var t=(e.touches?e.touches[0].pageX:e.pageX)-this.el().offsetLeft,o=this.el().offsetWidth,n=this._player.getDuration()?t/o*this._player.getDuration():0;n<0&&(n=0),n>this._player.getDuration()&&(n=this._player.getDuration()),this._player.seek(n),this._player.play(),this._updateProgressBar(this.playedNode,n),this._updateCursorPosition(n)},_onTimeupdate:function(e){this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger("updateProgressBar",{time:this._player.getCurrentTime()})},_onProgress:function(e){this._player.getDuration()&&this._player.getBuffered().length>=1&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var o=this._player.getDuration()?t/this._player.getDuration():0;e&&i.css(e,"width",100*o+"%")},_updateCursorPosition:function(e){var t=this._player.getDuration()?e/this._player.getDuration():0;this.cursorNode&&i.css(this.cursorNode,"left",100*t+"%")}});t.exports=l},{"../../lib/dom":5,"../../lib/event":6,"../../lib/function":7,"../../lib/ua":12,"../component":18}],25:[function(e,t,o){var n=e("../component"),i=e("../../lib/util"),r=n.extend({init:function(e,t){n.call(this,e,t),this.className=t.className?t.className:"prism-time-display",this.addClass(this.className)},createEl:function(){var e=n.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',e},bindEvent:function(){var e=this;this._player.on("durationchange",function(){var t=i.formatTime(e._player.getDuration());t?(document.querySelector("#"+e.id()+" .time-bound").style.display="inline",document.querySelector("#"+e.id()+" .duration").style.display="inline",document.querySelector("#"+e.id()+" .duration").innerText=t):(document.querySelector("#"+e.id()+" .duration").style.display="none",document.querySelector("#"+e.id()+" .time-bound").style.display="none")}),this._player.on("timeupdate",function(){var t=i.formatTime(e._player.getCurrentTime());t?(document.querySelector("#"+e.id()+" .current-time").style.display="inline",document.querySelector("#"+e.id()+" .current-time").innerText=t):document.querySelector("#"+e.id()+" .current-time").style.display="none"})}});t.exports=r},{"../../lib/util":14,"../component":18}],26:[function(e,t,o){var n=e("../component"),i=n.extend({init:function(e,t){n.call(this,e,t),this.addClass(t.className||"prism-volume")},bindEvent:function(){var e=this;this.on("click",function(){e._player.muted()?(e._player.unMute(),e.removeClass("mute")):(e._player.mute(),e.addClass("mute"))})}});t.exports=i},{"../component":18}],27:[function(e,t,o){t.exports={bigPlayButton:e("./component/big-play-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume")}},{"./component/big-play-button":19,"./component/controlbar":20,"./component/fullscreen-button":21,"./component/live-display":22,"./component/play-button":23,"./component/progress":24,"./component/time-display":25,"./component/volume":26}]},{},[2]);